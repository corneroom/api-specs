openapi: 3.0.0
info:
  title: App API Gateway
  description: API Gateway for client-facing application endpoints.......
  version: 1.0.0
  license:
    name: MIT
    url: https://opensource.org/licenses/MIT
servers:
  - url: https://app-staging-gateway-8ua0taf7.uc.gateway.dev/api/v1
    description: Staging
paths:
  /users/heartbeat:
    get:
      description: Returns the heartbeat status of the user service.
      summary: User service heartbeat
      tags:
        - user
      operationId: userHeartbeat
      x-google-backend:
        address: https://user-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      responses:
        '200':
          description: User service heartbeat
          content:
            application/json:
              schema:
                type: object
                description: Standard error response model for failed requests.
                properties:
                  success:
                    type: boolean
                    description: Indicates if the request was successful.
                    example: false
                  error:
                    type: string
                    description: Error message describing the failure.
                    example: Email already exists.
                  toast:
                    type: string
                    description: Optional toast message for the client UI.
                    example: Unable to process your request.
                required:
                  - success
                  - error
        '400':
          description: Bad request
          content:
            application/json:
              schema:
                type: object
                description: Standard error response model for failed requests.
                properties:
                  success:
                    type: boolean
                    description: Indicates if the request was successful.
                    example: false
                  error:
                    type: string
                    description: Error message describing the failure.
                    example: Phone number already registered.
                  toast:
                    type: string
                    description: Optional toast message for the client UI.
                    example: Unable to process your request.
                required:
                  - success
                  - error
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                type: object
                description: Standard error response model for failed requests.
                properties:
                  success:
                    type: boolean
                    description: Indicates if the request was successful.
                    example: false
                  error:
                    type: string
                    description: Error message describing the failure.
                    example: Incorrect email or password.
                  toast:
                    type: string
                    description: Optional toast message for the client UI.
                    example: Unable to process your request.
                required:
                  - success
                  - error
        '404':
          description: Not found
          content:
            application/json:
              schema:
                type: object
                description: Standard error response model for failed requests.
                properties:
                  success:
                    type: boolean
                    description: Indicates if the request was successful.
                    example: false
                  error:
                    type: string
                    description: Error message describing the failure.
                    example: Incorrect phone number or OTP.
                  toast:
                    type: string
                    description: Optional toast message for the client UI.
                    example: Unable to process your request.
                required:
                  - success
                  - error
        default:
          description: Default error response
          content:
            application/json:
              schema:
                type: object
                description: Standard error response model for failed requests.
                properties:
                  success:
                    type: boolean
                    description: Indicates if the request was successful.
                    example: false
                  error:
                    type: string
                    description: Error message describing the failure.
                    example: Verification code is invalid or expired.
                  toast:
                    type: string
                    description: Optional toast message for the client UI.
                    example: Unable to process your request.
                required:
                  - success
                  - error
      security: []
  /users/register/email:
    post:
      description: Registers a new user using email address.
      summary: User signup via email
      tags:
        - user
      operationId: emailSignUp
      x-google-backend:
        address: https://user-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required:
                - email
                - password
              properties:
                email:
                  type: string
                  format: email
                password:
                  type: string
                  minLength: 8
                  maxLength: 50
        description: The user to register
        required: true
      responses:
        '201':
          description: The registered user with JWT token
          headers:
            X-Corneroom-Access:
              description: >-
                JWT access token (new standard header, Title-Case per Go
                convention).
              schema:
                type: string
                example: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
            X-Corneroom-Refresh:
              description: >-
                Refresh token for future token refreshes (new standard header,
                Title-Case per Go convention).
              schema:
                type: string
                example: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
            Authorization:
              description: >-
                Bearer JWT token (legacy header, to be phased out - use
                X-Corneroom-Access).
              schema:
                type: string
                example: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
          content:
            application/json:
              schema:
                type: object
                description: Response containing a single user object.
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: object
                    properties:
                      id:
                        type: string
                      first_name:
                        type: string
                      email:
                        type: string
                      status:
                        type: string
                  toast:
                    type: string
                    example: User registered successfully.
                  error:
                    type: string
                    example: Email already exists.
                required:
                  - success
                  - data
        '400':
          description: Invalid request
          content:
            application/json:
              schema:
                type: object
                description: Standard error response model for failed requests.
                properties:
                  success:
                    type: boolean
                    description: Indicates if the request was successful.
                    example: false
                  error:
                    type: string
                    description: Error message describing the failure.
                    example: User not found.
                  toast:
                    type: string
                    description: Optional toast message for the client UI.
                    example: Unable to process your request.
                required:
                  - success
                  - error
        default:
          description: Default error response
          content:
            application/json:
              schema:
                type: object
                description: Standard error response model for failed requests.
                properties:
                  success:
                    type: boolean
                    description: Indicates if the request was successful.
                    example: false
                  error:
                    type: string
                    description: Error message describing the failure.
                    example: Authentication required.
                  toast:
                    type: string
                    description: Optional toast message for the client UI.
                    example: Unable to process your request.
                required:
                  - success
                  - error
      security: []
  /users/register/email/confirm:
    post:
      description: Confirms user registration via email verification code.
      summary: User signup via email confirmation
      tags:
        - user
      operationId: emailSignUpOTPConfirm
      x-google-backend:
        address: https://user-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                contact:
                  type: string
                  format: email
                  description: The email address used for registration
                otp:
                  type: string
                  description: The email verification code
                  maxLength: 6
                  pattern: ^[0-9]*$
              required:
                - otp
                - contact
        description: The email verification code
        required: true
      responses:
        '201':
          description: The registered and confirmed user with tokens in headers
          headers:
            Authorization:
              description: Bearer JWT access token to be used for subsequent requests.
              schema:
                type: string
                example: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
          content:
            application/json:
              schema:
                type: object
                description: Response containing a single user object.
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: object
                    properties:
                      id:
                        type: string
                      first_name:
                        type: string
                      last_name:
                        type: string
                      email:
                        type: string
                      bio:
                        type: string
                      avatar:
                        type: string
                        format: uri
                      phone:
                        type: string
                      birthday:
                        type: string
                        format: date-time
                      city:
                        type: string
                      country:
                        type: string
                        maxItems: 10
                      interests:
                        type: array
                        items:
                          type: string
                        maxItems: 10
                      languages:
                        type: array
                        items:
                          type: string
                        maxItems: 10
                      created_at:
                        type: string
                        format: date-time
                      updated_at:
                        type: string
                        format: date-time
                      gender:
                        type: string
                        enum:
                          - Male
                          - Female
                          - Non-binary
                          - Transgender
                          - Genderqueer
                          - Genderfluid
                          - Agender
                          - Two-spirit
                          - Bigender
                          - Other
                          - Prefer not to say
                      status:
                        type: string
                        enum:
                          - active
                          - suspended
                          - pending
                          - deleted
                      deleted:
                        type: boolean
                      deleted_at:
                        type: string
                        format: date-time
                  toast:
                    type: string
                    example: User registered successfully.
                  error:
                    type: string
                    example: Invalid or expired verification code.
                required:
                  - success
                  - data
        '400':
          description: Invalid request
          content:
            application/json:
              schema:
                type: object
                description: Standard error response model for failed requests.
                properties:
                  success:
                    type: boolean
                    description: Indicates if the request was successful.
                    example: false
                  error:
                    type: string
                    description: Error message describing the failure.
                    example: An unexpected error occurred.
                  toast:
                    type: string
                    description: Optional toast message for the client UI.
                    example: Unable to process your request.
                required:
                  - success
                  - error
        default:
          description: Default error response
          content:
            application/json:
              schema:
                type: object
                description: Standard error response model for failed requests.
                properties:
                  success:
                    type: boolean
                    description: Indicates if the request was successful.
                    example: false
                  error:
                    type: string
                    description: Error message describing the failure.
                    example: Email already exists.
                  toast:
                    type: string
                    description: Optional toast message for the client UI.
                    example: Unable to process your request.
                required:
                  - success
                  - error
      security: []
  /users/register/phone:
    post:
      description: Registers a new user using phone number.
      summary: User signup via phone number
      tags:
        - user
      operationId: phoneSignUp
      x-google-backend:
        address: https://user-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required:
                - phone_number
                - password
              properties:
                phone_number:
                  type: string
                  description: The phone number in E.164 format (e.g., +1234567890)
                password:
                  type: string
                  minLength: 8
                  maxLength: 50
        description: The user to register
        required: true
      responses:
        '201':
          description: The registered user
        '400':
          description: Invalid request
          content:
            application/json:
              schema:
                type: object
                description: Standard error response model for failed requests.
                properties:
                  success:
                    type: boolean
                    description: Indicates if the request was successful.
                    example: false
                  error:
                    type: string
                    description: Error message describing the failure.
                    example: Phone number already registered.
                  toast:
                    type: string
                    description: Optional toast message for the client UI.
                    example: Unable to process your request.
                required:
                  - success
                  - error
        default:
          description: Default error response
          content:
            application/json:
              schema:
                type: object
                description: Standard error response model for failed requests.
                properties:
                  success:
                    type: boolean
                    description: Indicates if the request was successful.
                    example: false
                  error:
                    type: string
                    description: Error message describing the failure.
                    example: Incorrect email or password.
                  toast:
                    type: string
                    description: Optional toast message for the client UI.
                    example: Unable to process your request.
                required:
                  - success
                  - error
      security: []
  /users/register/phone/confirm:
    post:
      description: Confirms user registration via phone verification code.
      summary: User signup via phone number confirmation
      tags:
        - user
      operationId: phoneSignUpOTPConfirm
      x-google-backend:
        address: https://user-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                contact:
                  type: string
                  description: The phone number in E.164 format (e.g., +1234567890)
                otp:
                  type: string
                  description: The phone verification code
                  maxLength: 6
                  pattern: ^[0-9]*$
              required:
                - otp
                - contact
        description: The phone verification code
        required: true
      responses:
        '201':
          description: The registered and confirmed user with tokens in headers
          headers:
            Authorization:
              description: Bearer JWT access token to be used for subsequent requests.
              schema:
                type: string
                example: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
          content:
            application/json:
              schema:
                type: object
                description: Response containing a single user object.
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: object
                    properties:
                      id:
                        type: string
                      first_name:
                        type: string
                      last_name:
                        type: string
                      email:
                        type: string
                      bio:
                        type: string
                      avatar:
                        type: string
                        format: uri
                      phone:
                        type: string
                      birthday:
                        type: string
                        format: date-time
                      city:
                        type: string
                      country:
                        type: string
                        maxItems: 10
                      interests:
                        type: array
                        items:
                          type: string
                        maxItems: 10
                      languages:
                        type: array
                        items:
                          type: string
                        maxItems: 10
                      created_at:
                        type: string
                        format: date-time
                      updated_at:
                        type: string
                        format: date-time
                      gender:
                        type: string
                        enum:
                          - Male
                          - Female
                          - Non-binary
                          - Transgender
                          - Genderqueer
                          - Genderfluid
                          - Agender
                          - Two-spirit
                          - Bigender
                          - Other
                          - Prefer not to say
                      status:
                        type: string
                        enum:
                          - active
                          - suspended
                          - pending
                          - deleted
                      deleted:
                        type: boolean
                      deleted_at:
                        type: string
                        format: date-time
                  toast:
                    type: string
                    example: User registered successfully.
                  error:
                    type: string
                    example: Invalid or expired phone verification code.
                required:
                  - success
                  - data
        '400':
          description: Invalid request
          content:
            application/json:
              schema:
                type: object
                description: Standard error response model for failed requests.
                properties:
                  success:
                    type: boolean
                    description: Indicates if the request was successful.
                    example: false
                  error:
                    type: string
                    description: Error message describing the failure.
                    example: Incorrect phone number or OTP.
                  toast:
                    type: string
                    description: Optional toast message for the client UI.
                    example: Unable to process your request.
                required:
                  - success
                  - error
        default:
          description: Default error response
          content:
            application/json:
              schema:
                type: object
                description: Standard error response model for failed requests.
                properties:
                  success:
                    type: boolean
                    description: Indicates if the request was successful.
                    example: false
                  error:
                    type: string
                    description: Error message describing the failure.
                    example: Verification code is invalid or expired.
                  toast:
                    type: string
                    description: Optional toast message for the client UI.
                    example: Unable to process your request.
                required:
                  - success
                  - error
      security: []
  /users/register/otp/email:
    post:
      description: Registers a new user using OTP sent to email.
      summary: Resend registration email OTP
      tags:
        - user
      operationId: sendRegistrationEmailOTP
      x-google-backend:
        address: https://user-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                email:
                  type: string
                  format: email
                  description: The email address to send the OTP
              required:
                - email
        description: The email address to send the OTP
        required: true
      responses:
        '201':
          description: The OTP sent to the email
          content:
            application/json:
              schema:
                type: object
                description: Standard error response model for failed requests.
                properties:
                  success:
                    type: boolean
                    description: Indicates if the request was successful.
                    example: false
                  error:
                    type: string
                    description: Error message describing the failure.
                    example: User not found.
                  toast:
                    type: string
                    description: Optional toast message for the client UI.
                    example: Unable to process your request.
                required:
                  - success
                  - error
        '400':
          description: Invalid request
          content:
            application/json:
              schema:
                type: object
                description: Standard error response model for failed requests.
                properties:
                  success:
                    type: boolean
                    description: Indicates if the request was successful.
                    example: false
                  error:
                    type: string
                    description: Error message describing the failure.
                    example: Authentication required.
                  toast:
                    type: string
                    description: Optional toast message for the client UI.
                    example: Unable to process your request.
                required:
                  - success
                  - error
        default:
          description: Default error response
          content:
            application/json:
              schema:
                type: object
                description: Standard error response model for failed requests.
                properties:
                  success:
                    type: boolean
                    description: Indicates if the request was successful.
                    example: false
                  error:
                    type: string
                    description: Error message describing the failure.
                    example: An unexpected error occurred.
                  toast:
                    type: string
                    description: Optional toast message for the client UI.
                    example: Unable to process your request.
                required:
                  - success
                  - error
      security: []
  /users/register/otp/phone:
    post:
      description: Registers a new user using OTP sent to phone.
      summary: Resend registration Phone OTP
      tags:
        - user
      operationId: sendRegistrationPhoneOTP
      x-google-backend:
        address: https://user-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                phone_number:
                  type: string
                  description: The phone number in E.164 format (e.g., +1234567890)
              required:
                - phone_number
        description: The phone number to send the OTP
        required: true
      responses:
        '201':
          description: The OTP sent to the phone
          content:
            application/json:
              schema:
                type: object
                description: Standard error response model for failed requests.
                properties:
                  success:
                    type: boolean
                    description: Indicates if the request was successful.
                    example: false
                  error:
                    type: string
                    description: Error message describing the failure.
                    example: Email already exists.
                  toast:
                    type: string
                    description: Optional toast message for the client UI.
                    example: Unable to process your request.
                required:
                  - success
                  - error
        '400':
          description: Invalid request
          content:
            application/json:
              schema:
                type: object
                description: Standard error response model for failed requests.
                properties:
                  success:
                    type: boolean
                    description: Indicates if the request was successful.
                    example: false
                  error:
                    type: string
                    description: Error message describing the failure.
                    example: Phone number already registered.
                  toast:
                    type: string
                    description: Optional toast message for the client UI.
                    example: Unable to process your request.
                required:
                  - success
                  - error
        default:
          description: Default error response
          content:
            application/json:
              schema:
                type: object
                description: Standard error response model for failed requests.
                properties:
                  success:
                    type: boolean
                    description: Indicates if the request was successful.
                    example: false
                  error:
                    type: string
                    description: Error message describing the failure.
                    example: Incorrect email or password.
                  toast:
                    type: string
                    description: Optional toast message for the client UI.
                    example: Unable to process your request.
                required:
                  - success
                  - error
      security: []
  /users/social/auth:
    post:
      description: Authenticates user via social login provider.
      summary: User auth via social media
      tags:
        - user
      operationId: socialAuth
      x-google-backend:
        address: https://user-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required:
                - id_token
              properties:
                id_token:
                  type: string
                  description: The social media token
        description: The user cred to authenticate
        required: true
      responses:
        '200':
          description: >-
            Return a user with JWT tokens in headers if exists or create a new
            user
          headers:
            Authorization:
              description: Bearer JWT access token to be used for subsequent requests.
              schema:
                type: string
                example: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
          content:
            application/json:
              schema:
                type: object
                description: Response for user social authentication.
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: object
                    properties:
                      id:
                        type: string
                      first_name:
                        type: string
                      last_name:
                        type: string
                      email:
                        type: string
                      bio:
                        type: string
                      avatar:
                        type: string
                        format: uri
                      phone:
                        type: string
                      birthday:
                        type: string
                        format: date-time
                      city:
                        type: string
                      country:
                        type: string
                        maxItems: 10
                      interests:
                        type: array
                        items:
                          type: string
                        maxItems: 10
                      languages:
                        type: array
                        items:
                          type: string
                        maxItems: 10
                      created_at:
                        type: string
                        format: date-time
                      updated_at:
                        type: string
                        format: date-time
                      gender:
                        type: string
                        enum:
                          - Male
                          - Female
                          - Non-binary
                          - Transgender
                          - Genderqueer
                          - Genderfluid
                          - Agender
                          - Two-spirit
                          - Bigender
                          - Other
                          - Prefer not to say
                  toast:
                    type: string
                    example: Social authentication successful.
                  error:
                    type: string
                    example: Social authentication failed.
                required:
                  - success
                  - data
        '400':
          description: Invalid request
          content:
            application/json:
              schema:
                type: object
                description: Standard error response model for failed requests.
                properties:
                  success:
                    type: boolean
                    description: Indicates if the request was successful.
                    example: false
                  error:
                    type: string
                    description: Error message describing the failure.
                    example: Incorrect phone number or OTP.
                  toast:
                    type: string
                    description: Optional toast message for the client UI.
                    example: Unable to process your request.
                required:
                  - success
                  - error
        default:
          description: Default error response
          content:
            application/json:
              schema:
                type: object
                description: Standard error response model for failed requests.
                properties:
                  success:
                    type: boolean
                    description: Indicates if the request was successful.
                    example: false
                  error:
                    type: string
                    description: Error message describing the failure.
                    example: Verification code is invalid or expired.
                  toast:
                    type: string
                    description: Optional toast message for the client UI.
                    example: Unable to process your request.
                required:
                  - success
                  - error
      security: []
  /users/login/email:
    post:
      description: Logs in a user using email and password.
      summary: Sign in a user via email
      tags:
        - user
      operationId: emailSignIn
      x-google-backend:
        address: https://user-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required:
                - email
                - password
              properties:
                email:
                  type: string
                  format: email
                password:
                  type: string
                  minLength: 8
                  maxLength: 50
        description: The credentials to login
        required: true
      responses:
        '200':
          description: The logged in user with tokens in headers
          headers:
            Authorization:
              description: Bearer JWT access token to be used for subsequent requests.
              schema:
                type: string
                example: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
          content:
            application/json:
              schema:
                type: object
                description: Response for user login (email/phone).
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: object
                    properties:
                      id:
                        type: string
                      first_name:
                        type: string
                      last_name:
                        type: string
                      email:
                        type: string
                      bio:
                        type: string
                      avatar:
                        type: string
                        format: uri
                      phone:
                        type: string
                      birthday:
                        type: string
                        format: date-time
                      city:
                        type: string
                      country:
                        type: string
                        maxItems: 10
                      interests:
                        type: array
                        items:
                          type: string
                        maxItems: 10
                      languages:
                        type: array
                        items:
                          type: string
                        maxItems: 10
                      created_at:
                        type: string
                        format: date-time
                      updated_at:
                        type: string
                        format: date-time
                      gender:
                        type: string
                        enum:
                          - Male
                          - Female
                          - Non-binary
                          - Transgender
                          - Genderqueer
                          - Genderfluid
                          - Agender
                          - Two-spirit
                          - Bigender
                          - Other
                          - Prefer not to say
                  toast:
                    type: string
                    example: Login successful.
                  error:
                    type: string
                    example: Incorrect email or password.
                required:
                  - success
                  - data
        '400':
          description: Invalid request
          content:
            application/json:
              schema:
                type: object
                description: Standard error response model for failed requests.
                properties:
                  success:
                    type: boolean
                    description: Indicates if the request was successful.
                    example: false
                  error:
                    type: string
                    description: Error message describing the failure.
                    example: User not found.
                  toast:
                    type: string
                    description: Optional toast message for the client UI.
                    example: Unable to process your request.
                required:
                  - success
                  - error
        default:
          description: Default error response
          content:
            application/json:
              schema:
                type: object
                description: Standard error response model for failed requests.
                properties:
                  success:
                    type: boolean
                    description: Indicates if the request was successful.
                    example: false
                  error:
                    type: string
                    description: Error message describing the failure.
                    example: Authentication required.
                  toast:
                    type: string
                    description: Optional toast message for the client UI.
                    example: Unable to process your request.
                required:
                  - success
                  - error
      security: []
  /users/login/phone:
    post:
      description: Logs in a user using phone number and OTP.
      summary: Sign in a user via phone number
      tags:
        - user
      operationId: phoneSignIn
      x-google-backend:
        address: https://user-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required:
                - phone_number
                - password
              properties:
                phone_number:
                  type: string
                  description: The phone number in E.164 format (e.g., +1234567890)
                password:
                  type: string
                  minLength: 8
                  maxLength: 50
        description: The credentials to login
        required: true
      responses:
        '200':
          description: The logged in user with tokens in headers
          headers:
            Authorization:
              description: Bearer JWT access token to be used for subsequent requests.
              schema:
                type: string
                example: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
          content:
            application/json:
              schema:
                type: object
                description: Response for user login (email/phone).
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: object
                    properties:
                      id:
                        type: string
                      first_name:
                        type: string
                      last_name:
                        type: string
                      email:
                        type: string
                      bio:
                        type: string
                      avatar:
                        type: string
                        format: uri
                      phone:
                        type: string
                      birthday:
                        type: string
                        format: date-time
                      city:
                        type: string
                      country:
                        type: string
                        maxItems: 10
                      interests:
                        type: array
                        items:
                          type: string
                        maxItems: 10
                      languages:
                        type: array
                        items:
                          type: string
                        maxItems: 10
                      created_at:
                        type: string
                        format: date-time
                      updated_at:
                        type: string
                        format: date-time
                      gender:
                        type: string
                        enum:
                          - Male
                          - Female
                          - Non-binary
                          - Transgender
                          - Genderqueer
                          - Genderfluid
                          - Agender
                          - Two-spirit
                          - Bigender
                          - Other
                          - Prefer not to say
                  toast:
                    type: string
                    example: Login successful.
                  error:
                    type: string
                    example: Incorrect phone number or OTP.
                required:
                  - success
                  - data
        '400':
          description: Invalid request
          content:
            application/json:
              schema:
                type: object
                description: Standard error response model for failed requests.
                properties:
                  success:
                    type: boolean
                    description: Indicates if the request was successful.
                    example: false
                  error:
                    type: string
                    description: Error message describing the failure.
                    example: An unexpected error occurred.
                  toast:
                    type: string
                    description: Optional toast message for the client UI.
                    example: Unable to process your request.
                required:
                  - success
                  - error
        default:
          description: Default error response
          content:
            application/json:
              schema:
                type: object
                description: Standard error response model for failed requests.
                properties:
                  success:
                    type: boolean
                    description: Indicates if the request was successful.
                    example: false
                  error:
                    type: string
                    description: Error message describing the failure.
                    example: Email already exists.
                  toast:
                    type: string
                    description: Optional toast message for the client UI.
                    example: Unable to process your request.
                required:
                  - success
                  - error
      security: []
  /users/login/otp/initiate:
    post:
      description: >-
        Initiates passwordless login by sending an OTP to the user's verified
        contact (email or phone). The user must have a verified email or phone
        number to use this endpoint.
      summary: Initiate OTP-based passwordless login
      tags:
        - user
      operationId: initiateOTPLogin
      x-google-backend:
        address: https://user-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required:
                - contact
                - method
              properties:
                contact:
                  type: string
                  description: >-
                    The email address or phone number (E.164 format) to send OTP
                    to
                  example: user@example.com
                method:
                  type: string
                  enum:
                    - EMAIL
                    - SMS
                    - WHATSAPP
                  description: The delivery method for the OTP.
                device_info:
                  type: object
                  description: Optional device information
                  properties:
                    device_id:
                      type: string
                    device_type:
                      type: string
                    device_model:
                      type: string
                    app_version:
                      type: string
                    system_name:
                      type: string
        description: Contact information and delivery method
        required: true
      responses:
        '200':
          description: OTP sent successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  toast:
                    type: string
                    example: >-
                      OTP sent successfully. Please check your email for the
                      verification code.
                  error:
                    type: string
                required:
                  - success
        '400':
          description: Invalid request
          content:
            application/json:
              schema:
                type: object
                description: Standard error response model for failed requests.
                properties:
                  success:
                    type: boolean
                    example: false
                  error:
                    type: string
                    description: Error message describing the failure.
                    example: >-
                      Failed to validate request body: method must be one of
                      [EMAIL SMS WHATSAPP]
                  toast:
                    type: string
                    description: Optional toast message for the client UI.
                    example: Oops! Something went wrong. Please try again later.
                required:
                  - success
                  - error
        '401':
          description: Unauthorized - invalid credentials or unverified contact
          content:
            application/json:
              schema:
                type: object
                description: Standard error response model for failed requests.
                properties:
                  success:
                    type: boolean
                    example: false
                  error:
                    type: string
                    description: Error message describing the failure.
                    example: Invalid credentials.
                  toast:
                    type: string
                    description: Optional toast message for the client UI.
                    example: Invalid credentials.
                required:
                  - success
                  - error
        '403':
          description: Forbidden - account not active
          content:
            application/json:
              schema:
                type: object
                description: Standard error response model for failed requests.
                properties:
                  success:
                    type: boolean
                    example: false
                  error:
                    type: string
                    description: Error message describing the failure.
                    example: Account is not active.
                  toast:
                    type: string
                    description: Optional toast message for the client UI.
                    example: Your account is not active.
                required:
                  - success
                  - error
        default:
          description: Default error response
          content:
            application/json:
              schema:
                type: object
                description: Standard error response model for failed requests.
                properties:
                  success:
                    type: boolean
                    example: false
                  error:
                    type: string
                    description: Error message describing the failure.
                    example: An unexpected error occurred.
                  toast:
                    type: string
                    description: Optional toast message for the client UI.
                    example: Oops! Something went wrong. Please try again later.
                required:
                  - success
                  - error
      security: []
  /users/login/otp/verify:
    post:
      description: >-
        Verifies the OTP code and completes passwordless login. Returns JWT
        access and refresh tokens in headers along with the user profile.
      summary: Verify OTP and complete passwordless login
      tags:
        - user
      operationId: verifyOTPLogin
      x-google-backend:
        address: https://user-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required:
                - contact
                - method
                - otp
              properties:
                contact:
                  type: string
                  description: >-
                    The email address or phone number (E.164 format) used to
                    initiate login
                  example: user@example.com
                method:
                  type: string
                  enum:
                    - EMAIL
                    - SMS
                    - WHATSAPP
                  description: The delivery method used.
                otp:
                  type: string
                  minLength: 6
                  maxLength: 6
                  description: The 6-digit OTP code received
                  example: '123456'
                device_info:
                  type: object
                  description: Optional device information
                  properties:
                    device_id:
                      type: string
                    device_type:
                      type: string
                    device_model:
                      type: string
                    app_version:
                      type: string
                    system_name:
                      type: string
                fcm_token:
                  type: string
                  description: Optional FCM token for push notifications
                location:
                  type: object
                  description: Optional location data
                  properties:
                    latitude:
                      type: number
                      format: float
                    longitude:
                      type: number
                      format: float
        description: OTP verification details
        required: true
      responses:
        '200':
          description: Login successful - user authenticated with tokens in headers
          headers:
            Authorization:
              description: Bearer JWT access token to be used for subsequent requests.
              schema:
                type: string
                example: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
            X-Corneroom-Access:
              description: >-
                JWT access token (new standard header, Title-Case per Go
                convention).
              schema:
                type: string
                example: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
            X-Corneroom-Refresh:
              description: >-
                Refresh token for future token refreshes (new standard header,
                Title-Case per Go convention).
              schema:
                type: string
                example: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
          content:
            application/json:
              schema:
                type: object
                description: Response for successful OTP login.
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    $ref: '#/components/schemas/EnhancedUserProfileResponse'
                  toast:
                    type: string
                    example: Welcome back! You're now logged in.
                  error:
                    type: string
                required:
                  - success
                  - data
        '400':
          description: Invalid request
          content:
            application/json:
              schema:
                type: object
                description: Standard error response model for failed requests.
                properties:
                  success:
                    type: boolean
                    example: false
                  error:
                    type: string
                    description: Error message describing the failure.
                    example: 'Failed to validate request body: otp must be 6 characters'
                  toast:
                    type: string
                    description: Optional toast message for the client UI.
                    example: Oops! Something went wrong. Please try again later.
                required:
                  - success
                  - error
        '401':
          description: Unauthorized - invalid or expired OTP
          content:
            application/json:
              schema:
                type: object
                description: Standard error response model for failed requests.
                properties:
                  success:
                    type: boolean
                    example: false
                  error:
                    type: string
                    description: Error message describing the failure.
                    example: 'OTP verification failed: OTP expired'
                  toast:
                    type: string
                    description: Optional toast message for the client UI.
                    example: Invalid or expired OTP. Please try again.
                required:
                  - success
                  - error
        '403':
          description: Forbidden - account not active
          content:
            application/json:
              schema:
                type: object
                description: Standard error response model for failed requests.
                properties:
                  success:
                    type: boolean
                    example: false
                  error:
                    type: string
                    description: Error message describing the failure.
                    example: Account is not active.
                  toast:
                    type: string
                    description: Optional toast message for the client UI.
                    example: Your account is not active.
                required:
                  - success
                  - error
        default:
          description: Default error response
          content:
            application/json:
              schema:
                type: object
                description: Standard error response model for failed requests.
                properties:
                  success:
                    type: boolean
                    example: false
                  error:
                    type: string
                    description: Error message describing the failure.
                    example: An unexpected error occurred.
                  toast:
                    type: string
                    description: Optional toast message for the client UI.
                    example: Oops! Something went wrong. Please try again later.
                required:
                  - success
                  - error
      security: []
  /users/refresh:
    post:
      description: >-
        Refreshes an access token using a refresh token. Returns new access and
        refresh tokens in headers.
      summary: Refresh access token
      tags:
        - user
      operationId: refreshToken
      x-google-backend:
        address: https://user-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                refresh_token:
                  type: string
                  description: >-
                    The refresh token (prefer sending in X-Corneroom-Refresh
                    header)
              description: Optional refresh token in body (prefer header if available)
        required: false
      responses:
        '200':
          description: Tokens refreshed successfully
          headers:
            X-Corneroom-Access:
              description: >-
                JWT access token (new standard header, Title-Case per Go
                convention).
              schema:
                type: string
                example: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
            X-Corneroom-Refresh:
              description: >-
                Refresh token for future token refreshes (new standard header,
                Title-Case per Go convention).
              schema:
                type: string
                example: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
            Authorization:
              description: >-
                Bearer JWT access token (legacy header, to be phased out - use
                X-Corneroom-Access).
              schema:
                type: string
                example: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  toast:
                    type: string
                    example: Tokens refreshed successfully.
                  error:
                    type: string
                required:
                  - success
        '400':
          description: Bad request - refresh token missing
          content:
            application/json:
              schema:
                type: object
                description: Standard error response model for failed requests.
                properties:
                  success:
                    type: boolean
                    example: false
                  error:
                    type: string
                    description: Error message describing the failure.
                    example: Refresh token is required.
                  toast:
                    type: string
                    description: Optional toast message for the client UI.
                    example: Please provide a refresh token.
                required:
                  - success
                  - error
        '401':
          description: Unauthorized - invalid or expired refresh token
          content:
            application/json:
              schema:
                type: object
                description: Standard error response model for failed requests.
                properties:
                  success:
                    type: boolean
                    example: false
                  error:
                    type: string
                    description: Error message describing the failure.
                    example: Invalid or expired refresh token.
                  toast:
                    type: string
                    description: Optional toast message for the client UI.
                    example: Please log in again.
                required:
                  - success
                  - error
        default:
          description: Default error response
          content:
            application/json:
              schema:
                type: object
                description: Standard error response model for failed requests.
                properties:
                  success:
                    type: boolean
                    example: false
                  error:
                    type: string
                    description: Error message describing the failure.
                    example: An unexpected error occurred.
                  toast:
                    type: string
                    description: Optional toast message for the client UI.
                    example: Unable to process your request.
                required:
                  - success
                  - error
      security: []
  /users/password/reset:
    post:
      description: >-
        Initiates a password reset flow by sending a reset code to the user's
        email.
      summary: Request password reset
      tags:
        - user
      operationId: requestPasswordReset
      x-google-backend:
        address: https://user-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required:
                - email
              properties:
                email:
                  type: string
                  format: email
                  description: The email address of the user requesting password reset
        description: The password reset request
        required: true
      responses:
        '200':
          description: Password reset code sent successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  toast:
                    type: string
                    description: Success message for the client UI.
                    example: >-
                      Password reset initiated successfully. Please check your
                      email for further instructions.
                  error:
                    type: string
                required:
                  - success
        '400':
          description: Bad request - invalid email or validation error
          content:
            application/json:
              schema:
                type: object
                description: Standard error response model for failed requests.
                properties:
                  success:
                    type: boolean
                    example: false
                  error:
                    type: string
                    description: Error message describing the failure.
                    example: Failed to parse request body
                  toast:
                    type: string
                    description: Optional toast message for the client UI.
                    example: Oops! Something went wrong. Please try again later.
                required:
                  - success
                  - error
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                type: object
                description: Standard error response model for failed requests.
                properties:
                  success:
                    type: boolean
                    example: false
                  error:
                    type: string
                    description: Error message describing the failure.
                    example: Failed to reset password
                  toast:
                    type: string
                    description: Optional toast message for the client UI.
                    example: Oops! Something went wrong. Please try again later.
                required:
                  - success
                  - error
        default:
          description: Default error response
          content:
            application/json:
              schema:
                type: object
                description: Standard error response model for failed requests.
                properties:
                  success:
                    type: boolean
                    example: false
                  error:
                    type: string
                    description: Error message describing the failure.
                    example: An unexpected error occurred.
                  toast:
                    type: string
                    description: Optional toast message for the client UI.
                    example: Unable to process your request.
                required:
                  - success
                  - error
      security: []
  /users/password/reset/verify:
    post:
      description: >-
        Verifies the password reset OTP code and creates a session token for
        completing the password reset. This endpoint is called after the user
        enters the 6-digit OTP code received via email.
      summary: Verify password reset OTP
      tags:
        - user
      operationId: verifyPasswordResetOTP
      x-google-backend:
        address: https://user-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required:
                - email
                - otp
              properties:
                email:
                  type: string
                  format: email
                  description: The email address that received the OTP
                otp:
                  type: string
                  minLength: 6
                  maxLength: 6
                  description: The 6-digit OTP code received via email
        description: The password reset OTP verification request
        required: true
      responses:
        '200':
          description: OTP verified successfully, session token created
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: object
                    properties:
                      valid:
                        type: boolean
                        example: true
                      email:
                        type: string
                        format: email
                        description: The email address associated with the OTP
                      session_token:
                        type: string
                        description: >-
                          Session token to use for completing password reset (15
                          minute expiry)
                  toast:
                    type: string
                    example: Code verified successfully.
                  error:
                    type: string
                required:
                  - success
                  - data
        '400':
          description: Bad request - invalid or expired OTP, or validation error
          content:
            application/json:
              schema:
                type: object
                description: Standard error response model for failed requests.
                properties:
                  success:
                    type: boolean
                    example: false
                  error:
                    type: string
                    description: Error message describing the failure.
                    example: Invalid or expired verification code.
                  toast:
                    type: string
                    description: Optional toast message for the client UI.
                    example: Invalid or expired verification code. Please try again.
                required:
                  - success
                  - error
        default:
          description: Default error response
          content:
            application/json:
              schema:
                type: object
                description: Standard error response model for failed requests.
                properties:
                  success:
                    type: boolean
                    example: false
                  error:
                    type: string
                    description: Error message describing the failure.
                    example: An unexpected error occurred.
                  toast:
                    type: string
                    description: Optional toast message for the client UI.
                    example: Unable to process your request.
                required:
                  - success
                  - error
      security: []
  /users/password/confirm:
    post:
      description: >-
        Confirms and completes the password reset using the session token
        obtained from the verify endpoint.
      summary: Confirm password reset
      tags:
        - user
      operationId: confirmPasswordReset
      x-google-backend:
        address: https://user-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required:
                - session_token
                - password
                - verify_password
              properties:
                session_token:
                  type: string
                  description: >-
                    The session token obtained from /users/password/reset/verify
                    endpoint
                password:
                  type: string
                  minLength: 8
                  maxLength: 50
                  description: The new password
                verify_password:
                  type: string
                  minLength: 8
                  maxLength: 50
                  description: Verify the new password (must match password)
        description: The password reset confirmation request
        required: true
      responses:
        '200':
          description: Password reset completed successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  toast:
                    type: string
                    description: Success message for the client UI.
                    example: Password reset successfully.
                  error:
                    type: string
                required:
                  - success
        '400':
          description: >-
            Bad request - invalid token, passwords don't match, or validation
            error
          content:
            application/json:
              schema:
                type: object
                description: Standard error response model for failed requests.
                properties:
                  success:
                    type: boolean
                    example: false
                  error:
                    type: string
                    description: Error message describing the failure.
                    example: Failed to parse request body
                  toast:
                    type: string
                    description: Optional toast message for the client UI.
                    example: Oops! Something went wrong. Please try again later.
                required:
                  - success
                  - error
        '500':
          description: >-
            Internal server error - token expired, invalid, or other server
            error
          content:
            application/json:
              schema:
                type: object
                description: Standard error response model for failed requests.
                properties:
                  success:
                    type: boolean
                    example: false
                  error:
                    type: string
                    description: Error message describing the failure.
                    example: Failed to reset password
                  toast:
                    type: string
                    description: Optional toast message for the client UI.
                    example: Oops! Something went wrong. Please try again later.
                required:
                  - success
                  - error
        default:
          description: Default error response
          content:
            application/json:
              schema:
                type: object
                description: Standard error response model for failed requests.
                properties:
                  success:
                    type: boolean
                    example: false
                  error:
                    type: string
                    description: Error message describing the failure.
                    example: An unexpected error occurred.
                  toast:
                    type: string
                    description: Optional toast message for the client UI.
                    example: Unable to process your request.
                required:
                  - success
                  - error
      security: []
  /users/me:
    get:
      description: Retrieves the current user's enhanced profile information.
      summary: Get current user profile
      tags:
        - user
      operationId: getCurrentUser
      x-google-backend:
        address: https://user-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      security:
        - jwtAuth: []
      responses:
        '200':
          description: The current user profile in enhanced format
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/EnhancedUserProfileResponse'
        '400':
          description: Invalid request
          content:
            application/json:
              schema:
                type: object
                description: Standard error response model for failed requests.
                properties:
                  success:
                    type: boolean
                    description: Indicates if the request was successful.
                    example: false
                  error:
                    type: string
                    description: Error message describing the failure.
                    example: Phone number already registered.
                  toast:
                    type: string
                    description: Optional toast message for the client UI.
                    example: Unable to process your request.
                required:
                  - success
                  - error
        '404':
          description: User not found
          content:
            application/json:
              schema:
                type: object
                description: Standard error response model for failed requests.
                properties:
                  success:
                    type: boolean
                    description: Indicates if the request was successful.
                    example: false
                  error:
                    type: string
                    description: Error message describing the failure.
                    example: User not found.
                  toast:
                    type: string
                    description: Optional toast message for the client UI.
                    example: Unable to process your request.
                required:
                  - success
                  - error
        default:
          description: Default error response
          content:
            application/json:
              schema:
                type: object
                description: Standard error response model for failed requests.
                properties:
                  success:
                    type: boolean
                    description: Indicates if the request was successful.
                    example: false
                  error:
                    type: string
                    description: Error message describing the failure.
                    example: Incorrect phone number or OTP.
                  toast:
                    type: string
                    description: Optional toast message for the client UI.
                    example: Unable to process your request.
                required:
                  - success
                  - error
    patch:
      description: >-
        Updates the current user's profile information using enhanced nested
        format for partial updates.
      summary: Update current user profile
      tags:
        - user
      operationId: updateCurrentUser
      x-google-backend:
        address: https://user-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      security:
        - jwtAuth: []
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/EnhancedProfileUpdateRequest'
        description: Profile update data in enhanced nested format
        required: true
      responses:
        '200':
          description: The updated user profile in enhanced format
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/EnhancedUserProfileResponse'
        '400':
          description: Invalid request
          content:
            application/json:
              schema:
                type: object
                description: Standard error response model for failed requests.
                properties:
                  success:
                    type: boolean
                    description: Indicates if the request was successful.
                    example: false
                  error:
                    type: string
                    description: Error message describing the failure.
                    example: Verification code is invalid or expired.
                  toast:
                    type: string
                    description: Optional toast message for the client UI.
                    example: Unable to process your request.
                required:
                  - success
                  - error
        '404':
          description: User not found
          content:
            application/json:
              schema:
                type: object
                description: Standard error response model for failed requests.
                properties:
                  success:
                    type: boolean
                    description: Indicates if the request was successful.
                    example: false
                  error:
                    type: string
                    description: Error message describing the failure.
                    example: User not found.
                  toast:
                    type: string
                    description: Optional toast message for the client UI.
                    example: Unable to process your request.
                required:
                  - success
                  - error
        default:
          description: Default error response
          content:
            application/json:
              schema:
                type: object
                description: Standard error response model for failed requests.
                properties:
                  success:
                    type: boolean
                    description: Indicates if the request was successful.
                    example: false
                  error:
                    type: string
                    description: Error message describing the failure.
                    example: Authentication required.
                  toast:
                    type: string
                    description: Optional toast message for the client UI.
                    example: Unable to process your request.
                required:
                  - success
                  - error
    delete:
      description: >
        Validates if the current user can be deleted and sends a deletion
        request to Slack for manual review.


        This endpoint performs validation checks across multiple services:

        - Active/confirmed bookings (booking-service)

        - Upcoming bookings (booking-service)

        - Pending payments (payment-service)

        - Active listings as host (community-service)

        - Any other business constraints


        If validation fails, returns detailed errors/warnings. If validation
        passes,

        sends a deletion request to Slack channel for manual approval.


        **Note:** This endpoint does NOT actually delete the user. Actual
        deletion

        requires manual approval via Slack and will be handled separately.
      summary: Request user account deletion
      tags:
        - user
      operationId: requestUserDeletion
      x-google-backend:
        address: https://user-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      security:
        - jwtAuth: []
      responses:
        '200':
          description: Validation passed - deletion request sent to Slack
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserDeletionResponse'
        '400':
          description: Validation failed - user cannot be deleted
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserDeletionValidationError'
        '401':
          description: Unauthorized - Authentication required
          content:
            application/json:
              schema:
                type: object
                description: Standard error response model for failed requests.
                properties:
                  success:
                    type: boolean
                    example: false
                  error:
                    type: string
                    example: Authentication required.
                  toast:
                    type: string
                    example: Please log in to continue.
                required:
                  - success
                  - error
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                type: object
                description: Standard error response model for failed requests.
                properties:
                  success:
                    type: boolean
                    example: false
                  error:
                    type: string
                    example: An unexpected error occurred.
                  toast:
                    type: string
                    example: Unable to process your request.
                required:
                  - success
                  - error
  /users/{userId}/profile:
    get:
      description: >-
        Retrieves a user's enhanced profile information by user ID. Returns the
        same profile format as /users/me, but allows viewing other users'
        profiles. Requires authentication to prevent brute-force enumeration.
      summary: Get user profile by ID
      tags:
        - user
      operationId: getUserProfileById
      x-google-backend:
        address: https://user-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      security:
        - jwtAuth: []
      parameters:
        - name: userId
          in: path
          required: true
          description: The unique identifier of the user
          schema:
            type: string
            example: user-123
      responses:
        '200':
          description: The user profile in enhanced format
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/EnhancedUserProfileResponse'
        '400':
          description: Invalid request
          content:
            application/json:
              schema:
                type: object
                description: Standard error response model for failed requests.
                properties:
                  success:
                    type: boolean
                    example: false
                  error:
                    type: string
                    example: Invalid user ID format.
                  toast:
                    type: string
                    example: Unable to process your request.
                required:
                  - success
                  - error
        '401':
          description: Unauthorized - Authentication required
          content:
            application/json:
              schema:
                type: object
                description: Standard error response model for failed requests.
                properties:
                  success:
                    type: boolean
                    description: Indicates if the request was successful.
                    example: false
                  error:
                    type: string
                    description: Error message describing the failure.
                    example: Authentication required.
                  toast:
                    type: string
                    description: Optional toast message for the client UI.
                    example: Please log in to view user profiles.
                required:
                  - success
                  - error
        '403':
          description: Forbidden - User profile may be private or inaccessible
          content:
            application/json:
              schema:
                type: object
                description: Standard error response model for failed requests.
                properties:
                  success:
                    type: boolean
                    description: Indicates if the request was successful.
                    example: false
                  error:
                    type: string
                    description: Error message describing the failure.
                    example: Access to this user profile is restricted.
                  toast:
                    type: string
                    description: Optional toast message for the client UI.
                    example: You don't have permission to view this profile.
                required:
                  - success
                  - error
        '404':
          description: User not found
          content:
            application/json:
              schema:
                type: object
                description: Standard error response model for failed requests.
                properties:
                  success:
                    type: boolean
                    description: Indicates if the request was successful.
                    example: false
                  error:
                    type: string
                    description: Error message describing the failure.
                    example: User not found.
                  toast:
                    type: string
                    description: Optional toast message for the client UI.
                    example: User profile not available.
                required:
                  - success
                  - error
        default:
          description: Default error response
          content:
            application/json:
              schema:
                type: object
                description: Standard error response model for failed requests.
                properties:
                  success:
                    type: boolean
                    description: Indicates if the request was successful.
                    example: false
                  error:
                    type: string
                    description: Error message describing the failure.
                    example: An unexpected error occurred
                  toast:
                    type: string
                    description: Optional toast message for the client UI.
                    example: Unable to process your request.
                required:
                  - success
                  - error
  /users/me/stats:
    get:
      description: Retrieves the current user's statistics for dashboard display.
      summary: Get current user statistics
      tags:
        - user
      operationId: getCurrentUserStats
      x-google-backend:
        address: https://user-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      security:
        - jwtAuth: []
      responses:
        '200':
          description: The current user statistics
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: object
                    properties:
                      message_response_rate:
                        type: number
                        format: float
                        description: Percentage of messages responded to
                        example: 92
                      review_response_rate:
                        type: number
                        format: float
                        description: Percentage of reviews responded to
                        example: 85
                      total_reviews:
                        type: integer
                        description: Total number of reviews received
                        example: 0
                      total_messages:
                        type: integer
                        description: Total number of messages sent/received
                        example: 0
                      average_response_time:
                        type: number
                        format: float
                        description: Average response time in hours
                        example: 2.5
                      average_rating:
                        type: number
                        format: float
                        description: Average rating received
                        example: 0
                      total_listings:
                        type: integer
                        description: Total number of listings
                        example: 0
                      last_calculated:
                        type: string
                        format: date-time
                        description: When stats were last calculated
                        example: '2025-01-27T10:30:00Z'
                  toast:
                    type: string
                    example: User statistics retrieved successfully.
                  error:
                    type: string
                required:
                  - success
                  - data
        '400':
          description: Invalid request
          content:
            application/json:
              schema:
                type: object
                description: Standard error response model for failed requests.
                properties:
                  success:
                    type: boolean
                    example: false
                  error:
                    type: string
                    description: Error message describing the failure.
                    example: User not found.
                  toast:
                    type: string
                    description: Optional toast message for the client UI.
                    example: Unable to process your request.
                required:
                  - success
                  - error
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                type: object
                description: Standard error response model for failed requests.
                properties:
                  success:
                    type: boolean
                    example: false
                  error:
                    type: string
                    description: Error message describing the failure.
                    example: Authentication required.
                  toast:
                    type: string
                    description: Optional toast message for the client UI.
                    example: Please log in to access this resource.
                required:
                  - success
                  - error
        '404':
          description: User not found
          content:
            application/json:
              schema:
                type: object
                description: Standard error response model for failed requests.
                properties:
                  success:
                    type: boolean
                    example: false
                  error:
                    type: string
                    description: Error message describing the failure.
                    example: User not found.
                  toast:
                    type: string
                    description: Optional toast message for the client UI.
                    example: Unable to process your request.
                required:
                  - success
                  - error
        default:
          description: Default error response
          content:
            application/json:
              schema:
                type: object
                description: Standard error response model for failed requests.
                properties:
                  success:
                    type: boolean
                    example: false
                  error:
                    type: string
                    description: Error message describing the failure.
                    example: An unexpected error occurred.
                  toast:
                    type: string
                    description: Optional toast message for the client UI.
                    example: Unable to process your request.
                required:
                  - success
                  - error
  /users/me/avatar:
    patch:
      description: Updates the current user's avatar image.
      summary: Update current user's avatar
      tags:
        - user
      operationId: updateCurrentUserAvatar
      x-google-backend:
        address: https://user-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      security:
        - jwtAuth: []
      requestBody:
        content:
          application/json:
            schema:
              type: string
              format: uri
        description: JSON body with Avatar URL
        required: true
      responses:
        '200':
          description: The updated user
          content:
            application/json:
              schema:
                type: object
                description: Response containing the updated user avatar.
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: object
                    properties:
                      avatar:
                        type: string
                        format: uri
                        description: The updated avatar URL
                    description: The updated avatar object
                  toast:
                    type: string
                    example: Avatar updated successfully.
                  error:
                    type: string
                    example: Invalid image format.
                required:
                  - success
                  - data
        '400':
          description: Invalid request
          content:
            application/json:
              schema:
                type: object
                description: Standard error response model for failed requests.
                properties:
                  success:
                    type: boolean
                    description: Indicates if the request was successful.
                    example: false
                  error:
                    type: string
                    description: Error message describing the failure.
                    example: An unexpected error occurred.
                  toast:
                    type: string
                    description: Optional toast message for the client UI.
                    example: Unable to process your request.
                required:
                  - success
                  - error
        '404':
          description: User not found
          content:
            application/json:
              schema:
                type: object
                description: Standard error response model for failed requests.
                properties:
                  success:
                    type: boolean
                    description: Indicates if the request was successful.
                    example: false
                  error:
                    type: string
                    description: Error message describing the failure.
                    example: User not found.
                  toast:
                    type: string
                    description: Optional toast message for the client UI.
                    example: Unable to process your request.
                required:
                  - success
                  - error
        default:
          description: Default error response
          content:
            application/json:
              schema:
                type: object
                description: Standard error response model for failed requests.
                properties:
                  success:
                    type: boolean
                    description: Indicates if the request was successful.
                    example: false
                  error:
                    type: string
                    description: Error message describing the failure.
                    example: An unexpected error occurred.
                  toast:
                    type: string
                    description: Optional toast message for the client UI.
                    example: Unable to process your request.
                required:
                  - success
                  - error
    delete:
      description: Deletes the current user's avatar image.
      summary: Delete current user's avatar
      tags:
        - user
      operationId: deleteCurrentUserAvatar
      x-google-backend:
        address: https://user-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      security:
        - jwtAuth: []
      responses:
        '200':
          description: The updated user
          content:
            application/json:
              schema:
                type: object
                description: Response containing the updated user avatar.
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: object
                    properties:
                      avatar:
                        type: string
                        format: uri
                        description: The updated avatar URL
                    description: The updated avatar object
                  toast:
                    type: string
                    example: Avatar updated successfully.
                  error:
                    type: string
                    example: No avatar to delete.
                required:
                  - success
                  - data
        '400':
          description: Invalid request
          content:
            application/json:
              schema:
                type: object
                description: Standard error response model for failed requests.
                properties:
                  success:
                    type: boolean
                    description: Indicates if the request was successful.
                    example: false
                  error:
                    type: string
                    description: Error message describing the failure.
                    example: User not found.
                  toast:
                    type: string
                    description: Optional toast message for the client UI.
                    example: Unable to process your request.
                required:
                  - success
                  - error
        '404':
          description: User not found
          content:
            application/json:
              schema:
                type: object
                description: Standard error response model for failed requests.
                properties:
                  success:
                    type: boolean
                    description: Indicates if the request was successful.
                    example: false
                  error:
                    type: string
                    description: Error message describing the failure.
                    example: User not found.
                  toast:
                    type: string
                    description: Optional toast message for the client UI.
                    example: Unable to process your request.
                required:
                  - success
                  - error
        default:
          description: Default error response
          content:
            application/json:
              schema:
                type: object
                description: Standard error response model for failed requests.
                properties:
                  success:
                    type: boolean
                    description: Indicates if the request was successful.
                    example: false
                  error:
                    type: string
                    description: Error message describing the failure.
                    example: User not found.
                  toast:
                    type: string
                    description: Optional toast message for the client UI.
                    example: Unable to process your request.
                required:
                  - success
                  - error
    post:
      description: Uploads a new avatar image for the current user.
      summary: Change current user's password
      tags:
        - user
      operationId: changeCurrentUserPassword
      x-google-backend:
        address: https://user-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      security:
        - jwtAuth: []
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                old_password:
                  type: string
                  minLength: 8
                  maxLength: 50
                  description: The current password
                new_password:
                  type: string
                  minLength: 8
                  maxLength: 50
                  description: The new password
                verify_password:
                  type: string
                  minLength: 8
                  maxLength: 50
                  description: Verify the new password
              required:
                - old_password
                - new_password
                - verify_password
        description: The password change request
        required: true
      responses:
        '200':
          description: The password change response
          content:
            application/json:
              schema:
                type: object
                description: Standard error response model for failed requests.
                properties:
                  success:
                    type: boolean
                    description: Indicates if the request was successful.
                    example: false
                  error:
                    type: string
                    description: Error message describing the failure.
                    example: User not found.
                  toast:
                    type: string
                    description: Optional toast message for the client UI.
                    example: Unable to process your request.
                required:
                  - success
                  - error
        '400':
          description: Invalid request
          content:
            application/json:
              schema:
                type: object
                description: Standard error response model for failed requests.
                properties:
                  success:
                    type: boolean
                    description: Indicates if the request was successful.
                    example: false
                  error:
                    type: string
                    description: Error message describing the failure.
                    example: User not found.
                  toast:
                    type: string
                    description: Optional toast message for the client UI.
                    example: Unable to process your request.
                required:
                  - success
                  - error
        default:
          description: Default error response
          content:
            application/json:
              schema:
                type: object
                description: Standard error response model for failed requests.
                properties:
                  success:
                    type: boolean
                    description: Indicates if the request was successful.
                    example: false
                  error:
                    type: string
                    description: Error message describing the failure.
                    example: User not found.
                  toast:
                    type: string
                    description: Optional toast message for the client UI.
                    example: Unable to process your request.
                required:
                  - success
                  - error
  /users/me/logout:
    post:
      description: >-
        Logs out the current user by revoking all refresh tokens. Access tokens
        remain valid until they expire (stateless JWT design). This endpoint
        prevents refresh token abuse after logout.
      summary: Logout current user
      tags:
        - user
      operationId: logoutCurrentUser
      x-google-backend:
        address: https://user-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      security:
        - jwtAuth: []
      responses:
        '200':
          description: User logged out successfully
          content:
            application/json:
              schema:
                type: object
                description: Logout response
                properties:
                  success:
                    type: boolean
                    example: true
                  toast:
                    type: string
                    example: Logged out successfully
                  error:
                    type: string
                required:
                  - success
                  - toast
        '401':
          description: Unauthorized - Authentication required
          content:
            application/json:
              schema:
                type: object
                description: Standard error response model for failed requests.
                properties:
                  success:
                    type: boolean
                    description: Indicates if the request was successful.
                    example: false
                  error:
                    type: string
                    description: Error message describing the failure.
                    example: Authentication required.
                  toast:
                    type: string
                    description: Optional toast message for the client UI.
                    example: Please log in to continue.
                required:
                  - success
                  - error
        default:
          description: Default error response
          content:
            application/json:
              schema:
                type: object
                description: Standard error response model for failed requests.
                properties:
                  success:
                    type: boolean
                    description: Indicates if the request was successful.
                    example: false
                  error:
                    type: string
                    description: Error message describing the failure.
                    example: An unexpected error occurred.
                  toast:
                    type: string
                    description: Optional toast message for the client UI.
                    example: Unable to process your request.
                required:
                  - success
                  - error
  /users/me/phone/confirm:
    post:
      description: Confirms the user's phone number with a verification code.
      summary: Confirm current user's phone number verification
      tags:
        - user
      operationId: confirmCurrentUserPhoneNumberVerification
      x-google-backend:
        address: https://user-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      security:
        - jwtAuth: []
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                otp:
                  type: string
                  description: The verification code sent to the user's phone
                  maxLength: 6
                  pattern: ^[0-9]*$
                contact:
                  type: string
                  description: The phone number to verify
                  maxLength: 20
                  example: '+1234567890'
              required:
                - otp
                - contact
        description: JSON body with the verification code for confirmation
        required: true
      responses:
        '200':
          description: Phone Number Successfully Verified
          content:
            application/json:
              schema:
                type: object
                description: Standard error response model for failed requests.
                properties:
                  success:
                    type: boolean
                    description: Indicates if the request was successful.
                    example: false
                  error:
                    type: string
                    description: Error message describing the failure.
                    example: User not found.
                  toast:
                    type: string
                    description: Optional toast message for the client UI.
                    example: Unable to process your request.
                required:
                  - success
                  - error
        '400':
          description: Invalid request
          content:
            application/json:
              schema:
                type: object
                description: Standard error response model for failed requests.
                properties:
                  success:
                    type: boolean
                    description: Indicates if the request was successful.
                    example: false
                  error:
                    type: string
                    description: Error message describing the failure.
                    example: User not found.
                  toast:
                    type: string
                    description: Optional toast message for the client UI.
                    example: Unable to process your request.
                required:
                  - success
                  - error
        default:
          description: Default error response
          content:
            application/json:
              schema:
                type: object
                description: Standard error response model for failed requests.
                properties:
                  success:
                    type: boolean
                    description: Indicates if the request was successful.
                    example: false
                  error:
                    type: string
                    description: Error message describing the failure.
                    example: User not found.
                  toast:
                    type: string
                    description: Optional toast message for the client UI.
                    example: Unable to process your request.
                required:
                  - success
                  - error
  /users/me/phone/verify:
    post:
      description: Verifies the user's phone number.
      summary: Initiate phone number verification for the current user
      tags:
        - user
      operationId: initiateCurrentUserPhoneNumberVerification
      x-google-backend:
        address: https://user-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      security:
        - jwtAuth: []
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                phone_number:
                  type: string
                  description: The phone number to verify
                  maxLength: 20
                  example: '+1234567890'
              required:
                - phone_number
        description: JSON body with the phone number for verification initiation
        required: true
      responses:
        '200':
          description: Verification Initiated Successfully
          content:
            application/json:
              schema:
                type: object
                description: Response for email/phone verification (initiate/confirm).
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: object
                    properties:
                      verified:
                        type: boolean
                        description: Whether the verification was successful
                        example: true
                      method:
                        type: string
                        description: Verification method (e.g., 'email', 'phone')
                        example: email
                      contact:
                        type: string
                        description: The contact info verified
                        example: user@example.com
                  toast:
                    type: string
                    example: Verification successful.
                  error:
                    type: string
                    example: Verification code is invalid or expired.
                required:
                  - success
                  - data
        '400':
          description: Invalid request
          content:
            application/json:
              schema:
                type: object
                description: Standard error response model for failed requests.
                properties:
                  success:
                    type: boolean
                    description: Indicates if the request was successful.
                    example: false
                  error:
                    type: string
                    description: Error message describing the failure.
                    example: User not found.
                  toast:
                    type: string
                    description: Optional toast message for the client UI.
                    example: Unable to process your request.
                required:
                  - success
                  - error
        default:
          description: Default error response
          content:
            application/json:
              schema:
                type: object
                description: Standard error response model for failed requests.
                properties:
                  success:
                    type: boolean
                    description: Indicates if the request was successful.
                    example: false
                  error:
                    type: string
                    description: Error message describing the failure.
                    example: User not found.
                  toast:
                    type: string
                    description: Optional toast message for the client UI.
                    example: Unable to process your request.
                required:
                  - success
                  - error
  /users/me/phone/add:
    patch:
      description: Adds a new phone number to the user's profile.
      summary: Add a new phone number to the current user
      tags:
        - user
      operationId: addCurrentUserPhone
      x-google-backend:
        address: https://user-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      security:
        - jwtAuth: []
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                phone_number:
                  type: string
                  description: The phone number in E.164 format (e.g., +1234567890)
              required:
                - phone_number
        description: The phone number to add
        required: true
      responses:
        '200':
          description: Phone number added and verification initiated
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  message:
                    type: string
        '400':
          description: Invalid request
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  error:
                    type: string
        '409':
          description: Phone number already in use
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  error:
                    type: string
        default:
          description: Default error response
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  error:
                    type: string
  /users/me/email/add:
    patch:
      description: Adds a new email address to the user's profile.
      summary: Add a new email to the current user
      tags:
        - user
      operationId: addCurrentUserEmail
      x-google-backend:
        address: https://user-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      security:
        - jwtAuth: []
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                email:
                  type: string
                  format: email
              required:
                - email
        description: The email to add
        required: true
      responses:
        '200':
          description: Email added and verification initiated
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  message:
                    type: string
        '400':
          description: Invalid request
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  error:
                    type: string
        '409':
          description: Email already in use
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  error:
                    type: string
        default:
          description: Default error response
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  error:
                    type: string
  /users/me/email/confirm:
    post:
      description: Confirms the user's email address with a verification code.
      summary: Confirm current user's email
      tags:
        - user
      operationId: confirmCurrentUserEmail
      x-google-backend:
        address: https://user-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      security:
        - jwtAuth: []
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                otp:
                  type: string
                  maxLength: 6
                  pattern: ^[0-9]*$
                  description: The email verification code
                contact:
                  type: string
                  format: email
                  description: The email address to verify
              required:
                - otp
                - contact
        description: The email verification code
        required: true
      responses:
        '200':
          description: The email verification response
          content:
            application/json:
              schema:
                type: object
                description: Response for email/phone verification (initiate/confirm).
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: object
                    properties:
                      verified:
                        type: boolean
                        description: Whether the verification was successful
                        example: true
                      method:
                        type: string
                        description: Verification method (e.g., 'email', 'phone')
                        example: email
                      contact:
                        type: string
                        description: The contact info verified
                        example: user@example.com
                  toast:
                    type: string
                    example: Verification successful.
                  error:
                    type: string
                    example: Email confirmation failed.
                required:
                  - success
                  - data
        '400':
          description: Invalid request
          content:
            application/json:
              schema:
                type: object
                description: Standard error response model for failed requests.
                properties:
                  success:
                    type: boolean
                    description: Indicates if the request was successful.
                    example: false
                  error:
                    type: string
                    description: Error message describing the failure.
                    example: User not found.
                  toast:
                    type: string
                    description: Optional toast message for the client UI.
                    example: Unable to process your request.
                required:
                  - success
                  - error
        default:
          description: Default error response
          content:
            application/json:
              schema:
                type: object
                description: Standard error response model for failed requests.
                properties:
                  success:
                    type: boolean
                    description: Indicates if the request was successful.
                    example: false
                  error:
                    type: string
                    description: Error message describing the failure.
                    example: User not found.
                  toast:
                    type: string
                    description: Optional toast message for the client UI.
                    example: Unable to process your request.
                required:
                  - success
                  - error
  /users/me/email/verify:
    post:
      description: Verifies the user's email address.
      summary: Verify current user's email
      tags:
        - user
      operationId: verifyCurrentUserEmail
      x-google-backend:
        address: https://user-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      security:
        - jwtAuth: []
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                email:
                  type: string
                  format: email
              required:
                - email
        description: The email verification request
      responses:
        '200':
          description: The email verification response
          content:
            application/json:
              schema:
                type: object
                description: Response for email/phone verification (initiate/confirm).
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: object
                    properties:
                      verified:
                        type: boolean
                        description: Whether the verification was successful
                        example: true
                      method:
                        type: string
                        description: Verification method (e.g., 'email', 'phone')
                        example: email
                      contact:
                        type: string
                        description: The contact info verified
                        example: user@example.com
                  toast:
                    type: string
                    example: Verification successful.
                  error:
                    type: string
                    example: Verification code is invalid or expired.
                required:
                  - success
                  - data
        '400':
          description: Invalid request
          content:
            application/json:
              schema:
                type: object
                description: Standard error response model for failed requests.
                properties:
                  success:
                    type: boolean
                    description: Indicates if the request was successful.
                    example: false
                  error:
                    type: string
                    description: Error message describing the failure.
                    example: User not found.
                  toast:
                    type: string
                    description: Optional toast message for the client UI.
                    example: Unable to process your request.
                required:
                  - success
                  - error
        default:
          description: Default error response
          content:
            application/json:
              schema:
                type: object
                description: Standard error response model for failed requests.
                properties:
                  success:
                    type: boolean
                    description: Indicates if the request was successful.
                    example: false
                  error:
                    type: string
                    description: Error message describing the failure.
                    example: User not found.
                  toast:
                    type: string
                    description: Optional toast message for the client UI.
                    example: Unable to process your request.
                required:
                  - success
                  - error
  /users/me/identity/verify:
    post:
      description: Verifies the user's identity with provided documents.
      summary: Submit biometric verification request for current user
      tags:
        - user
      operationId: submitCurrentUserBiometricVerificationRequest
      security:
        - jwtAuth: []
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                id:
                  type: string
                  description: The ID of the user
                documents:
                  type: object
                  description: The documents to verify
                  additionalProperties:
                    type: object
                    properties:
                      front:
                        type: string
                        description: URL to the front of the document
                        format: url
                      back:
                        type: string
                        description: URL to the back of the document
                        format: url
                selfies:
                  type: array
                  description: Selfies for verification
                  items:
                    type: object
                    properties:
                      description:
                        type: string
                        description: Description of the selfie
                      urls:
                        type: array
                        description: List of selfie URLs
                        items:
                          type: string
                          format: url
              required:
                - id
                - documents
                - selfies
        description: Biometric Verification Request
        required: true
      responses:
        '200':
          description: The identity verification response
          content:
            application/json:
              schema:
                type: object
                description: Response for biometric/identity verification.
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: object
                    properties:
                      verification_id:
                        type: string
                        description: ID of the verification request
                        example: verif_12345
                      status:
                        type: string
                        description: Status of the identity verification
                        example: pending
                      submitted_at:
                        type: string
                        format: date-time
                        description: Submission timestamp
                        example: 2025-06-16T12:00:00.000Z
                  toast:
                    type: string
                    example: Identity verification submitted.
                  error:
                    type: string
                    example: Identity verification failed.
                required:
                  - success
                  - data
        '400':
          description: Invalid request
          content:
            application/json:
              schema:
                type: object
                description: Standard error response model for failed requests.
                properties:
                  success:
                    type: boolean
                    description: Indicates if the request was successful.
                    example: false
                  error:
                    type: string
                    description: Error message describing the failure.
                    example: User not found.
                  toast:
                    type: string
                    description: Optional toast message for the client UI.
                    example: Unable to process your request.
                required:
                  - success
                  - error
        default:
          description: Default error response
          content:
            application/json:
              schema:
                type: object
                description: Standard error response model for failed requests.
                properties:
                  success:
                    type: boolean
                    description: Indicates if the request was successful.
                    example: false
                  error:
                    type: string
                    description: Error message describing the failure.
                    example: User not found.
                  toast:
                    type: string
                    description: Optional toast message for the client UI.
                    example: Unable to process your request.
                required:
                  - success
                  - error
      x-google-backend: &ref_0
        address: https://booking-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
  /users/me/devices:
    get:
      description: Retrieves all registered devices for the current user.
      summary: Get current user's registered devices
      tags:
        - user
      operationId: getCurrentUserDevices
      x-google-backend:
        address: https://user-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      security:
        - jwtAuth: []
      responses:
        '200':
          description: List of registered devices
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        device_id:
                          type: string
                          description: Unique device identifier
                        fcm_token:
                          type: string
                          description: Firebase Cloud Messaging token
                        platform:
                          type: string
                          description: Device platform (ios, android, web)
                        model:
                          type: string
                          description: Device model
                        app_version:
                          type: string
                          description: App version
                        language:
                          type: string
                          description: Device language
                        timezone:
                          type: string
                          description: Device timezone
                        last_seen:
                          type: string
                          format: date-time
                          description: Last time device was active
                        created_at:
                          type: string
                          format: date-time
                          description: Device registration timestamp
                  toast:
                    type: string
                    example: Devices retrieved successfully
                  error:
                    type: string
                required:
                  - success
                  - data
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  error:
                    type: string
                    example: Authentication required
                required:
                  - success
                  - error
        default:
          description: Default error response
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  error:
                    type: string
                    example: An unexpected error occurred
                required:
                  - success
                  - error
    post:
      description: >-
        Registers a new device or updates an existing device for the current
        user.
      summary: Add or update device for current user
      tags:
        - user
      operationId: addOrUpdateCurrentUserDevice
      x-google-backend:
        address: https://user-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      security:
        - jwtAuth: []
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                device_id:
                  type: string
                  description: Unique device identifier
                fcm_token:
                  type: string
                  description: Firebase Cloud Messaging token
                platform:
                  type: string
                  description: Device platform (ios, android, web)
                model:
                  type: string
                  description: Device model
                app_version:
                  type: string
                  description: App version
                language:
                  type: string
                  description: Device language
                timezone:
                  type: string
                  description: Device timezone
      responses:
        '200':
          description: Device registered or updated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  toast:
                    type: string
                    example: Device registered successfully
                  error:
                    type: string
                required:
                  - success
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  error:
                    type: string
                    example: Authentication required
                required:
                  - success
                  - error
        default:
          description: Default error response
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  error:
                    type: string
                    example: An unexpected error occurred
                required:
                  - success
                  - error
    patch:
      description: Updates an existing device for the current user with partial data.
      summary: Update device for current user
      tags:
        - user
      operationId: updateCurrentUserDevice
      x-google-backend:
        address: https://user-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      security:
        - jwtAuth: []
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required:
                - device_id
              properties:
                device_id:
                  type: string
                  description: Unique device identifier to update
                fcm_token:
                  type: string
                  description: Firebase Cloud Messaging token
                platform:
                  type: string
                  description: Device platform (ios, android, web)
                model:
                  type: string
                  description: Device model
                app_version:
                  type: string
                  description: App version
                language:
                  type: string
                  description: Device language
                timezone:
                  type: string
                  description: Device timezone
        description: Device update data
        required: true
      responses:
        '200':
          description: Device updated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  toast:
                    type: string
                    example: Device updated successfully
                  error:
                    type: string
                required:
                  - success
        '400':
          description: Invalid request
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  error:
                    type: string
                    example: Missing required fields
                required:
                  - success
                  - error
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  error:
                    type: string
                    example: Authentication required
                required:
                  - success
                  - error
        default:
          description: Default error response
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  error:
                    type: string
                    example: An unexpected error occurred
                required:
                  - success
                  - error
  /devices/anonymous/{device_id}/interests:
    post:
      description: >-
        Records a listing interest for an anonymous device (pre-auth
        marketing/remarketing).
      summary: Register anonymous device interest in a listing
      tags:
        - user
      operationId: registerAnonymousDeviceInterest
      x-google-backend:
        address: https://user-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      security: []
      parameters:
        - name: device_id
          in: path
          required: true
          description: Anonymous device identifier returned from /devices/anonymous
          schema:
            type: string
      requestBody:
        description: Anonymous device interest data
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - listing_id
              properties:
                listing_id:
                  type: string
                  description: ID of the listing the device showed interest in
                source:
                  type: string
                  description: >-
                    Optional source of the interest (e.g. 'listing_detail',
                    'book_cta')
                platform:
                  type: string
                  description: Optional platform hint (ios, android, web)
      responses:
        '200':
          description: Anonymous interest registered successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  toast:
                    type: string
                    example: Anonymous interest registered successfully
                  error:
                    type: string
                required:
                  - success
        '400':
          description: Invalid request (missing device_id or listing_id)
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  error:
                    type: string
                    example: Missing required fields
                required:
                  - success
                  - error
        default:
          description: Default error response
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  error:
                    type: string
                    example: An unexpected error occurred
                required:
                  - success
                  - error
  /users/me/devices/{device_id}:
    delete:
      description: Removes a registered device for the current user.
      summary: Remove device for current user
      tags:
        - user
      operationId: removeCurrentUserDevice
      x-google-backend:
        address: https://user-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      security:
        - jwtAuth: []
      parameters:
        - name: device_id
          in: path
          required: true
          description: Device ID to remove
          schema:
            type: string
      responses:
        '204':
          description: Device removed successfully
        '400':
          description: Invalid request
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  error:
                    type: string
                    example: Device ID required
                required:
                  - success
                  - error
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  error:
                    type: string
                    example: Authentication required
                required:
                  - success
                  - error
        '404':
          description: Device not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  error:
                    type: string
                    example: Device not found
                required:
                  - success
                  - error
        default:
          description: Default error response
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  error:
                    type: string
                    example: An unexpected error occurred
                required:
                  - success
                  - error
  /listings/heartbeat:
    get:
      summary: Heartbeat
      description: >-
        Returns a simple heartbeat response to verify the Listing service is
        running.
      tags:
        - listing
      operationId: listingsHeartbeat
      x-google-backend:
        address: https://listing-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      security: []
      responses:
        '200':
          description: Heartbeat
          content:
            application/json:
              schema:
                type: string
        '400':
          description: Bad request
          content:
            application/json:
              schema:
                type: object
                description: Standard error response model for failed requests.
                properties:
                  success:
                    type: boolean
                    description: Indicates if the request was successful.
                    example: false
                  error:
                    type: string
                    description: Error message describing the failure.
                    example: Invalid booking ID.
                  toast:
                    type: string
                    description: Optional toast message for the client UI.
                    example: Unable to process your request.
                required:
                  - success
                  - error
        '401':
          description: Unauthorized (missing or invalid token)
          content:
            application/json:
              schema:
                type: object
                description: Standard error response model for failed requests.
                properties:
                  success:
                    type: boolean
                    description: Indicates if the request was successful.
                    example: false
                  error:
                    type: string
                    description: Error message describing the failure.
                    example: Invalid booking ID.
                  toast:
                    type: string
                    description: Optional toast message for the client UI.
                    example: Unable to process your request.
                required:
                  - success
                  - error
        '404':
          description: Not found
          content:
            application/json:
              schema:
                type: object
                description: Standard error response model for failed requests.
                properties:
                  success:
                    type: boolean
                    description: Indicates if the request was successful.
                    example: false
                  error:
                    type: string
                    description: Error message describing the failure.
                    example: Invalid booking ID.
                  toast:
                    type: string
                    description: Optional toast message for the client UI.
                    example: Unable to process your request.
                required:
                  - success
                  - error
        default:
          description: Default error response
          content:
            application/json:
              schema:
                type: object
                description: Standard error response model for failed requests.
                properties:
                  success:
                    type: boolean
                    description: Indicates if the request was successful.
                    example: false
                  error:
                    type: string
                    description: Error message describing the failure.
                    example: Invalid booking ID.
                  toast:
                    type: string
                    description: Optional toast message for the client UI.
                    example: Unable to process your request.
                required:
                  - success
                  - error
  /listings:
    post:
      description: >-
        Create a new listing with full validation. This endpoint is used for
        publishing final listings and can also be called automatically when a
        draft listing status changes from 'pending' to 'active' after review
        approval.
      summary: Create a new listing (publish)
      tags:
        - listing
      operationId: listingsCreateListing
      x-google-backend:
        address: https://listing-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      security:
        - jwtAuth: []
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                title:
                  type: string
                description:
                  type: string
                price:
                  type: number
                  format: double
                thumbnail:
                  type: string
                  format: uri
                max_guests:
                  type: integer
                  format: int32
                instant_book:
                  type: boolean
                accept_same_day_booking:
                  type: boolean
                  description: >
                    Allows same-day bookings (check-in and check-out on same
                    date, different times).

                    Default: false (opt-in model - hosts must explicitly
                    enable).
                photos:
                  type: array
                  items:
                    type: string
                    format: uri
                    minimum: 3
                  maxItems: 10
                host:
                  type: object
                  properties:
                    id:
                      type: string
                amenities:
                  type: array
                  items:
                    type: string
                  maxLength: 20
                house_rules:
                  type: array
                  items:
                    type: string
                  maxLength: 5
                cancellation_policy:
                  type: string
                  enum:
                    - no_refund
                    - fifty_percent_24h
                    - fifty_percent_48h
                    - full_refund_24h
                  description: >-
                    Cancellation policy code. Default is fifty_percent_24h.
                    Legacy values (No refunds, 50% - 50% refund, 100% - Full
                    Refund) are still accepted for backward compatibility.
                  default: fifty_percent_24h
                address:
                  type: object
                  properties:
                    street:
                      type: string
                    city:
                      type: string
                    country:
                      type: string
                    postal_code:
                      type: string
                    province:
                      type: string
                    unit_number:
                      type: string
                    flag:
                      type: string
                  required:
                    - street
                    - city
                    - country
                    - postal_code
                location:
                  type: object
                  description: >-
                    Optional client-provided location coordinates. If not
                    provided, the backend will geocode the address. If provided
                    and valid, these coordinates take precedence over geocoding.
                  properties:
                    latitude:
                      type: number
                      format: double
                      description: Latitude coordinate (WGS84)
                    longitude:
                      type: number
                      format: double
                      description: Longitude coordinate (WGS84)
                  required:
                    - latitude
                    - longitude
                baggage_drop:
                  type: boolean
                  description: >-
                    Baggage drop allowed by host so guests can drop off their
                    bags first while they explore the city.
                  default: false
                category_code:
                  type: string
                  description: Category code from CategoryMeta registry
                  enum:
                    - couchsurf
                    - workspace
                    - storage
                    - bike_rental
                    - shower
                    - parking
                    - nightlife
                    - meeting_room
                    - kitchen
                    - retail_space
                    - classroom
                    - lounge
                    - studio
                    - playroom
                    - charging_station
                    - ride_share
                    - cleaning
                    - bike_rentals
                  example: couchsurf
              required:
                - title
                - description
                - price
                - thumbnail
                - max_guests
                - instant_book
                - photos
                - host
                - amenities
                - house_rules
                - cancellation_policy
                - address
                - category_code
        description: The listing to create
        required: true
      responses:
        '201':
          description: The created listing
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  toast:
                    type: string
                  data:
                    type: object
                    properties:
                      id:
                        type: string
                      title:
                        type: string
                        maxLength: 64
                      description:
                        type: string
                      verified:
                        type: boolean
                        description: Indicates if the listing has been verified
                      deleted_at:
                        type: string
                        format: date-time
                        nullable: true
                        description: Timestamp when listing was soft deleted
                      status:
                        type: string
                        description: Current status of the listing
                        enum:
                          - draft
                          - pending
                          - active
                          - paused
                          - archived
                          - deleted
                      location:
                        type: object
                        properties:
                          latitude:
                            type: number
                            format: double
                          longitude:
                            type: number
                            format: double
                      price:
                        type: number
                        format: double
                        minimum: 10
                      available:
                        type: boolean
                      thumbnail:
                        type: string
                        format: uri
                      distance:
                        type: number
                        format: double
                      created_at:
                        type: string
                        format: date-time
                      max_guests:
                        type: integer
                        format: int32
                      rating:
                        type: number
                        format: double
                      view_count:
                        type: integer
                        format: int64
                        description: Number of times the listing has been viewed
                      instant_book:
                        type: boolean
                      active:
                        type: boolean
                      amenities:
                        type: array
                        items:
                          type: string
                      cancellation_policy:
                        type: string
                      category:
                        type: object
                      photos:
                        type: array
                        items:
                          type: string
                          format: uri
                      host:
                        type: object
                      house_rules:
                        type: array
                        items:
                          type: string
                      updated_at:
                        type: string
                        format: date-time
                required:
                  - success
                  - data
        '400':
          description: Bad request (invalid listing data)
          content:
            application/json:
              schema:
                type: object
                description: Standard error response model for failed requests.
                properties:
                  success:
                    type: boolean
                    description: Indicates if the request was successful.
                    example: false
                  error:
                    type: string
                    description: Error message describing the failure.
                    example: Invalid booking ID.
                  toast:
                    type: string
                    description: Optional toast message for the client UI.
                    example: Unable to process your request.
                required:
                  - success
                  - error
        '401':
          description: Unauthorized (missing or invalid token)
          content:
            application/json:
              schema:
                type: object
                description: Standard error response model for failed requests.
                properties:
                  success:
                    type: boolean
                    description: Indicates if the request was successful.
                    example: false
                  error:
                    type: string
                    description: Error message describing the failure.
                    example: Invalid booking ID.
                  toast:
                    type: string
                    description: Optional toast message for the client UI.
                    example: Unable to process your request.
                required:
                  - success
                  - error
        '404':
          description: Not found
          content:
            application/json:
              schema:
                type: object
                description: Standard error response model for failed requests.
                properties:
                  success:
                    type: boolean
                    description: Indicates if the request was successful.
                    example: false
                  error:
                    type: string
                    description: Error message describing the failure.
                    example: Invalid booking ID.
                  toast:
                    type: string
                    description: Optional toast message for the client UI.
                    example: Unable to process your request.
                required:
                  - success
                  - error
        default:
          description: Default error response
          content:
            application/json:
              schema:
                type: object
                description: Standard error response model for failed requests.
                properties:
                  success:
                    type: boolean
                    description: Indicates if the request was successful.
                    example: false
                  error:
                    type: string
                    description: Error message describing the failure.
                    example: Invalid booking ID.
                  toast:
                    type: string
                    description: Optional toast message for the client UI.
                    example: Unable to process your request.
                required:
                  - success
                  - error
    get:
      summary: Get all listings
      description: >-
        Returns listings with optional filters. Supports keyword search,
        amenities (CSV up to 10), price range, dates, rating, gender, and
        pagination via limit/offset.
      tags:
        - listing
      operationId: listingsGetAllListings
      security: []
      parameters:
        - name: q
          in: query
          description: Keyword search (title/description)
          required: false
          schema:
            type: string
        - name: latitude
          in: query
          description: Latitude of the user's location
          required: false
          schema:
            type: number
            format: double
        - name: longitude
          in: query
          description: Longitude of the user's location
          required: false
          schema:
            type: number
            format: double
        - name: category
          in: query
          description: >-
            Category code from CategoryMeta registry. If provided, must be a
            valid category code; empty values are rejected with 400.
          required: false
          schema:
            type: string
        - name: country
          in: query
          description: ISO2 country code to filter listings (e.g., CA)
          required: false
          schema:
            type: string
        - name: city
          in: query
          description: City name to filter listings (exact match)
          required: false
          schema:
            type: string
        - name: start_date
          in: query
          description: Start date for availability check (ISO 8601)
          required: false
          schema:
            type: string
            format: date-time
        - name: end_date
          in: query
          description: End date for availability check (ISO 8601)
          required: false
          schema:
            type: string
            format: date-time
        - name: price_min
          in: query
          description: Minimum price filter
          required: false
          schema:
            type: number
            format: double
        - name: price_max
          in: query
          description: Maximum price filter
          required: false
          schema:
            type: number
            format: double
        - name: gender
          in: query
          description: Filter by host gender
          required: false
          schema:
            type: string
        - name: page
          in: query
          description: Page number (starts at 1)
          required: false
          schema:
            type: integer
            minimum: 1
            default: 1
        - name: limit
          in: query
          description: Number of items per page
          required: false
          schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 10
        - name: offset
          in: query
          description: Offset for pagination (alternative to page)
          required: false
          schema:
            type: integer
            minimum: 0
      x-google-backend:
        address: https://listing-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      responses:
        '200':
          description: All listings
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  toast:
                    type: string
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: string
                        title:
                          type: string
                        description:
                          type: string
                        verified:
                          type: boolean
                          description: Indicates if the listing has been verified
                        deleted_at:
                          type: string
                          format: date-time
                          nullable: true
                          description: Timestamp when listing was soft deleted
                        status:
                          type: string
                          description: Current status of the listing
                          enum:
                            - draft
                            - pending
                            - active
                            - paused
                            - archived
                            - deleted
                        location:
                          type: object
                          properties:
                            latitude:
                              type: number
                              format: double
                            longitude:
                              type: number
                              format: double
                        price:
                          type: number
                          format: double
                        available:
                          type: boolean
                        thumbnail:
                          type: string
                          format: uri
                        distance:
                          type: number
                          format: double
                        created_at:
                          type: string
                          format: date-time
                        max_guests:
                          type: integer
                          format: int32
                        rating:
                          type: number
                          format: double
                        view_count:
                          type: integer
                          format: int64
                          description: Number of times the listing has been viewed
                        instant_book:
                          type: boolean
                        active:
                          type: boolean
                        amenities:
                          type: array
                          items:
                            type: string
                        cancellation_policy:
                          type: string
                        category:
                          type: object
                          properties:
                            name:
                              type: string
                            code:
                              type: string
                            description:
                              type: string
                  page:
                    type: object
                    properties:
                      page:
                        type: integer
                        description: Current page number
                      limit:
                        type: integer
                        description: Number of items per page
                      total:
                        type: integer
                        description: Total number of items
                      totalPages:
                        type: integer
                        description: Total number of pages
                    required:
                      - page
                      - limit
                      - total
                      - totalPages
                required:
                  - success
                  - data
                  - page
        '400':
          description: Bad request (invalid parameters)
          content:
            application/json:
              schema:
                type: object
                description: Standard error response model for failed requests.
                properties:
                  success:
                    type: boolean
                    description: Indicates if the request was successful.
                    example: false
                  error:
                    type: string
                    description: Error message describing the failure.
                    example: Invalid booking ID.
                  toast:
                    type: string
                    description: Optional toast message for the client UI.
                    example: Unable to process your request.
                required:
                  - success
                  - error
        '401':
          description: Unauthorized (missing or invalid token)
          content:
            application/json:
              schema:
                type: object
                description: Standard error response model for failed requests.
                properties:
                  success:
                    type: boolean
                    description: Indicates if the request was successful.
                    example: false
                  error:
                    type: string
                    description: Error message describing the failure.
                    example: Invalid booking ID.
                  toast:
                    type: string
                    description: Optional toast message for the client UI.
                    example: Unable to process your request.
                required:
                  - success
                  - error
        '404':
          description: Not found
          content:
            application/json:
              schema:
                type: object
                description: Standard error response model for failed requests.
                properties:
                  success:
                    type: boolean
                    description: Indicates if the request was successful.
                    example: false
                  error:
                    type: string
                    description: Error message describing the failure.
                    example: Invalid booking ID.
                  toast:
                    type: string
                    description: Optional toast message for the client UI.
                    example: Unable to process your request.
                required:
                  - success
                  - error
        default:
          description: Default error response
          content:
            application/json:
              schema:
                type: object
                description: Standard error response model for failed requests.
                properties:
                  success:
                    type: boolean
                    description: Indicates if the request was successful.
                    example: false
                  error:
                    type: string
                    description: Error message describing the failure.
                    example: Invalid booking ID.
                  toast:
                    type: string
                    description: Optional toast message for the client UI.
                    example: Unable to process your request.
                required:
                  - success
                  - error
  /listings/grouped:
    get:
      summary: Get grouped listings (sample for all groups)
      description: >-
        Returns up to 10 listings for each group: trending, new, nearme, hot,
        free.
      tags:
        - listing
      operationId: listingsGetGroupedListings
      security: []
      x-google-backend:
        address: https://listing-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      parameters:
        - name: latitude
          in: query
          required: false
          schema:
            type: number
            format: double
        - name: longitude
          in: query
          required: false
          schema:
            type: number
            format: double
        - name: limit
          in: query
          required: false
          schema:
            type: integer
            default: 10
      responses:
        '200':
          description: Grouped listings sample
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: object
                    properties:
                      trending:
                        type: array
                        items:
                          $ref: '#/components/schemas/Listing'
                      new:
                        type: array
                        items:
                          $ref: '#/components/schemas/Listing'
                      nearme:
                        type: array
                        items:
                          $ref: '#/components/schemas/Listing'
                      hot:
                        type: array
                        items:
                          $ref: '#/components/schemas/Listing'
                      free:
                        type: array
                        items:
                          $ref: '#/components/schemas/Listing'
                      lgbtq_friendly:
                        type: array
                        items:
                          $ref: '#/components/schemas/Listing'
                      top_rated:
                        type: array
                        items:
                          $ref: '#/components/schemas/Listing'
                      instant_book:
                        type: array
                        items:
                          $ref: '#/components/schemas/Listing'
                      summary:
                        type: object
                        properties:
                          TrendingCount:
                            type: integer
                          NewCount:
                            type: integer
                          NearMeCount:
                            type: integer
                          HotCount:
                            type: integer
                          FreeCount:
                            type: integer
                          LgbtqFriendlyCount:
                            type: integer
                          TopRatedCount:
                            type: integer
                          InstantBookCount:
                            type: integer
                          groups:
                            type: array
                            items:
                              type: string
                              description: >-
                                Name of the group (e.g., trending, new, nearme,
                                hot, free, uncategorized)
                            description: >-
                              List of supported group names for individual
                              fetches (e.g., trending, new, nearme, hot, free,
                              uncategorized)
        '400':
          description: Bad request (invalid parameters)
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  error:
                    type: string
  /listings/categories:
    get:
      summary: Get all available categories
      description: >-
        Returns a list of all available listing categories and their metadata
        (code, name, description, verb, icon).
      tags:
        - listing
      operationId: categoriesGetAllCategories
      x-google-backend:
        address: https://listing-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      security:
        - jwtAuth: []
      responses:
        '200':
          description: All available categories
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        code:
                          type: string
                        name:
                          type: string
                        description:
                          type: string
                        verb:
                          type: string
                        icon:
                          type: string
                  meta:
                    type: object
                required:
                  - success
                  - data
        '400':
          description: Bad request
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  error:
                    type: string
                required:
                  - success
                  - error
  /listings/address:
    get:
      summary: Address auto complete
      description: >
        Returns a list of address suggestions based on the user's query and
        location. Useful for implementing address autocomplete features in the
        UI.
      tags:
        - listing
      operationId: listingsAddressAutoComplete
      security:
        - jwtAuth: []
      parameters:
        - name: q
          in: query
          description: Address to search for (partial or full address string)
          required: true
          schema:
            type: string
        - name: lat
          in: query
          description: Latitude of the user's location (for proximity ranking)
          required: true
          schema:
            type: number
            format: double
        - name: lon
          in: query
          description: Longitude of the user's location (for proximity ranking)
          required: true
          schema:
            type: number
            format: double
      x-google-backend:
        address: https://listing-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      responses:
        '200':
          description: Address suggestions
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        address:
                          type: object
                          properties:
                            street:
                              type: string
                            city:
                              type: string
                            country:
                              type: string
                            postal_code:
                              type: string
                            province:
                              type: string
                            unit_number:
                              type: string
                            flag:
                              type: string
                          required:
                            - street
                            - city
                            - country
                            - postal_code
                        description:
                          type: string
                        place_id:
                          type: string
                      required:
                        - address
                        - description
                        - place_id
                  meta:
                    type: object
                    properties:
                      total:
                        type: integer
                        description: Total number of suggestions
                    required:
                      - total
                required:
                  - success
                  - data
                  - meta
        '400':
          description: Bad request (invalid query)
          content:
            application/json:
              schema:
                type: object
                description: Standard error response model for failed requests.
                properties:
                  success:
                    type: boolean
                    description: Indicates if the request was successful.
                    example: false
                  error:
                    type: string
                    description: Error message describing the failure.
                    example: Invalid booking ID.
                  toast:
                    type: string
                    description: Optional toast message for the client UI.
                    example: Unable to process your request.
                required:
                  - success
                  - error
        '401':
          description: Unauthorized (missing or invalid token)
          content:
            application/json:
              schema:
                type: object
                description: Standard error response model for failed requests.
                properties:
                  success:
                    type: boolean
                    description: Indicates if the request was successful.
                    example: false
                  error:
                    type: string
                    description: Error message describing the failure.
                    example: Invalid booking ID.
                  toast:
                    type: string
                    description: Optional toast message for the client UI.
                    example: Unable to process your request.
                required:
                  - success
                  - error
        '404':
          description: Not found
          content:
            application/json:
              schema:
                type: object
                description: Standard error response model for failed requests.
                properties:
                  success:
                    type: boolean
                    description: Indicates if the request was successful.
                    example: false
                  error:
                    type: string
                    description: Error message describing the failure.
                    example: Invalid booking ID.
                  toast:
                    type: string
                    description: Optional toast message for the client UI.
                    example: Unable to process your request.
                required:
                  - success
                  - error
        default:
          description: Default error response
          content:
            application/json:
              schema:
                type: object
                description: Standard error response model for failed requests.
                properties:
                  success:
                    type: boolean
                    description: Indicates if the request was successful.
                    example: false
                  error:
                    type: string
                    description: Error message describing the failure.
                    example: Invalid booking ID.
                  toast:
                    type: string
                    description: Optional toast message for the client UI.
                    example: Unable to process your request.
                required:
                  - success
                  - error
  /listings/drafts:
    post:
      summary: Save listing draft
      description: >-
        Save a listing draft with minimal validation. Allows users to save
        incomplete listing data that can be completed later. The status will be
        automatically set to 'draft'.
      tags:
        - listing
      operationId: listingsCreateDraft
      x-google-backend:
        address: https://listing-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      security:
        - jwtAuth: []
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                title:
                  type: string
                  description: Title of the listing (required for drafts)
                  maxLength: 64
                description:
                  type: string
                  description: Description of the listing
                price:
                  type: number
                  format: double
                  minimum: 0
                  description: Price per hour/day
                thumbnail:
                  type: string
                  format: uri
                  description: Main thumbnail image URL
                max_guests:
                  type: integer
                  format: int32
                  minimum: 1
                  description: Maximum number of guests
                instant_book:
                  type: boolean
                  description: Whether instant booking is enabled
                photos:
                  type: array
                  items:
                    type: string
                    format: uri
                  maxItems: 10
                  description: Array of photo URLs (minimum 3 required for publishing)
                host:
                  type: object
                  properties:
                    id:
                      type: string
                  description: Host information
                amenities:
                  type: array
                  items:
                    type: string
                  maxLength: 20
                  description: List of available amenities
                house_rules:
                  type: array
                  items:
                    type: string
                  maxLength: 5
                  description: House rules for guests
                cancellation_policy:
                  type: string
                  enum:
                    - no_refund
                    - fifty_percent_24h
                    - fifty_percent_48h
                    - full_refund_24h
                  description: >-
                    Cancellation policy code. Default is fifty_percent_24h.
                    Legacy values (No refunds, 50% - 50% refund, 100% - Full
                    Refund) are still accepted for backward compatibility.
                  default: fifty_percent_24h
                address:
                  type: object
                  properties:
                    street:
                      type: string
                    city:
                      type: string
                    country:
                      type: string
                    postal_code:
                      type: string
                    province:
                      type: string
                    unit_number:
                      type: string
                    flag:
                      type: string
                  description: Address information (partial acceptable for drafts)
                baggage_drop:
                  type: boolean
                  description: >-
                    Baggage drop allowed by host so guests can drop off their
                    bags first while they explore the city.
                  default: false
                category_code:
                  type: string
                  enum:
                    - couch_surfing
                    - co_working
                    - storages
                    - meeting_room
                    - kitchen
                    - retail_space
                    - classroom
                    - lounge
                    - shower
                    - studio
                    - playroom
                    - charging_station
                    - relax
                    - nightlife
                    - ride_share
                    - cleaning
                    - bike_rentals
                  description: Category of the listing
              required:
                - title
              additionalProperties: false
        description: >-
          The listing draft data. Only title is required, all other fields are
          optional for drafts.
        required: true
      responses:
        '201':
          description: Draft saved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  toast:
                    type: string
                    example: Draft saved successfully
                  data:
                    type: object
                    properties:
                      id:
                        type: string
                        description: Unique identifier for the listing
                      title:
                        type: string
                        maxLength: 64
                      description:
                        type: string
                      verified:
                        type: boolean
                        description: Indicates if the listing has been verified
                        default: false
                      deleted_at:
                        type: string
                        format: date-time
                        nullable: true
                        description: Timestamp when listing was soft deleted
                      status:
                        type: string
                        description: >-
                          Current status of the listing (will always be 'draft'
                          for this endpoint)
                        enum:
                          - draft
                        default: draft
                      location:
                        type: object
                        properties:
                          latitude:
                            type: number
                            format: double
                          longitude:
                            type: number
                            format: double
                        nullable: true
                      price:
                        type: number
                        format: double
                        minimum: 0
                        nullable: true
                      available:
                        type: boolean
                        default: true
                      thumbnail:
                        type: string
                        format: uri
                        nullable: true
                      distance:
                        type: number
                        format: double
                        nullable: true
                      created_at:
                        type: string
                        format: date-time
                      max_guests:
                        type: integer
                        format: int32
                        nullable: true
                      rating:
                        type: number
                        format: double
                        default: 0
                      instant_book:
                        type: boolean
                        nullable: true
                      active:
                        type: boolean
                        default: false
                      amenities:
                        type: array
                        items:
                          type: string
                        default: []
                      cancellation_policy:
                        type: string
                        nullable: true
                      category:
                        type: object
                        nullable: true
                      photos:
                        type: array
                        items:
                          type: string
                          format: uri
                        default: []
                      host:
                        type: object
                        nullable: true
                      house_rules:
                        type: array
                        items:
                          type: string
                        default: []
                      updated_at:
                        type: string
                        format: date-time
                    required:
                      - id
                      - title
                      - status
                      - created_at
                      - updated_at
                required:
                  - success
                  - data
        '400':
          description: Bad request (invalid draft data)
          content:
            application/json:
              schema:
                type: object
                description: Standard error response model for failed requests.
                properties:
                  success:
                    type: boolean
                    description: Indicates if the request was successful.
                    example: false
                  error:
                    type: string
                    description: Error message describing the failure.
                    example: Title is required for draft listings.
                  toast:
                    type: string
                    description: Optional toast message for the client UI.
                    example: Please provide a title for your listing.
                required:
                  - success
                  - error
        '401':
          description: Unauthorized (missing or invalid token)
          content:
            application/json:
              schema:
                type: object
                description: Standard error response model for failed requests.
                properties:
                  success:
                    type: boolean
                    description: Indicates if the request was successful.
                    example: false
                  error:
                    type: string
                    description: Error message describing the failure.
                    example: Invalid or missing authentication token.
                  toast:
                    type: string
                    description: Optional toast message for the client UI.
                    example: Please log in to continue.
                required:
                  - success
                  - error
        '422':
          description: Validation error
          content:
            application/json:
              schema:
                type: object
                description: Standard error response model for failed requests.
                properties:
                  success:
                    type: boolean
                    description: Indicates if the request was successful.
                    example: false
                  error:
                    type: string
                    description: Error message describing the failure.
                    example: >-
                      Validation failed: title must be at least 1 character
                      long.
                  toast:
                    type: string
                    description: Optional toast message for the client UI.
                    example: Please check your input and try again.
                required:
                  - success
                  - error
        default:
          description: Default error response
          content:
            application/json:
              schema:
                type: object
                description: Standard error response model for failed requests.
                properties:
                  success:
                    type: boolean
                    description: Indicates if the request was successful.
                    example: false
                  error:
                    type: string
                    description: Error message describing the failure.
                    example: An unexpected error occurred.
                  toast:
                    type: string
                    description: Optional toast message for the client UI.
                    example: Something went wrong. Please try again.
                required:
                  - success
                  - error
    put:
      summary: Update listing draft
      description: >-
        Update an existing draft listing. Only drafts can be updated through
        this endpoint. To publish a draft, use the main POST /listings endpoint.
      tags:
        - listing
      operationId: listingsUpdateDraft
      x-google-backend:
        address: https://listing-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      security:
        - jwtAuth: []
      parameters:
        - name: id
          in: query
          description: Draft listing ID to update
          required: true
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                title:
                  type: string
                  description: Title of the listing
                  maxLength: 64
                description:
                  type: string
                  description: Description of the listing
                price:
                  type: number
                  format: double
                  minimum: 0
                  description: Price per hour/day
                thumbnail:
                  type: string
                  format: uri
                  description: Main thumbnail image URL
                max_guests:
                  type: integer
                  format: int32
                  minimum: 1
                  description: Maximum number of guests
                instant_book:
                  type: boolean
                  description: Whether instant booking is enabled
                photos:
                  type: array
                  items:
                    type: string
                    format: uri
                  maxItems: 10
                  description: Array of photo URLs
                host:
                  type: object
                  properties:
                    id:
                      type: string
                  description: Host information
                amenities:
                  type: array
                  items:
                    type: string
                  maxLength: 20
                  description: List of available amenities
                house_rules:
                  type: array
                  items:
                    type: string
                  maxLength: 5
                  description: House rules for guests
                cancellation_policy:
                  type: string
                  enum:
                    - no_refund
                    - fifty_percent_24h
                    - fifty_percent_48h
                    - full_refund_24h
                  description: >-
                    Cancellation policy code. Default is fifty_percent_24h.
                    Legacy values (No refunds, 50% - 50% refund, 100% - Full
                    Refund) are still accepted for backward compatibility.
                  default: fifty_percent_24h
                address:
                  type: object
                  properties:
                    street:
                      type: string
                    city:
                      type: string
                    country:
                      type: string
                    postal_code:
                      type: string
                    province:
                      type: string
                    unit_number:
                      type: string
                    flag:
                      type: string
                  description: Address information
                baggage_drop:
                  type: boolean
                  description: >-
                    Baggage drop allowed by host so guests can drop off their
                    bags first while they explore the city.
                  default: false
                category_code:
                  type: string
                  enum:
                    - couch_surfing
                    - co_working
                    - storages
                    - meeting_room
                    - kitchen
                    - retail_space
                    - classroom
                    - lounge
                    - shower
                    - studio
                    - playroom
                    - charging_station
                    - relax
                    - nightlife
                    - ride_share
                    - cleaning
                    - bike_rentals
                  description: Category of the listing
              additionalProperties: false
        description: The updated listing draft data. All fields are optional.
        required: true
      responses:
        '200':
          description: Draft updated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  toast:
                    type: string
                    example: Draft updated successfully
                  data:
                    type: object
                    properties:
                      id:
                        type: string
                      title:
                        type: string
                        maxLength: 64
                      description:
                        type: string
                      verified:
                        type: boolean
                        description: Indicates if the listing has been verified
                      deleted_at:
                        type: string
                        format: date-time
                        nullable: true
                        description: Timestamp when listing was soft deleted
                      status:
                        type: string
                        description: Current status of the listing
                        enum:
                          - draft
                      location:
                        type: object
                        properties:
                          latitude:
                            type: number
                            format: double
                          longitude:
                            type: number
                            format: double
                        nullable: true
                      price:
                        type: number
                        format: double
                        minimum: 0
                        nullable: true
                      available:
                        type: boolean
                      thumbnail:
                        type: string
                        format: uri
                        nullable: true
                      distance:
                        type: number
                        format: double
                        nullable: true
                      created_at:
                        type: string
                        format: date-time
                      max_guests:
                        type: integer
                        format: int32
                        nullable: true
                      rating:
                        type: number
                        format: double
                      instant_book:
                        type: boolean
                        nullable: true
                      active:
                        type: boolean
                      amenities:
                        type: array
                        items:
                          type: string
                      cancellation_policy:
                        type: string
                        nullable: true
                      category:
                        type: object
                        nullable: true
                      photos:
                        type: array
                        items:
                          type: string
                          format: uri
                      host:
                        type: object
                        nullable: true
                      house_rules:
                        type: array
                        items:
                          type: string
                      updated_at:
                        type: string
                        format: date-time
                    required:
                      - id
                      - status
                      - created_at
                      - updated_at
                required:
                  - success
                  - data
        '400':
          description: Bad request (invalid data or listing is not a draft)
          content:
            application/json:
              schema:
                type: object
                description: Standard error response model for failed requests.
                properties:
                  success:
                    type: boolean
                    description: Indicates if the request was successful.
                    example: false
                  error:
                    type: string
                    description: Error message describing the failure.
                    example: 'Cannot update listing: not a draft or invalid data.'
                  toast:
                    type: string
                    description: Optional toast message for the client UI.
                    example: Only draft listings can be updated through this endpoint.
                required:
                  - success
                  - error
        '401':
          description: Unauthorized (missing or invalid token)
          content:
            application/json:
              schema:
                type: object
                description: Standard error response model for failed requests.
                properties:
                  success:
                    type: boolean
                    description: Indicates if the request was successful.
                    example: false
                  error:
                    type: string
                    description: Error message describing the failure.
                    example: Invalid or missing authentication token.
                  toast:
                    type: string
                    description: Optional toast message for the client UI.
                    example: Please log in to continue.
                required:
                  - success
                  - error
        '404':
          description: Draft listing not found or user doesn't have access
          content:
            application/json:
              schema:
                type: object
                description: Standard error response model for failed requests.
                properties:
                  success:
                    type: boolean
                    description: Indicates if the request was successful.
                    example: false
                  error:
                    type: string
                    description: Error message describing the failure.
                    example: Draft listing not found or access denied.
                  toast:
                    type: string
                    description: Optional toast message for the client UI.
                    example: Draft listing not found.
                required:
                  - success
                  - error
        default:
          description: Default error response
          content:
            application/json:
              schema:
                type: object
                description: Standard error response model for failed requests.
                properties:
                  success:
                    type: boolean
                    description: Indicates if the request was successful.
                    example: false
                  error:
                    type: string
                    description: Error message describing the failure.
                    example: An unexpected error occurred.
                  toast:
                    type: string
                    description: Optional toast message for the client UI.
                    example: Something went wrong. Please try again.
                required:
                  - success
                  - error
  /listings/{id}:
    get:
      summary: Get a listing
      description: Returns the details of a single listing by its ID.
      tags:
        - listing
      operationId: listingsGetListing
      x-google-backend:
        address: https://listing-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      security:
        - jwtAuth: []
      parameters:
        - name: id
          in: path
          description: Listing ID
          required: true
          schema:
            type: string
      responses:
        '200':
          description: The listing
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  toast:
                    type: string
                  data:
                    type: object
                    properties:
                      id:
                        type: string
                      title:
                        type: string
                        maxLength: 64
                      description:
                        type: string
                      location:
                        type: object
                        properties:
                          latitude:
                            type: number
                            format: double
                          longitude:
                            type: number
                            format: double
                      price:
                        type: number
                        format: double
                        minimum: 10
                      available:
                        type: boolean
                      thumbnail:
                        type: string
                        format: uri
                      distance:
                        type: number
                        format: double
                      created_at:
                        type: string
                        format: date-time
                      max_guests:
                        type: integer
                        format: int32
                      rating:
                        type: number
                        format: double
                      view_count:
                        type: integer
                        format: int64
                        description: Number of times the listing has been viewed
                      instant_book:
                        type: boolean
                      active:
                        type: boolean
                      amenities:
                        type: array
                        items:
                          type: string
                      cancellation_policy:
                        type: string
                      category:
                        type: object
                      photos:
                        type: array
                        items:
                          type: string
                          format: uri
                      host:
                        type: object
                      reviews_total:
                        type: integer
                        description: >-
                          Combined total of listing and host (user) reviews
                          returned by the listing endpoint.
                        example: 6
                      house_rules:
                        type: array
                        items:
                          type: string
                      updated_at:
                        type: string
                        format: date-time
                required:
                  - success
                  - data
        '400':
          description: Bad request (invalid ID)
          content:
            application/json:
              schema:
                type: object
                description: Standard error response model for failed requests.
                properties:
                  success:
                    type: boolean
                    description: Indicates if the request was successful.
                    example: false
                  error:
                    type: string
                    description: Error message describing the failure.
                    example: Invalid booking ID.
                  toast:
                    type: string
                    description: Optional toast message for the client UI.
                    example: Unable to process your request.
                required:
                  - success
                  - error
        '401':
          description: Unauthorized (missing or invalid token)
          content:
            application/json:
              schema:
                type: object
                description: Standard error response model for failed requests.
                properties:
                  success:
                    type: boolean
                    description: Indicates if the request was successful.
                    example: false
                  error:
                    type: string
                    description: Error message describing the failure.
                    example: Invalid booking ID.
                  toast:
                    type: string
                    description: Optional toast message for the client UI.
                    example: Unable to process your request.
                required:
                  - success
                  - error
        '404':
          description: Listing not found
          content:
            application/json:
              schema:
                type: object
                description: Standard error response model for failed requests.
                properties:
                  success:
                    type: boolean
                    description: Indicates if the request was successful.
                    example: false
                  error:
                    type: string
                    description: Error message describing the failure.
                    example: Invalid booking ID.
                  toast:
                    type: string
                    description: Optional toast message for the client UI.
                    example: Unable to process your request.
                required:
                  - success
                  - error
        default:
          description: Default error response
          content:
            application/json:
              schema:
                type: object
                description: Standard error response model for failed requests.
                properties:
                  success:
                    type: boolean
                    description: Indicates if the request was successful.
                    example: false
                  error:
                    type: string
                    description: Error message describing the failure.
                    example: Invalid booking ID.
                  toast:
                    type: string
                    description: Optional toast message for the client UI.
                    example: Unable to process your request.
                required:
                  - success
                  - error
    put:
      summary: Update a listing
      description: >
        Updates the details of an existing listing by its ID. Supports
        partial/incremental updates.

        Only the listing host can update their listing. All fields are optional
        - only include the fields you want to update.

        When updating the address, the system will automatically geocode the new
        address and update coordinates.
      tags:
        - listing
      operationId: listingsUpdateListing
      x-google-backend:
        address: https://listing-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      security:
        - jwtAuth: []
      parameters:
        - name: id
          in: path
          description: Listing ID
          required: true
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              type: object
              description: >-
                Partial update request. All fields are optional. Only include
                fields you want to update.
              properties:
                title:
                  type: string
                  minLength: 10
                  maxLength: 100
                  description: Listing title
                description:
                  type: string
                  minLength: 10
                  maxLength: 255
                  description: Listing description
                price:
                  type: number
                  format: double
                  minimum: 0
                  maximum: 200
                  description: Price per night
                thumbnail:
                  type: string
                  format: uri
                  description: Thumbnail image URL
                max_guests:
                  type: integer
                  format: int32
                  minimum: 1
                  maximum: 3
                  description: Maximum number of guests
                instant_book:
                  type: boolean
                  description: Whether instant booking is enabled
                photos:
                  type: array
                  items:
                    type: string
                    format: uri
                  maxItems: 10
                  minItems: 1
                  description: Array of photo URLs
                amenities:
                  type: array
                  items:
                    type: string
                  description: List of amenities
                house_rules:
                  type: array
                  items:
                    type: string
                  description: List of house rules
                cancellation_policy:
                  type: string
                  enum:
                    - no_refund
                    - fifty_percent_24h
                    - fifty_percent_48h
                    - full_refund_24h
                  description: >-
                    Cancellation policy code. Legacy values (No refunds, 50% -
                    50% refund, 100% - Full Refund) are still accepted for
                    backward compatibility.
                address:
                  type: object
                  description: >-
                    Address object. When provided, the system will geocode the
                    address and update coordinates automatically.
                  properties:
                    street:
                      type: string
                    city:
                      type: string
                    country:
                      type: string
                    postal_code:
                      type: string
                    province:
                      type: string
                    unit_number:
                      type: string
                    flag:
                      type: string
                baggage_drop:
                  type: boolean
                  description: >-
                    Baggage drop allowed by host so guests can drop off their
                    bags first while they explore the city.
                category_code:
                  type: string
                  description: Category code (e.g., couchsurf, workspace, storage)
                check_in_instructions:
                  type: string
                  maxLength: 1000
                  description: Check-in instructions for guests
                check_out_instructions:
                  type: string
                  maxLength: 500
                  description: Check-out instructions for guests
                wifi_details:
                  type: object
                  description: WiFi network details
                  properties:
                    network_name:
                      type: string
                      maxLength: 100
                    password:
                      type: string
                      maxLength: 100
                    notes:
                      type: string
                      maxLength: 200
                emergency_contact:
                  type: string
                  maxLength: 200
                  description: Emergency contact information
                local_recommendations:
                  type: string
                  maxLength: 1000
                  description: Local recommendations for guests
                min_stay_days:
                  type: integer
                  format: int32
                  minimum: 1
                  maximum: 30
                  description: Minimum stay duration in days
                max_stay_days:
                  type: integer
                  format: int32
                  minimum: 1
                  maximum: 365
                  description: Maximum stay duration in days
                timezone:
                  type: string
                  description: Timezone (e.g., America/Toronto)
        description: >-
          Partial update request. All fields are optional. Only include fields
          you want to update.
        required: true
      responses:
        '200':
          description: Listing updated
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  toast:
                    type: string
                  data:
                    type: object
                    properties:
                      id:
                        type: string
                      title:
                        type: string
                        maxLength: 64
                      description:
                        type: string
                      location:
                        type: object
                        properties:
                          latitude:
                            type: number
                            format: double
                          longitude:
                            type: number
                            format: double
                      price:
                        type: number
                        format: double
                        minimum: 10
                      available:
                        type: boolean
                      thumbnail:
                        type: string
                        format: uri
                      distance:
                        type: number
                        format: double
                      created_at:
                        type: string
                        format: date-time
                      max_guests:
                        type: integer
                        format: int32
                      rating:
                        type: number
                        format: double
                      instant_book:
                        type: boolean
                      active:
                        type: boolean
                      amenities:
                        type: array
                        items:
                          type: string
                      cancellation_policy:
                        type: string
                      category:
                        type: object
                      photos:
                        type: array
                        items:
                          type: string
                          format: uri
                      host:
                        type: object
                      house_rules:
                        type: array
                        items:
                          type: string
                      updated_at:
                        type: string
                        format: date-time
                required:
                  - success
                  - data
        '400':
          description: >-
            Bad request - Invalid request data, validation error, or no fields
            provided for update
          content:
            application/json:
              schema:
                type: object
                description: Standard error response model for failed requests.
                properties:
                  success:
                    type: boolean
                    description: Indicates if the request was successful.
                    example: false
                  error:
                    type: string
                    description: Error message describing the failure.
                    example: Invalid request data or no fields provided for update
                  toast:
                    type: string
                    description: Optional toast message for the client UI.
                    example: Unable to process your request.
                required:
                  - success
                  - error
        '401':
          description: Unauthorized - Missing or invalid authentication token
          content:
            application/json:
              schema:
                type: object
                description: Standard error response model for failed requests.
                properties:
                  success:
                    type: boolean
                    description: Indicates if the request was successful.
                    example: false
                  error:
                    type: string
                    description: Error message describing the failure.
                    example: Unauthorized
                  toast:
                    type: string
                    description: Optional toast message for the client UI.
                    example: Authentication required
                required:
                  - success
                  - error
        '403':
          description: >-
            Forbidden - User is not authorized to update this listing (only
            listing host can update)
          content:
            application/json:
              schema:
                type: object
                description: Standard error response model for failed requests.
                properties:
                  success:
                    type: boolean
                    description: Indicates if the request was successful.
                    example: false
                  error:
                    type: string
                    description: Error message describing the failure.
                    example: Only listing host can update
                  toast:
                    type: string
                    description: Optional toast message for the client UI.
                    example: You don't have permission to update this listing
                required:
                  - success
                  - error
        '404':
          description: Not found - Listing not found
          content:
            application/json:
              schema:
                type: object
                description: Standard error response model for failed requests.
                properties:
                  success:
                    type: boolean
                    description: Indicates if the request was successful.
                    example: false
                  error:
                    type: string
                    description: Error message describing the failure.
                    example: Listing not found
                  toast:
                    type: string
                    description: Optional toast message for the client UI.
                    example: The listing you're looking for doesn't exist
                required:
                  - success
                  - error
        '500':
          description: Internal server error - Failed to update listing
          content:
            application/json:
              schema:
                type: object
                description: Standard error response model for failed requests.
                properties:
                  success:
                    type: boolean
                    description: Indicates if the request was successful.
                    example: false
                  error:
                    type: string
                    description: Error message describing the failure.
                    example: Failed to update listing
                  toast:
                    type: string
                    description: Optional toast message for the client UI.
                    example: Unable to process your request
                required:
                  - success
                  - error
    delete:
      summary: Delete a listing
      description: Deletes a listing by its ID.
      tags:
        - listing
      operationId: listingsDeleteListing
      x-google-backend:
        address: https://listing-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      security:
        - jwtAuth: []
      parameters:
        - name: id
          in: path
          description: Listing ID
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Listing deleted
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  toast:
                    type: string
                  id:
                    type: string
                    description: The ID of the deleted listing
                required:
                  - success
                  - id
        '400':
          description: Bad request (invalid ID)
          content:
            application/json:
              schema:
                type: object
                description: Standard error response model for failed requests.
                properties:
                  success:
                    type: boolean
                    description: Indicates if the request was successful.
                    example: false
                  error:
                    type: string
                    description: Error message describing the failure.
                    example: Invalid booking ID.
                  toast:
                    type: string
                    description: Optional toast message for the client UI.
                    example: Unable to process your request.
                required:
                  - success
                  - error
        '401':
          description: Unauthorized (missing or invalid token)
          content:
            application/json:
              schema:
                type: object
                description: Standard error response model for failed requests.
                properties:
                  success:
                    type: boolean
                    description: Indicates if the request was successful.
                    example: false
                  error:
                    type: string
                    description: Error message describing the failure.
                    example: Invalid booking ID.
                  toast:
                    type: string
                    description: Optional toast message for the client UI.
                    example: Unable to process your request.
                required:
                  - success
                  - error
        '404':
          description: Listing not found
          content:
            application/json:
              schema:
                type: object
                description: Standard error response model for failed requests.
                properties:
                  success:
                    type: boolean
                    description: Indicates if the request was successful.
                    example: false
                  error:
                    type: string
                    description: Error message describing the failure.
                    example: Invalid booking ID.
                  toast:
                    type: string
                    description: Optional toast message for the client UI.
                    example: Unable to process your request.
                required:
                  - success
                  - error
        default:
          description: Default error response
          content:
            application/json:
              schema:
                type: object
                description: Standard error response model for failed requests.
                properties:
                  success:
                    type: boolean
                    description: Indicates if the request was successful.
                    example: false
                  error:
                    type: string
                    description: Error message describing the failure.
                    example: Invalid booking ID.
                  toast:
                    type: string
                    description: Optional toast message for the client UI.
                    example: Unable to process your request.
                required:
                  - success
                  - error
  /listings/{id}/weather/forecast:
    get:
      summary: Get weather forecast for a listing
      description: >-
        Returns the current weather and forecast for the specified listing
        location.
      tags:
        - listing
      operationId: listingsGetListingWeather
      x-google-backend:
        address: https://listing-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      security:
        - jwtAuth: []
      parameters:
        - name: id
          in: path
          description: Listing ID
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Return the listing weather
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  toast:
                    type: string
                  data:
                    type: object
                    properties:
                      id:
                        type: string
                        example: listing_123
                      latitude:
                        type: number
                        format: float
                        example: 40.7128
                      longitude:
                        type: number
                        format: float
                        example: -74.006
                      timezone:
                        type: string
                        example: Toronto/Ontario
                      current:
                        type: object
                        properties:
                          date:
                            type: integer
                            format: int64
                            example: 1721253600
                          humidity:
                            type: integer
                            example: 65
                            description: Percentage (%)
                          wind_speed:
                            type: number
                            format: float
                            example: 13
                            description: km/h
                          feels_like:
                            type: number
                            format: float
                            example: 299.15
                            description: Celsius
                          temp:
                            type: number
                            format: float
                            example: 297.15
                            description: Celsius
                          visibility:
                            type: integer
                            example: 10000
                            description: Meters
                          air_quality:
                            type: integer
                            example: 36
                      weather-forecast:
                        type: array
                        items:
                          type: object
                          properties:
                            date:
                              type: integer
                              format: int64
                              example: 1750128000
                            temp:
                              type: number
                              format: float
                              example: 297.15
                required:
                  - success
                  - data
        '400':
          description: Bad request (invalid ID)
          content:
            application/json:
              schema:
                type: object
                description: Standard error response model for failed requests.
                properties:
                  success:
                    type: boolean
                    description: Indicates if the request was successful.
                    example: false
                  error:
                    type: string
                    description: Error message describing the failure.
                    example: Invalid booking ID.
                  toast:
                    type: string
                    description: Optional toast message for the client UI.
                    example: Unable to process your request.
                required:
                  - success
                  - error
        '401':
          description: Unauthorized (missing or invalid token)
          content:
            application/json:
              schema:
                type: object
                description: Standard error response model for failed requests.
                properties:
                  success:
                    type: boolean
                    description: Indicates if the request was successful.
                    example: false
                  error:
                    type: string
                    description: Error message describing the failure.
                    example: Invalid booking ID.
                  toast:
                    type: string
                    description: Optional toast message for the client UI.
                    example: Unable to process your request.
                required:
                  - success
                  - error
        '404':
          description: Listing not found
          content:
            application/json:
              schema:
                type: object
                description: Standard error response model for failed requests.
                properties:
                  success:
                    type: boolean
                    description: Indicates if the request was successful.
                    example: false
                  error:
                    type: string
                    description: Error message describing the failure.
                    example: Invalid booking ID.
                  toast:
                    type: string
                    description: Optional toast message for the client UI.
                    example: Unable to process your request.
                required:
                  - success
                  - error
        default:
          description: Default error response
          content:
            application/json:
              schema:
                type: object
                description: Standard error response model for failed requests.
                properties:
                  success:
                    type: boolean
                    description: Indicates if the request was successful.
                    example: false
                  error:
                    type: string
                    description: Error message describing the failure.
                    example: Invalid booking ID.
                  toast:
                    type: string
                    description: Optional toast message for the client UI.
                    example: Unable to process your request.
                required:
                  - success
                  - error
  /listings/user:
    get:
      summary: Get all listings for the authenticated user ("my listings")
      description: >-
        Returns all listings belonging to the currently authenticated user. User
        ID is extracted from the JWT token. Use this endpoint for "my listings"
        in the UI.
      tags:
        - listing
      operationId: listingsGetAllListingsForCurrentUser
      x-google-backend:
        address: https://listing-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      security:
        - jwtAuth: []
      parameters:
        - name: page
          in: query
          description: Page number (starts at 1)
          required: false
          schema:
            type: integer
            minimum: 1
            default: 1
        - name: limit
          in: query
          description: Number of items per page
          required: false
          schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 10
        - name: status
          in: query
          description: Filter listings by status. If not provided, returns all statuses.
          required: false
          schema:
            type: string
            enum:
              - draft
              - pending
              - active
              - paused
              - archived
              - deleted
      responses:
        '200':
          description: All listings for the authenticated user
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  toast:
                    type: string
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: string
                        title:
                          type: string
                        description:
                          type: string
                        verified:
                          type: boolean
                          description: Indicates if the listing has been verified
                        deleted_at:
                          type: string
                          format: date-time
                          nullable: true
                          description: Timestamp when listing was soft deleted
                        status:
                          type: string
                          description: Current status of the listing
                          enum:
                            - draft
                            - pending
                            - active
                            - paused
                            - archived
                            - deleted
                        location:
                          type: object
                          properties:
                            latitude:
                              type: number
                              format: double
                            longitude:
                              type: number
                              format: double
                        price:
                          type: number
                          format: double
                        available:
                          type: boolean
                        thumbnail:
                          type: string
                          format: uri
                        distance:
                          type: number
                          format: double
                        created_at:
                          type: string
                          format: date-time
                        max_guests:
                          type: integer
                          format: int32
                        rating:
                          type: number
                          format: double
                        instant_book:
                          type: boolean
                        active:
                          type: boolean
                        amenities:
                          type: array
                          items:
                            type: string
                        cancellation_policy:
                          type: string
                        category:
                          type: object
                          properties:
                            name:
                              type: string
                            code:
                              type: string
                            description:
                              type: string
                  meta:
                    type: object
                    properties:
                      page:
                        type: integer
                        description: Current page number
                      limit:
                        type: integer
                        description: Number of items per page
                      total:
                        type: integer
                        description: Total number of items
                      pages:
                        type: integer
                        description: Total number of pages
                    required:
                      - page
                      - limit
                      - total
                      - pages
                required:
                  - success
                  - data
                  - meta
        '400':
          description: Bad request (invalid parameters)
          content:
            application/json:
              schema:
                type: object
                description: Standard error response model for failed requests.
                properties:
                  success:
                    type: boolean
                    description: Indicates if the request was successful.
                    example: false
                  error:
                    type: string
                    description: Error message describing the failure.
                    example: Invalid booking ID.
                  toast:
                    type: string
                    description: Optional toast message for the client UI.
                    example: Unable to process your request.
                required:
                  - success
                  - error
        '401':
          description: Unauthorized (missing or invalid token)
          content:
            application/json:
              schema:
                type: object
                description: Standard error response model for failed requests.
                properties:
                  success:
                    type: boolean
                    description: Indicates if the request was successful.
                    example: false
                  error:
                    type: string
                    description: Error message describing the failure.
                    example: Invalid booking ID.
                  toast:
                    type: string
                    description: Optional toast message for the client UI.
                    example: Unable to process your request.
                required:
                  - success
                  - error
        '404':
          description: Not found
          content:
            application/json:
              schema:
                type: object
                description: Standard error response model for failed requests.
                properties:
                  success:
                    type: boolean
                    description: Indicates if the request was successful.
                    example: false
                  error:
                    type: string
                    description: Error message describing the failure.
                    example: Invalid booking ID.
                  toast:
                    type: string
                    description: Optional toast message for the client UI.
                    example: Unable to process your request.
                required:
                  - success
                  - error
        default:
          description: Default error response
          content:
            application/json:
              schema:
                type: object
                description: Standard error response model for failed requests.
                properties:
                  success:
                    type: boolean
                    description: Indicates if the request was successful.
                    example: false
                  error:
                    type: string
                    description: Error message describing the failure.
                    example: Invalid booking ID.
                  toast:
                    type: string
                    description: Optional toast message for the client UI.
                    example: Unable to process your request.
                required:
                  - success
                  - error
  /listings/{id}/report:
    post:
      summary: Report a listing
      description: >-
        Allows a user to report a listing for inappropriate or incorrect
        content.
      tags:
        - listing
      operationId: listingsReportListing
      x-google-backend:
        address: https://listing-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      security:
        - jwtAuth: []
      parameters:
        - name: id
          in: path
          description: Listing ID
          required: true
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required:
                - reason
                - reported_by
              properties:
                reason:
                  type: string
                  enum:
                    - INAPPROPRIATE
                    - MISLEADING
                    - SPAM
                    - OFFENSIVE
                    - OTHER
                details:
                  type: string
                  maxLength: 500
                  description: Additional details about the report
                reported_by:
                  type: string
                  description: User ID of the person reporting the listing
        description: The report to create
        required: true
      responses:
        '201':
          description: Listing reported
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  toast:
                    type: string
                  report_id:
                    type: string
                    description: The ID of the created report
                required:
                  - success
                  - report_id
        '400':
          description: Bad request (invalid ID or report)
          content:
            application/json:
              schema:
                type: object
                description: Standard error response model for failed requests.
                properties:
                  success:
                    type: boolean
                    description: Indicates if the request was successful.
                    example: false
                  error:
                    type: string
                    description: Error message describing the failure.
                    example: Invalid booking ID.
                  toast:
                    type: string
                    description: Optional toast message for the client UI.
                    example: Unable to process your request.
                required:
                  - success
                  - error
        '401':
          description: Unauthorized (missing or invalid token)
          content:
            application/json:
              schema:
                type: object
                description: Standard error response model for failed requests.
                properties:
                  success:
                    type: boolean
                    description: Indicates if the request was successful.
                    example: false
                  error:
                    type: string
                    description: Error message describing the failure.
                    example: Invalid booking ID.
                  toast:
                    type: string
                    description: Optional toast message for the client UI.
                    example: Unable to process your request.
                required:
                  - success
                  - error
        '404':
          description: Listing not found
          content:
            application/json:
              schema:
                type: object
                description: Standard error response model for failed requests.
                properties:
                  success:
                    type: boolean
                    description: Indicates if the request was successful.
                    example: false
                  error:
                    type: string
                    description: Error message describing the failure.
                    example: Invalid booking ID.
                  toast:
                    type: string
                    description: Optional toast message for the client UI.
                    example: Unable to process your request.
                required:
                  - success
                  - error
        default:
          description: Default error response
          content:
            application/json:
              schema:
                type: object
                description: Standard error response model for failed requests.
                properties:
                  success:
                    type: boolean
                    description: Indicates if the request was successful.
                    example: false
                  error:
                    type: string
                    description: Error message describing the failure.
                    example: Invalid booking ID.
                  toast:
                    type: string
                    description: Optional toast message for the client UI.
                    example: Unable to process your request.
                required:
                  - success
                  - error
  /listings/{id}/blackout:
    post:
      summary: Add blackout dates to a listing
      description: Block specific date ranges for a listing to prevent bookings
      tags:
        - listing
      operationId: listingsAddBlackoutDates
      x-google-backend:
        address: https://listing-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      security:
        - jwtAuth: []
      parameters:
        - name: id
          in: path
          description: Listing ID
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                blackout_dates:
                  type: array
                  items:
                    type: object
                    properties:
                      start_date:
                        type: string
                        format: date-time
                        description: Start date and time of the blackout period
                      end_date:
                        type: string
                        format: date-time
                        description: End date and time of the blackout period
                      reason:
                        type: string
                        enum:
                          - maintenance
                          - personal
                          - blocked
                          - vacation
                          - other
                        description: Reason for the blackout period
                        default: blocked
                    required:
                      - start_date
                      - end_date
                      - reason
                  minItems: 1
                  maxItems: 10
              required:
                - blackout_dates
        description: Blackout dates to add to the listing
      responses:
        '201':
          description: Blackout dates added successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  toast:
                    type: string
                    example: Blackout dates added successfully
                  data:
                    type: object
                    properties:
                      listing_id:
                        type: string
                      added_count:
                        type: integer
                        description: Number of blackout dates added
                      blackout_dates:
                        type: array
                        items:
                          type: object
                          properties:
                            id:
                              type: string
                            start_date:
                              type: string
                              format: date-time
                            end_date:
                              type: string
                              format: date-time
                            reason:
                              type: string
                            created_at:
                              type: string
                              format: date-time
                            is_active:
                              type: boolean
                required:
                  - success
                  - data
        '400':
          description: Bad request (invalid dates or listing not found)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized (missing or invalid token)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden (user is not the host of this listing)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Listing not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        default:
          description: Default error response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /listings/{id}/blackout/{blackout_id}:
    delete:
      summary: Remove a blackout date from a listing
      description: Remove a specific blackout date by its ID
      tags:
        - listing
      operationId: listingsRemoveBlackoutDate
      x-google-backend:
        address: https://listing-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      security:
        - jwtAuth: []
      parameters:
        - name: id
          in: path
          description: Listing ID
          required: true
          schema:
            type: string
        - name: blackout_id
          in: path
          description: Blackout date ID to remove
          required: true
          schema:
            type: string
      responses:
        '204':
          description: Blackout date removed successfully
        '400':
          description: Bad request (invalid listing ID or blackout ID)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized (missing or invalid token)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden (user is not the host of this listing)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Listing or blackout date not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        default:
          description: Default error response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /listings/{id}/blackout-dates:
    get:
      summary: Get blackout dates for a listing
      description: Retrieve all blackout dates for a specific listing
      tags:
        - listing
      operationId: listingsGetBlackoutDates
      x-google-backend:
        address: https://listing-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      security:
        - jwtAuth: []
      parameters:
        - name: id
          in: path
          description: Listing ID
          required: true
          schema:
            type: string
        - name: active_only
          in: query
          description: Return only active blackout dates
          required: false
          schema:
            type: boolean
            default: true
      responses:
        '200':
          description: Blackout dates retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: object
                    properties:
                      listing_id:
                        type: string
                      blackout_dates:
                        type: array
                        items:
                          type: object
                          properties:
                            id:
                              type: string
                            start_date:
                              type: string
                              format: date-time
                            end_date:
                              type: string
                              format: date-time
                            reason:
                              type: string
                            created_at:
                              type: string
                              format: date-time
                            is_active:
                              type: boolean
                required:
                  - success
                  - data
        '400':
          description: Bad request (invalid listing ID)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized (missing or invalid token)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Listing not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        default:
          description: Default error response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /listings/{id}/availability:
    get:
      summary: Get listing availability
      description: >-
        Returns available and unavailable dates for a listing including blackout
        dates
      tags:
        - listing
      operationId: listingsGetAvailability
      x-google-backend:
        address: https://listing-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      security:
        - jwtAuth: []
      parameters:
        - name: id
          in: path
          description: Listing ID
          required: true
          schema:
            type: string
        - name: start_date
          in: query
          description: Start date for availability check (ISO 8601 format)
          required: false
          schema:
            type: string
            format: date
        - name: end_date
          in: query
          description: End date for availability check (ISO 8601 format)
          required: false
          schema:
            type: string
            format: date
        - name: months
          in: query
          description: Number of months to check from start_date (default 3)
          required: false
          schema:
            type: integer
            minimum: 1
            maximum: 12
            default: 3
      responses:
        '200':
          description: Listing availability retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: object
                    properties:
                      listing_id:
                        type: string
                      available_dates:
                        type: array
                        items:
                          type: object
                          properties:
                            start_date:
                              type: string
                              format: date
                            end_date:
                              type: string
                              format: date
                      unavailable_dates:
                        type: array
                        items:
                          type: object
                          properties:
                            start_date:
                              type: string
                              format: date-time
                            end_date:
                              type: string
                              format: date-time
                            reason:
                              type: string
                              enum:
                                - booked
                                - blackout
                                - maintenance
                                - personal
                                - blocked
                            blackout_id:
                              type: string
                              description: ID of the blackout date (if applicable)
                      last_updated:
                        type: string
                        format: date-time
                required:
                  - success
                  - data
        '400':
          description: Bad request (invalid listing ID or date parameters)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized (missing or invalid token)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Listing not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        default:
          description: Default error response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /listings/{id}/availability/calendar:
    get:
      summary: Get listing availability calendar
      description: >-
        Returns a list of unavailable dates for a listing within a specified
        date range. Used to disable unavailable dates in date pickers.
      tags:
        - listing
      operationId: listingsGetAvailabilityCalendar
      x-google-backend:
        address: https://listing-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      security:
        - jwtAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
          description: Listing ID
        - name: start_date
          in: query
          required: false
          schema:
            type: string
            format: date
          description: Start date for availability check (defaults to today)
        - name: days
          in: query
          required: false
          schema:
            type: integer
            default: 60
            minimum: 1
            maximum: 365
          description: Number of days to check availability (default 60, max 365)
      responses:
        '200':
          description: Availability calendar retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponseAvailabilityCalendar'
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized (missing or invalid token)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Listing not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        default:
          description: Default error response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /listings/dashboard/{section}:
    get:
      summary: Get dashboard section data
      description: >-
        Returns data for a specific dashboard section (essential,
        sections-config, popular-destinations, free, near-me, lgbtq-friendly,
        top-rated, instant-book, recently-added, community-stories)
      security: []
      tags:
        - listing
      operationId: dashboardSection
      x-google-backend:
        address: https://listing-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      parameters:
        - name: section
          in: path
          description: Dashboard section to retrieve
          required: true
          schema:
            type: string
            enum:
              - essential
              - sections-config
              - popular-destinations
              - free
              - near-me
              - lgbtq-friendly
              - top-rated
              - instant-book
              - recently-added
              - community-stories
        - name: limit
          in: query
          description: Maximum number of results (default varies by section)
          required: false
          schema:
            type: integer
            format: int32
            default: 8
        - name: offset
          in: query
          description: Offset for pagination (default 0)
          required: false
          schema:
            type: integer
            format: int32
            default: 0
        - name: country
          in: query
          description: Filter by country code (applicable to some sections)
          required: false
          schema:
            type: string
        - name: city
          in: query
          description: Filter by city name (applicable to some sections)
          required: false
          schema:
            type: string
        - name: lat
          in: query
          description: User's latitude (required for near-me section)
          required: false
          schema:
            type: number
            format: double
        - name: lng
          in: query
          description: User's longitude (required for near-me section)
          required: false
          schema:
            type: number
            format: double
        - name: radius
          in: query
          description: Search radius for near-me section (e.g., "25km", "10mi")
          required: false
          schema:
            type: string
            default: 25km
        - name: min_rating
          in: query
          description: Minimum rating filter for top-rated section (default 4.8)
          required: false
          schema:
            type: number
            format: double
            default: 4.8
      responses:
        '200':
          description: Successful dashboard section data retrieval
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    oneOf:
                      - type: object
                        description: >-
                          Essential dashboard data with featured categories and
                          previews
                        properties:
                          featured_categories:
                            type: object
                          popular_preview:
                            type: array
                            items:
                              $ref: '#/components/schemas/Listing'
                          recent_preview:
                            type: array
                            items:
                              $ref: '#/components/schemas/Listing'
                      - type: array
                        description: Sections config or listing items
                        items:
                          oneOf:
                            - $ref: '#/components/schemas/Listing'
                            - type: object
                      - type: object
                        description: Wrapped listing items for most sections
                        properties:
                          items:
                            type: array
                            items:
                              oneOf:
                                - $ref: '#/components/schemas/Listing'
                                - type: object
                  meta:
                    type: object
                    properties:
                      cache_key:
                        type: string
                      expires_in:
                        type: integer
                      timestamp:
                        type: string
                        format: date-time
                      section:
                        type: string
                        description: The requested section name
                required:
                  - success
                  - data
                  - meta
        '400':
          description: Bad request (invalid section or missing required parameters)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Section not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        default:
          description: Default error response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /listings/locations/search:
    get:
      summary: Location search and autocomplete
      description: Searches for cities and countries based on a prefix query
      security: []
      tags:
        - listing
      operationId: locationsSearch
      parameters:
        - name: q
          in: query
          description: Search query (min 2 characters)
          required: true
          schema:
            type: string
            minLength: 2
        - name: limit
          in: query
          description: Maximum number of results (default 10)
          required: false
          schema:
            type: integer
            format: int32
            default: 10
        - name: type
          in: query
          description: Filter type (city|country|all)
          required: false
          schema:
            type: string
            enum:
              - city
              - country
              - all
            default: all
      responses:
        '200':
          description: Successful location search
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: object
                    properties:
                      locations:
                        type: array
                        items:
                          $ref: '#/components/schemas/LocationSearchResult'
                  meta:
                    type: object
                    properties:
                      query:
                        type: string
                      results_count:
                        type: integer
                      search_time_ms:
                        type: integer
                required:
                  - success
                  - data
                  - meta
        '400':
          description: Bad request (invalid query)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        default:
          description: Default error response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
      x-google-backend: *ref_0
  /listings/locations/popular:
    get:
      summary: Get popular locations and countries
      description: Returns popular destinations and countries for location selector
      security: []
      tags:
        - listing
      operationId: locationsPopular
      parameters:
        - name: type
          in: query
          description: Filter type (destinations|countries|all)
          required: false
          schema:
            type: string
            enum:
              - destinations
              - countries
              - all
            default: all
        - name: limit
          in: query
          description: Maximum number of results (default 20)
          required: false
          schema:
            type: integer
            format: int32
            default: 20
      responses:
        '200':
          description: Successful popular locations retrieval
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    $ref: '#/components/schemas/PopularLocations'
                  meta:
                    type: object
                    properties:
                      type:
                        type: string
                      cache_duration:
                        type: integer
                required:
                  - success
                  - data
                  - meta
        '400':
          description: Bad request (invalid parameters)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        default:
          description: Default error response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
      x-google-backend: *ref_0
  /listings/locations/detect:
    post:
      summary: Reverse geocode detected user location
      description: Detects user location via reverse geocoding with fallback
      security: []
      tags:
        - listing
      operationId: locationsDetect
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                latitude:
                  type: number
                  format: double
                longitude:
                  type: number
                  format: double
              required:
                - latitude
                - longitude
      responses:
        '200':
          description: Successful location detection
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: object
                    properties:
                      location:
                        $ref: '#/components/schemas/DetectedLocation'
                      fallback:
                        $ref: '#/components/schemas/LocationSearchResult'
                  meta:
                    type: object
                    properties:
                      detection_method:
                        type: string
                      processing_time_ms:
                        type: integer
                required:
                  - success
                  - data
                  - meta
        '400':
          description: Bad request (invalid coordinates)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        default:
          description: Default error response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
      x-google-backend: *ref_0
  /bookings/heartbeat:
    get:
      summary: Heartbeat
      description: Health check endpoint for the booking service.
      tags:
        - booking
      operationId: bookingsHeartbeat
      security: []
      responses:
        '200':
          description: Service is healthy
          content:
            application/json:
              schema:
                type: string
                example: OK
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        default:
          description: Default error response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
      x-google-backend: *ref_0
  /bookings:
    post:
      summary: Create a booking (DEPRECATED)
      description: >
        **DEPRECATED**: This endpoint has been deprecated. Please use the
        two-step booking flow instead:

        1. POST /api/v1/bookings/initiate - Creates a draft booking

        2. PATCH /api/v1/bookings/{id}/finalize - Finalizes the booking with
        payment intent


        This endpoint now returns 410 Gone with a deprecation message.
      tags:
        - booking
      operationId: bookingsCreate
      deprecated: true
      security:
        - jwtAuth: []
      requestBody:
        description: Booking request payload
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/BookingRequest'
      responses:
        '201':
          description: >-
            Booking created successfully (legacy response - endpoint is
            deprecated)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponseBooking'
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '410':
          description: >-
            Gone - Endpoint deprecated. Use POST /bookings/initiate + PATCH
            /bookings/{id}/finalize instead.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        default:
          description: Default error response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
      x-google-backend: *ref_0
    get:
      summary: Get all bookings for the authenticated user
      description: Returns bookings for the currently authenticated user ("my bookings").
      tags:
        - booking
      operationId: bookingsList
      security:
        - jwtAuth: []
      parameters:
        - name: page
          in: query
          schema:
            type: integer
            default: 1
            minimum: 1
        - name: limit
          in: query
          schema:
            type: integer
            default: 10
            minimum: 1
            maximum: 100
      responses:
        '200':
          description: Paginated list of bookings
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BookingsSplitResponse'
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        default:
          description: Default error response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
      x-google-backend: *ref_0
  /bookings/host:
    get:
      summary: Get all bookings where the authenticated user is the host
      description: Returns bookings where the currently authenticated user is the host.
      tags:
        - booking
      operationId: bookingsHost
      security:
        - jwtAuth: []
      parameters:
        - name: page
          in: query
          schema:
            type: integer
            default: 1
            minimum: 1
        - name: limit
          in: query
          schema:
            type: integer
            default: 10
            minimum: 1
            maximum: 100
      responses:
        '200':
          description: Paginated list of host bookings
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BookingsSplitResponse'
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        default:
          description: Default error response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
      x-google-backend: *ref_0
  /bookings/initiate:
    post:
      summary: Initiate a booking (draft)
      description: >-
        Creates a draft booking with minimal information. Guest ID is extracted
        from JWT token. Returns a booking ID that can be used to create a
        payment intent and finalize the booking later.
      tags:
        - booking
      operationId: bookingsInitiate
      security:
        - jwtAuth: []
      requestBody:
        description: Minimal booking initiation payload
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/InitiateBookingRequest'
      responses:
        '201':
          description: Draft booking created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponseBooking'
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        default:
          description: Default error response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
      x-google-backend: *ref_0
  /bookings/drafts:
    get:
      summary: Get all draft bookings for user
      description: >-
        Retrieve all active draft bookings for the authenticated user. Returns
        all draft bookings that are not expired and have valid check-in dates,
        ordered by creation date (most recent first). Limited to 10 most recent
        drafts.
      tags:
        - booking
      operationId: bookingsGetDrafts
      security:
        - jwtAuth: []
      responses:
        '200':
          description: Draft bookings retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponseBookings'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        default:
          description: Default error response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
      x-google-backend: *ref_0
  /bookings/draft:
    get:
      summary: Get draft booking for listing
      description: >-
        Retrieve an existing draft booking for the authenticated user and
        specified listing. Returns the most recent draft booking if one exists.
        If no draft exists, returns a successful response with null data.
      tags:
        - booking
      operationId: bookingsGetDraft
      security:
        - jwtAuth: []
      parameters:
        - name: listing_id
          in: query
          required: true
          schema:
            type: string
          description: Listing ID to check for draft booking
      responses:
        '200':
          description: Draft booking found or no draft exists (data may be null)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponseBooking'
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        default:
          description: Default error response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
      x-google-backend: *ref_0
  /bookings/{id}:
    get:
      summary: Get a booking by ID
      description: Retrieve a booking by its ID.
      tags:
        - booking
      operationId: bookingsGet
      security:
        - jwtAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            maxLength: 32
      responses:
        '200':
          description: Booking details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponseBooking'
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        default:
          description: Default error response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
      x-google-backend: *ref_0
    delete:
      summary: Delete a draft booking
      description: >-
        Delete a draft booking by its ID. Only allows deletion of draft bookings
        owned by the authenticated user.
      tags:
        - booking
      operationId: bookingsDelete
      security:
        - jwtAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            maxLength: 32
      responses:
        '200':
          description: Draft booking deleted successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: Draft booking deleted successfully
        '400':
          description: Bad Request (e.g., booking is not a draft or user doesn't own it)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Booking not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        default:
          description: Default error response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
      x-google-backend: *ref_0
  /bookings/{id}/cancel:
    put:
      operationId: cancelBooking
      summary: Cancel a booking
      description: Cancel a specific booking
      tags:
        - bookings
      security:
        - jwtAuth: []
      x-google-backend:
        address: https://community-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Booking cancelled successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BookingResponse'
        '404':
          description: Booking not found
    patch:
      summary: Cancel a booking
      description: Cancel a booking by its ID.
      tags:
        - booking
      operationId: bookingsCancel
      security:
        - jwtAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        description: Cancellation request with actor and reason
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CancelBookingRequest'
      responses:
        '202':
          description: Booking cancelled
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponseBooking'
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        default:
          description: Default error response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
      x-google-backend: *ref_0
  /bookings/{id}/complete:
    patch:
      summary: Complete a booking
      description: Mark a booking as completed by its ID. Only host or guest can complete.
      tags:
        - booking
      operationId: bookingsComplete
      security:
        - jwtAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Booking completed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponseBooking'
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Booking not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        default:
          description: Default error response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
      x-google-backend: *ref_0
  /bookings/{id}/accept:
    patch:
      summary: Accept a booking
      description: Accept a booking by its ID.
      tags:
        - booking
      operationId: bookingsAccept
      security:
        - jwtAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        description: Optional message to the guest
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                message:
                  type: string
              required:
                - message
      responses:
        '202':
          description: Booking accepted
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponseBooking'
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        default:
          description: Default error response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
      x-google-backend: *ref_0
  /bookings/{id}/reject:
    patch:
      summary: Reject a booking
      description: Reject a booking by its ID.
      tags:
        - booking
      operationId: bookingsReject
      security:
        - jwtAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            maxLength: 32
      requestBody:
        description: Reason for rejection
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                message:
                  type: string
                  maxLength: 255
                reason:
                  type: string
                  maxLength: 255
                  enum:
                    - Listing is no longer available
                    - Going on vacation
                    - Traveling for work
                    - Guest is not a good fit
                    - Other
              required:
                - message
                - reason
      responses:
        '202':
          description: Booking rejected
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponseBooking'
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        default:
          description: Default error response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
      x-google-backend: *ref_0
  /bookings/{id}/finalize:
    patch:
      summary: Finalize a booking
      description: >-
        Completes a draft booking with full details and payment intent ID. The
        payment intent ID is used to verify/charge the payment. Actual payment
        confirmation happens via Stripe webhook, which will update the booking
        status accordingly.
      tags:
        - booking
      operationId: bookingsFinalize
      security:
        - jwtAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        description: Booking finalization payload with full booking details
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/FinalizeBookingRequest'
      responses:
        '200':
          description: Booking finalized successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponseBooking'
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Booking not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        default:
          description: Default error response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
      x-google-backend: *ref_0
  /bookings/{id}/payment-intent:
    patch:
      summary: Update draft booking with payment intent ID
      description: >-
        Updates a draft booking with payment intent ID. This allows the payment
        intent to be restored when the user continues the booking after hot
        reload.
      tags:
        - booking
      operationId: bookingsUpdatePaymentIntent
      security:
        - jwtAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        description: Payment intent ID to associate with draft booking
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                payment_intent_id:
                  type: string
                  description: Stripe payment intent ID
              required:
                - payment_intent_id
      responses:
        '200':
          description: Booking updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponseBooking'
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Booking not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
      x-google-backend: *ref_0
  /pricing/rates:
    get:
      summary: Get pricing rates for a region
      description: Returns service fee and tax rates for a specific region code
      tags:
        - pricing
      operationId: pricingGetRates
      security: []
      parameters:
        - name: region_code
          in: query
          schema:
            type: string
            default: US
          description: ISO country code (e.g., "US", "CA", "GB")
      responses:
        '200':
          description: Pricing rates retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PricingRates'
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        default:
          description: Default error response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
      x-google-backend: *ref_0
  /pricing/calculate:
    post:
      summary: Calculate pricing breakdown
      description: Calculates the full pricing breakdown including service fees and taxes
      tags:
        - pricing
      operationId: pricingCalculateBreakdown
      security: []
      requestBody:
        description: Pricing calculation request
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PricingBreakdownRequest'
      responses:
        '200':
          description: Pricing breakdown calculated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PricingBreakdown'
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        default:
          description: Default error response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
      x-google-backend: *ref_0
    get:
      summary: Calculate pricing breakdown from URL parameters
      description: Calculates pricing breakdown using URL query parameters
      tags:
        - pricing
      operationId: pricingCalculateBreakdownFromURL
      security: []
      parameters:
        - name: subtotal
          in: query
          required: true
          schema:
            type: number
            format: float
          description: Base price before fees and taxes
        - name: region_code
          in: query
          schema:
            type: string
            default: US
          description: ISO country code
      responses:
        '200':
          description: Pricing breakdown calculated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PricingBreakdown'
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        default:
          description: Default error response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
      x-google-backend: *ref_0
  /reviews/heartbeat:
    get:
      summary: Health check endpoint
      description: |
        This endpoint is used to check the health status of the API service.
      operationId: getHeartbeat
      x-google-backend:
        address: https://review-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      tags:
        - review
      security: []
      responses:
        '200':
          description: API is healthy
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    enum:
                      - healthy
        '400':
          description: Bad request
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
  /reviews:
    get:
      summary: Get reviews with filters (author, target, type, category, etc.)
      description: >
        Retrieve a list of reviews filtered by author, target, type, category,
        listing, and pagination.
      tags:
        - review
      operationId: listReviews
      x-google-backend:
        address: https://review-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      security:
        - jwtAuth: []
      parameters:
        - name: author
          in: query
          required: false
          schema:
            type: string
          description: Filter by author user ID
        - name: target
          in: query
          required: false
          schema:
            type: string
          description: Filter by target user or listing ID
        - name: type
          in: query
          required: false
          schema:
            type: string
            enum:
              - user
              - listing
          description: Filter by review type (user or listing)
        - name: category
          in: query
          required: false
          schema:
            type: string
          description: Filter by review category (e.g., couchsurf, workspace)
        - name: page
          in: query
          required: false
          schema:
            type: integer
            default: 1
        - name: limit
          in: query
          required: false
          schema:
            type: integer
            default: 10
      responses:
        '200':
          description: List of reviews matching filters
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/APIResponse'
        '400':
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DefaultResponse'
        default:
          description: Default
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DefaultResponse'
    post:
      summary: Create a new review (user or listing)
      description: >
        Create a new review for a user or listing, specifying context, metrics,
        and other details.
      tags:
        - review
      operationId: createReview
      x-google-backend:
        address: https://review-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      security:
        - jwtAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ReviewRequest'
            examples:
              guest_review_space:
                summary: Guest review of a listing (space)
                value:
                  booking_id: booking_123
                  type: listing
                  comment: The room was clean and comfortable.
                  metrics:
                    cleanliness: 5
                    check_in: 4
                    accuracy: 4.5
                    location: 4
                    value: 4.5
              guest_review_host:
                summary: Guest review of a host
                value:
                  booking_id: booking_123
                  type: user
                  comment: Bob was a wonderful host!
                  metrics:
                    hospitality: 5
                    communication: 4.5
                    cleanliness: 4.5
                    respectfulness: 5
                    would_visit_again: true
              host_review_guest:
                summary: Host review of a guest
                value:
                  booking_id: booking_123
                  type: user
                  comment: Alice was respectful and tidy.
                  metrics:
                    communication: 4
                    cleanliness: 4.5
                    respectfulness: 4.5
                    would_host_again: true
      responses:
        '201':
          description: Review created and pending approval.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ReviewCreatedResponse'
              examples:
                created:
                  summary: Review created successfully
                  value:
                    success: true
                    toast: Review submitted and pending approval
                    data:
                      id: PCNpbQVwyxMiQQpqDz6v
                      status: pending
                      booking_id: E41MrpBF295EmoYdkIiF
        '400':
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DefaultResponse'
        '404':
          description: Not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DefaultResponse'
        '409':
          description: Duplicate review - review already exists for this booking
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DefaultResponse'
        default:
          description: Default
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DefaultResponse'
  /reviews/{id}:
    get:
      summary: Get a single review by ID
      description: |
        Retrieve a single review by its unique ID.
      tags:
        - review
      operationId: getReviewById
      x-google-backend:
        address: https://review-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      security:
        - jwtAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
          description: Review ID
      responses:
        '200':
          description: The review
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/APIResponse'
        '404':
          description: Review not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DefaultResponse'
        default:
          description: Default
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DefaultResponse'
    patch:
      summary: Partially update a review (e.g., change comment, rating, etc.)
      description: >
        Update fields of an existing review, such as comment, rating, or
        metrics.
      tags:
        - review
      operationId: patchReview
      x-google-backend:
        address: https://review-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      security:
        - jwtAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
          description: Review ID
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ReviewUpdateRequest'
      responses:
        '200':
          description: The updated review
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/APIResponse'
        '400':
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DefaultResponse'
        '404':
          description: Review not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DefaultResponse'
        default:
          description: Default
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DefaultResponse'
    delete:
      summary: Delete a review
      description: |
        Delete a review by its unique ID.
      tags:
        - review
      operationId: deleteReview
      x-google-backend:
        address: https://review-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      security:
        - jwtAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
          description: Review ID
      responses:
        '200':
          description: Review deleted
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/APIResponse'
        '404':
          description: Review not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DefaultResponse'
        default:
          description: Default
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DefaultResponse'
  /reviews/{id}/report:
    post:
      summary: Report an inappropriate review
      description: |
        Report a review as inappropriate, misleading, spam, or offensive.
      tags:
        - review
      operationId: reportReview
      x-google-backend:
        address: https://review-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      security:
        - jwtAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
          description: Review ID
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ReportReviewRequest'
      responses:
        '200':
          description: Review reported successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/APIResponse'
        '404':
          description: Review not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DefaultResponse'
        default:
          description: Default
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DefaultResponse'
  /reviews/{id}/respond:
    post:
      summary: Respond to a review
      description: |
        Add a response to a review as the target user or listing owner.
      tags:
        - review
      operationId: respondToReview
      x-google-backend:
        address: https://review-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      security:
        - jwtAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
          description: Review ID
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ReviewResponseRequest'
      responses:
        '200':
          description: Response added successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/APIResponse'
        '404':
          description: Review not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DefaultResponse'
        default:
          description: Default
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DefaultResponse'
  /wishlists/heartbeat:
    get:
      summary: Wishlist service heartbeat
      description: >-
        Health check endpoint for the wishlist service to verify it is running
        and accessible.
      tags:
        - wishlist
      operationId: wishlistHeartbeat
      x-google-backend:
        address: https://wishlist-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      responses:
        '200':
          description: Heartbeat
          content:
            application/json:
              schema:
                type: string
                example: OK
        '400':
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized (missing or invalid token)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        default:
          description: Default error response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
      security: []
  /wishlists:
    get:
      summary: Get all listings in wishlist for the authenticated user
      description: >-
        Retrieves all wishlist items grouped by tags for the currently
        authenticated user.
      tags:
        - wishlist
      operationId: getAllListingsInWishlist
      security:
        - jwtAuth: []
      x-google-backend:
        address: https://wishlist-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      responses:
        '200':
          description: All listings in wishlist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/APIResponse'
        '400':
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized (missing or invalid token)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        default:
          description: Default error response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    post:
      summary: >-
        Add a single listing to wishlist for the authenticated user (optionally
        with tag)
      description: >-
        Adds a new listing to the user's wishlist, optionally organizing it
        under a specific tag.
      tags:
        - wishlist
      operationId: addListingToWishlist
      security:
        - jwtAuth: []
      x-google-backend:
        address: https://wishlist-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AddListingRequest'
        description: Listing to add, with optional tag
        required: true
      responses:
        '201':
          description: Listing added to wishlist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/APIResponse'
        '400':
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized (missing or invalid token)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        default:
          description: Default error response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    delete:
      summary: Remove a single listing from wishlist
      description: >-
        Removes a specific listing from the user's wishlist, optionally from a
        specific tag.
      tags:
        - wishlist
      operationId: removeListingFromWishlist
      security:
        - jwtAuth: []
      x-google-backend:
        address: https://wishlist-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RemoveListingRequest'
        description: Listing to remove, with optional tag
        required: true
      responses:
        '200':
          description: Listing removed from wishlist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/APIResponse'
        '400':
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized (missing or invalid token)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        default:
          description: Default error response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    patch:
      summary: Move a single listing to a different tag
      description: Moves a listing from one tag to another within the user's wishlist.
      tags:
        - wishlist
      operationId: moveListingBetweenTags
      security:
        - jwtAuth: []
      x-google-backend:
        address: https://wishlist-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/MoveListingRequest'
        description: Move a single listing between tags
        required: true
      responses:
        '200':
          description: Listing moved to new tag
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/APIResponse'
        '400':
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized (missing or invalid token)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        default:
          description: Default error response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /wishlists/tags:
    delete:
      summary: Delete an entire tag and all its listings from wishlist
      description: >-
        Permanently removes a tag and all associated listings from the user's
        wishlist.
      tags:
        - wishlist
      operationId: deleteTagFromWishlist
      security:
        - jwtAuth: []
      x-google-backend:
        address: https://wishlist-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DeleteTagRequest'
        description: Tag to delete
        required: true
      responses:
        '200':
          description: Tag deleted from wishlist
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/APIResponse'
        '400':
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized (missing or invalid token)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        default:
          description: Default
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /health:
    get:
      summary: Health check
      description: Check service health status
      operationId: healthCheck
      x-google-backend:
        address: https://chat-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      tags:
        - conversations
      security: []
      responses:
        '200':
          description: Service is healthy
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    enum:
                      - healthy
                      - unhealthy
                  timestamp:
                    type: string
                    format: date-time
                  version:
                    type: string
                $ref: '#/components/schemas/HealthResponse'
        '400':
          description: Bad request
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    enum:
                      - healthy
                      - unhealthy
                  timestamp:
                    type: string
                    format: date-time
                  error:
                    type: string
                $ref: '#/components/schemas/ErrorResponse'
        '503':
          description: Service is unhealthy
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /payments/heartbeat:
    get:
      summary: Heartbeat
      description: >-
        Returns a simple heartbeat response to verify the Payment service is
        running.
      tags:
        - payment
      operationId: paymentHeartbeat
      x-google-backend:
        address: https://payment-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      security:
        - jwtAuth: []
      parameters:
        - name: X-Payment-Provider
          in: header
          required: false
          description: Payment provider (optional, defaults to user's preferred provider)
          schema:
            type: string
            enum:
              - stripe
              - paypal
              - apple_pay
            default: stripe
      responses:
        '200':
          description: Heartbeat response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HeartbeatResponse'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /payments/earnings:
    get:
      summary: Get user earnings
      description: Retrieves earnings data for the authenticated user
      tags:
        - payment
      operationId: getEarnings
      x-google-backend:
        address: https://payment-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      security:
        - jwtAuth: []
      parameters:
        - name: X-Payment-Provider
          in: header
          required: false
          description: Payment provider (optional, defaults to user's preferred provider)
          schema:
            type: string
            enum:
              - stripe
              - paypal
              - apple_pay
            default: stripe
      responses:
        '200':
          description: Earnings data retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/EarningsResponse'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /payments/history:
    get:
      summary: Get transaction history
      description: Retrieves transaction history for the authenticated user
      tags:
        - payment
      operationId: getTransactionHistory
      x-google-backend:
        address: https://payment-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      security:
        - jwtAuth: []
      parameters:
        - name: X-Payment-Provider
          in: header
          required: false
          description: Payment provider (optional, defaults to user's preferred provider)
          schema:
            type: string
            enum:
              - stripe
              - paypal
              - apple_pay
            default: stripe
        - name: page
          in: query
          description: Page number for pagination
          required: false
          schema:
            type: integer
            minimum: 1
            default: 1
        - name: limit
          in: query
          description: Number of items per page
          required: false
          schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 10
      responses:
        '200':
          description: Transaction history retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TransactionHistoryResponse'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /payments/intents:
    post:
      summary: Create payment intent
      description: Creates a new payment intent for a booking
      tags:
        - payment
      operationId: createPaymentIntent
      x-google-backend:
        address: https://payment-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      security:
        - jwtAuth: []
      parameters:
        - name: X-Payment-Provider
          in: header
          required: false
          description: Payment provider (optional, defaults to user's preferred provider)
          schema:
            type: string
            enum:
              - stripe
              - paypal
              - apple_pay
            default: stripe
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreatePaymentIntentRequest'
      responses:
        '201':
          description: Payment intent created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaymentIntentResponse'
        '400':
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /payments/intents/{id}:
    get:
      summary: Get payment intent
      description: Retrieves a payment intent by ID
      tags:
        - payment
      operationId: getPaymentIntent
      x-google-backend:
        address: https://payment-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      security:
        - jwtAuth: []
      parameters:
        - name: X-Payment-Provider
          in: header
          required: false
          description: Payment provider (optional, defaults to user's preferred provider)
          schema:
            type: string
            enum:
              - stripe
              - paypal
              - apple_pay
            default: stripe
        - name: id
          in: path
          required: true
          description: Payment intent ID
          schema:
            type: string
      responses:
        '200':
          description: Payment intent retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaymentIntentResponse'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Payment intent not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /payments/intents/{id}/use-payment-method:
    post:
      summary: Use payment method
      description: >-
        Attaches a payment method to a payment intent and confirms it
        automatically. This is the simplified flow for when users select a saved
        payment method - one call does everything.
      tags:
        - payment
      operationId: usePaymentMethod
      x-google-backend:
        address: https://payment-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      security:
        - jwtAuth: []
      parameters:
        - name: X-Payment-Provider
          in: header
          required: false
          description: Payment provider (optional, defaults to user's preferred provider)
          schema:
            type: string
            enum:
              - stripe
              - paypal
              - apple_pay
            default: stripe
        - name: id
          in: path
          required: true
          description: Payment intent ID
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - payment_method_id
              properties:
                payment_method_id:
                  type: string
                  description: Payment method ID to attach and confirm
      responses:
        '200':
          description: Payment method attached and confirmed successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaymentIntentResponse'
        '400':
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /payments/refunds:
    post:
      summary: Create refund
      description: Creates a refund for a payment intent
      tags:
        - payment
      operationId: createRefund
      x-google-backend:
        address: https://payment-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      security:
        - jwtAuth: []
      parameters:
        - name: X-Payment-Provider
          in: header
          required: false
          description: Payment provider (optional, defaults to user's preferred provider)
          schema:
            type: string
            enum:
              - stripe
              - paypal
              - apple_pay
            default: stripe
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateRefundRequest'
      responses:
        '201':
          description: Refund created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RefundResponse'
        '400':
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /payments/methods/{id}/attach:
    post:
      summary: Attach payment method
      description: Attaches a payment method to a customer
      tags:
        - payment
      operationId: attachPaymentMethod
      x-google-backend:
        address: https://payment-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      security:
        - jwtAuth: []
      parameters:
        - name: X-Payment-Provider
          in: header
          required: false
          description: Payment provider (optional, defaults to user's preferred provider)
          schema:
            type: string
            enum:
              - stripe
              - paypal
              - apple_pay
            default: stripe
        - name: id
          in: path
          required: true
          description: Payment method ID
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                customer_id:
                  type: string
                  description: Customer ID
              required:
                - customer_id
      responses:
        '200':
          description: Payment method attached successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: object
                    properties:
                      status:
                        type: string
        '400':
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /payments/methods:
    get:
      summary: Get user payment methods
      description: Retrieves saved payment methods for the authenticated user
      tags:
        - payment
      operationId: getPaymentMethods
      x-google-backend:
        address: https://payment-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      security:
        - jwtAuth: []
      parameters:
        - name: X-Payment-Provider
          in: header
          required: false
          description: Payment provider (optional, defaults to user's preferred provider)
          schema:
            type: string
            enum:
              - stripe
              - paypal
              - apple_pay
            default: stripe
      responses:
        '200':
          description: Payment methods retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaymentMethodsResponse'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    post:
      summary: Save payment method
      description: Saves a payment method for the authenticated user
      tags:
        - payment
      operationId: savePaymentMethod
      x-google-backend:
        address: https://payment-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      security:
        - jwtAuth: []
      parameters:
        - name: X-Payment-Provider
          in: header
          required: false
          description: Payment provider (optional, defaults to user's preferred provider)
          schema:
            type: string
            enum:
              - stripe
              - paypal
              - apple_pay
            default: stripe
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                payment_method_id:
                  type: string
                  description: Stripe payment method ID
              required:
                - payment_method_id
      responses:
        '201':
          description: Payment method saved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: object
                    properties:
                      status:
                        type: string
        '400':
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /payments/methods/{id}:
    delete:
      summary: Remove payment method
      description: Removes a saved payment method for the authenticated user
      tags:
        - payment
      operationId: removePaymentMethod
      x-google-backend:
        address: https://payment-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      security:
        - jwtAuth: []
      parameters:
        - name: X-Payment-Provider
          in: header
          required: false
          description: Payment provider (optional, defaults to user's preferred provider)
          schema:
            type: string
            enum:
              - stripe
              - paypal
              - apple_pay
            default: stripe
        - name: id
          in: path
          required: true
          description: Payment method ID
          schema:
            type: string
      responses:
        '200':
          description: Payment method removed successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: object
                    properties:
                      status:
                        type: string
        '400':
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Payment method not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    patch:
      summary: Set default payment method
      description: Sets a payment method as the default for the authenticated user
      tags:
        - payment
      operationId: setDefaultPaymentMethod
      x-google-backend:
        address: https://payment-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      security:
        - jwtAuth: []
      parameters:
        - name: X-Payment-Provider
          in: header
          required: false
          description: Payment provider (optional, defaults to user's preferred provider)
          schema:
            type: string
            enum:
              - stripe
              - paypal
              - apple_pay
            default: stripe
        - name: id
          in: path
          required: true
          description: Payment method ID
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                default:
                  type: boolean
                  description: Set as default payment method
                  default: true
              required:
                - default
      responses:
        '200':
          description: Default payment method updated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: object
                    properties:
                      status:
                        type: string
        '400':
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Payment method not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /payments/setup-intents:
    post:
      summary: Create setup intent
      description: >-
        Creates a SetupIntent for saving payment methods without charging. This
        is used when users want to add a new payment method from the settings
        page.
      tags:
        - payment
      operationId: createSetupIntent
      x-google-backend:
        address: https://payment-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      security:
        - jwtAuth: []
      parameters:
        - name: X-Payment-Provider
          in: header
          required: false
          description: Payment provider (optional, defaults to user's preferred provider)
          schema:
            type: string
            enum:
              - stripe
              - paypal
              - apple_pay
            default: stripe
      responses:
        '201':
          description: Setup intent created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SetupIntentResponse'
        '400':
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /payments/setup-intents/{id}:
    get:
      summary: Get setup intent
      description: Retrieves a SetupIntent by ID
      tags:
        - payment
      operationId: getSetupIntent
      x-google-backend:
        address: https://payment-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      security:
        - jwtAuth: []
      parameters:
        - name: X-Payment-Provider
          in: header
          required: false
          description: Payment provider (optional, defaults to user's preferred provider)
          schema:
            type: string
            enum:
              - stripe
              - paypal
              - apple_pay
            default: stripe
        - name: id
          in: path
          required: true
          description: Setup intent ID
          schema:
            type: string
      responses:
        '200':
          description: Setup intent retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SetupIntentResponse'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Setup intent not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /webhooks/{provider}:
    post:
      summary: Payment provider webhook
      description: Handles webhook events from payment providers
      tags:
        - webhook
      operationId: handleProviderWebhook
      x-google-backend:
        address: https://payment-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      security: []
      parameters:
        - name: provider
          in: path
          required: true
          description: Payment provider (stripe, paypal, apple_pay)
          schema:
            type: string
            enum:
              - stripe
              - paypal
              - apple_pay
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              description: Provider-specific webhook payload
      responses:
        '200':
          description: Webhook processed successfully
          content:
            text/plain:
              schema:
                type: string
                example: Webhook processed successfully
        '400':
          description: Bad request
          content:
            text/plain:
              schema:
                type: string
        '500':
          description: Internal server error
          content:
            text/plain:
              schema:
                type: string
  /documents/heartbeat:
    get:
      summary: Heartbeat
      description: >-
        Returns a simple heartbeat response to verify the Document service is
        running.
      tags:
        - document
      operationId: documentsHeartbeat
      x-google-backend:
        address: https://document-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      security: []
      responses:
        '200':
          description: Heartbeat
          content:
            application/json:
              schema:
                type: string
        '400':
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized (missing or invalid token)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        default:
          description: Default error response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /documents:
    post:
      summary: Upload files
      description: >-
        Upload one or more files to Google Cloud Storage. Files are base64
        encoded in the request body.
      tags:
        - document
      operationId: documentsUploadFiles
      x-google-backend:
        address: https://document-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      security:
        - jwtAuth: []
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DocumentRequest'
        description: The document upload request
        required: true
      responses:
        '201':
          description: Files uploaded successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: object
                    properties:
                      urls:
                        type: array
                        items:
                          type: string
                          format: uri
                        description: Array of uploaded file URLs
                    required:
                      - urls
                  toast:
                    type: string
                    description: Localized success message
                    example: Documents uploaded successfully
                  error:
                    type: string
                    example: ''
                required:
                  - success
                  - data
                  - toast
                  - error
        '400':
          description: Bad request (invalid request body or validation failed)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized (missing or invalid token)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal server error (failed to upload or decode files)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        default:
          description: Default error response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    patch:
      summary: Overwrite files
      description: >-
        Overwrite existing files in Google Cloud Storage. Currently not
        implemented.
      tags:
        - document
      operationId: documentsOverwriteFiles
      x-google-backend:
        address: https://document-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      security:
        - jwtAuth: []
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DocumentRequest'
        description: The document overwrite request
        required: true
      responses:
        '200':
          description: Files overwritten successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: object
                    description: Information about the overwritten files
                  toast:
                    type: string
                    description: Localized success message
                    example: Documents overwritten successfully
                  error:
                    type: string
                    example: ''
                required:
                  - success
                  - data
                  - toast
                  - error
        '400':
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized (missing or invalid token)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    delete:
      summary: Delete files
      description: Delete files from Google Cloud Storage. Currently not implemented.
      tags:
        - document
      operationId: documentsDeleteFiles
      x-google-backend:
        address: https://document-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      security:
        - jwtAuth: []
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DocumentRequest'
        description: The document deletion request
        required: true
      responses:
        '200':
          description: Files deleted successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: object
                    description: Information about the deleted files
                  toast:
                    type: string
                    description: Localized success message
                    example: Documents deleted successfully
                  error:
                    type: string
                    example: ''
                required:
                  - success
                  - data
                  - toast
                  - error
        '400':
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized (missing or invalid token)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /conversations/heartbeat:
    get:
      summary: Heartbeat
      description: Health check endpoint for the booking service.
      tags:
        - conversations
      operationId: conversationHeartBeat
      x-google-backend:
        address: https://chat-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      security: []
      responses:
        '200':
          description: Service is healthy
          content:
            application/json:
              schema:
                type: string
                example: OK
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        default:
          description: Default error response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /conversations:
    get:
      summary: List user conversations
      description: Get all conversations for the authenticated user
      operationId: listConversations
      x-google-backend:
        address: https://chat-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      security:
        - jwtAuth: []
      tags:
        - conversations
      parameters:
        - name: limit
          in: query
          description: Maximum number of conversations to return
          required: false
          schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 20
        - name: cursor
          in: query
          description: >-
            Cursor token for pagination (conversation ID). Use the value from
            the previous response's `next_cursor` when `has_more` is true.
          required: false
          schema:
            type: string
            example: 3b6a45ca-f555-46d6-95fa-62ffe4bb951a
        - name: type
          in: query
          description: Filter conversations by type
          required: false
          schema:
            type: string
            enum:
              - direct
              - group
      responses:
        '200':
          description: List of conversations (cursor-based pagination)
          content:
            application/json:
              schema:
                type: object
                required:
                  - success
                  - data
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: object
                    properties:
                      conversations:
                        type: array
                        items:
                          $ref: '#/components/schemas/Conversation'
                      total:
                        type: integer
                        description: >-
                          Total number of conversations returned in this
                          response
                        example: 2
                      has_more:
                        type: boolean
                        description: Whether there are more conversations beyond this page
                        example: false
                      next_cursor:
                        type: string
                        description: >-
                          Cursor token for the next page; present when
                          `has_more` is true
                        example: 3b6a45ca-f555-46d6-95fa-62ffe4bb951a
                  message:
                    type: string
                    description: Optional success message
        '401':
          $ref: '#/components/responses/Unauthorized'
        '500':
          $ref: '#/components/responses/InternalServerError'
    post:
      summary: Create a new conversation
      description: Create a new conversation between users
      operationId: createConversation
      x-google-backend:
        address: https://chat-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      security:
        - jwtAuth: []
      tags:
        - conversations
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateConversationRequest'
      responses:
        '201':
          description: Conversation created successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/Conversation'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '409':
          description: Conversation already exists
        '500':
          $ref: '#/components/responses/InternalServerError'
  /conversations/find:
    post:
      summary: Find an existing conversation
      description: >-
        Find an existing direct conversation by participants and listing
        metadata
      operationId: findConversation
      x-google-backend:
        address: https://chat-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      security:
        - jwtAuth: []
      tags:
        - conversations
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/FindConversationRequest'
      responses:
        '200':
          description: Conversation found or empty list if none
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Conversation'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /conversations/{conversationId}:
    get:
      summary: Get conversation details
      description: Get details of a specific conversation
      operationId: getConversation
      x-google-backend:
        address: https://chat-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      security:
        - jwtAuth: []
      tags:
        - conversations
      parameters:
        - name: conversationId
          in: path
          required: true
          description: Unique identifier of the conversation
          schema:
            type: string
      responses:
        '200':
          description: Conversation details
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/Conversation'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'
    put:
      summary: Update conversation
      description: Update conversation settings (archive, mute, etc.)
      operationId: updateConversation
      x-google-backend:
        address: https://chat-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      security:
        - jwtAuth: []
      tags:
        - conversations
      parameters:
        - name: conversationId
          in: path
          required: true
          description: Unique identifier of the conversation
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateConversationRequest'
      responses:
        '200':
          description: Conversation updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Conversation'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'
    delete:
      summary: Archive conversation
      description: Archive a conversation (soft delete)
      operationId: archiveConversation
      x-google-backend:
        address: https://chat-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      security:
        - jwtAuth: []
      tags:
        - conversations
      parameters:
        - name: conversationId
          in: path
          required: true
          description: Unique identifier of the conversation
          schema:
            type: string
      responses:
        '204':
          description: Conversation archived successfully
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /conversations/{conversationId}/messages:
    get:
      summary: Get conversation messages
      description: Get messages from a specific conversation
      operationId: getMessages
      x-google-backend:
        address: https://chat-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      security:
        - jwtAuth: []
      tags:
        - Messages
      parameters:
        - name: conversationId
          in: path
          required: true
          description: Unique identifier of the conversation
          schema:
            type: string
        - name: limit
          in: query
          description: Maximum number of messages to return
          required: false
          schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 50
        - name: before
          in: query
          description: Get messages before this timestamp (ISO 8601)
          required: false
          schema:
            type: string
            format: date-time
        - name: after
          in: query
          description: Get messages after this timestamp (ISO 8601)
          required: false
          schema:
            type: string
            format: date-time
      responses:
        '200':
          description: List of messages
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ListResponse'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/Message'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'
    post:
      summary: Send a message
      description: Send a new message to a conversation
      operationId: sendMessage
      x-google-backend:
        address: https://chat-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      security:
        - jwtAuth: []
      tags:
        - Messages
      parameters:
        - name: conversationId
          in: path
          required: true
          description: Unique identifier of the conversation
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SendMessageRequest'
      responses:
        '201':
          description: Message sent successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/Message'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /messages/{messageId}:
    get:
      summary: Get message details
      description: Get details of a specific message
      operationId: getMessage
      x-google-backend:
        address: https://chat-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      security:
        - jwtAuth: []
      tags:
        - Messages
      parameters:
        - name: messageId
          in: path
          required: true
          description: Unique identifier of the message
          schema:
            type: string
      responses:
        '200':
          description: Message details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Message'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'
    put:
      summary: Update message
      description: Update a message (edit, delete, etc.)
      operationId: updateMessage
      x-google-backend:
        address: https://chat-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      security:
        - jwtAuth: []
      tags:
        - Messages
      parameters:
        - name: messageId
          in: path
          required: true
          description: Unique identifier of the message
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateMessageRequest'
      responses:
        '200':
          description: Message updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Message'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /messages/{messageId}/read:
    put:
      summary: Mark message as read
      description: Mark a specific message as read by the current user
      operationId: markMessageAsRead
      x-google-backend:
        address: https://chat-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      security:
        - jwtAuth: []
      tags:
        - Messages
      parameters:
        - name: messageId
          in: path
          required: true
          description: Unique identifier of the message
          schema:
            type: string
      responses:
        '200':
          description: Message marked as read
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Message'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /conversations/{conversationId}/read:
    put:
      summary: Mark all messages as read
      description: Mark all messages in a conversation as read by the current user
      operationId: markAllMessagesAsRead
      x-google-backend:
        address: https://chat-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      security:
        - jwtAuth: []
      tags:
        - Messages
      parameters:
        - name: conversationId
          in: path
          required: true
          description: Unique identifier of the conversation
          schema:
            type: string
      responses:
        '200':
          description: All messages marked as read
          content:
            application/json:
              schema:
                type: object
                properties:
                  updated_count:
                    type: integer
                    description: Number of messages marked as read
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /conversations/{conversationId}/poll:
    get:
      summary: Poll for new messages
      description: >-
        Poll for new messages in a conversation (replaces WebSocket for offline
        messaging)
      operationId: pollMessages
      x-google-backend:
        address: https://chat-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      security:
        - jwtAuth: []
      tags:
        - Real-time
      parameters:
        - name: conversationId
          in: path
          required: true
          description: Unique identifier of the conversation
          schema:
            type: string
        - name: limit
          in: query
          description: Maximum number of messages to return
          required: false
          schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 50
        - name: since
          in: query
          description: Get messages since this timestamp (ISO 8601)
          required: false
          schema:
            type: string
            format: date-time
      responses:
        '200':
          description: New messages since last poll
          content:
            application/json:
              schema:
                type: object
                properties:
                  messages:
                    type: array
                    items:
                      $ref: '#/components/schemas/Message'
                  has_more:
                    type: boolean
                    description: Whether there are more messages
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /conversations/{conversationId}/typing:
    post:
      summary: Send typing indicator
      description: Send typing indicator to other participants
      operationId: sendTypingIndicator
      x-google-backend:
        address: https://chat-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      security:
        - jwtAuth: []
      tags:
        - Real-time
      parameters:
        - name: conversationId
          in: path
          required: true
          description: Unique identifier of the conversation
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TypingIndicatorRequest'
      responses:
        '200':
          description: Typing indicator sent
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /ws:
    get:
      summary: WebSocket connection
      description: Establish WebSocket connection for real-time messaging
      operationId: websocket
      x-google-backend:
        address: https://chat-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      security:
        - jwtAuth: []
      tags:
        - Real-time
      parameters:
        - name: token
          in: query
          required: true
          description: JWT token for authentication
          schema:
            type: string
        - name: conversation_id
          in: query
          required: false
          description: Join specific conversation
          schema:
            type: string
      responses:
        '101':
          description: WebSocket connection established
        '200':
          description: Connection successful
        '401':
          $ref: '#/components/responses/Unauthorized'
  /community/stories:
    post:
      operationId: createStory
      summary: Create a new story
      description: Create a new community story with image and location details
      tags:
        - content
      security:
        - jwtAuth: []
      x-google-backend:
        address: https://community-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateStoryRequest'
      responses:
        '201':
          description: Story created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StoryResponse'
        '400':
          description: Invalid request
        '401':
          description: Unauthorized
  /community/stories/my:
    get:
      operationId: getUserStories
      summary: Get current user's stories
      description: Retrieve stories created by the authenticated user
      tags:
        - content
      security:
        - jwtAuth: []
      x-google-backend:
        address: https://community-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      responses:
        '200':
          description: List of current user's stories
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StoryListResponse'
        '401':
          description: Unauthorized
  /community/stories/{id}:
    delete:
      operationId: deleteStory
      summary: Delete a story
      description: Delete a story by ID (only by the story owner)
      tags:
        - content
      security:
        - jwtAuth: []
      x-google-backend:
        address: https://community-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
      responses:
        '204':
          description: Story deleted successfully
        '404':
          description: Story not found
  /community/stories/{id}/view:
    put:
      operationId: incrementStoryViews
      summary: Increment view count for a story
      description: Increment the view count for a specific story
      tags:
        - engagement
      security:
        - jwtAuth: []
      x-google-backend:
        address: https://community-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
      responses:
        '200':
          description: View count incremented
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ViewCountResponse'
        '404':
          description: Story not found
  /community/stories/{id}/like:
    put:
      operationId: likeStory
      summary: Like a story
      description: Like a specific story
      tags:
        - engagement
      security:
        - jwtAuth: []
      x-google-backend:
        address: https://community-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Story liked
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LikeResponse'
        '404':
          description: Story not found
    delete:
      operationId: unlikeStory
      summary: Unlike a story
      description: Remove like from a specific story
      tags:
        - engagement
      security:
        - jwtAuth: []
      x-google-backend:
        address: https://community-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Story unliked
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LikeResponse'
        '404':
          description: Story not found
  /community/stories/{id}/comments:
    post:
      operationId: addStoryComment
      summary: Add a comment to a story
      description: Add a comment to a specific story
      tags:
        - engagement
      security:
        - jwtAuth: []
      x-google-backend:
        address: https://community-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CommentRequest'
      responses:
        '201':
          description: Comment added successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CommentResponse'
        '400':
          description: Invalid request
    get:
      operationId: getStoryComments
      summary: Get comments for a story
      description: Retrieve comments for a specific story
      tags:
        - engagement
      security:
        - jwtAuth: []
      x-google-backend:
        address: https://community-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
        - in: query
          name: page
          schema:
            type: integer
            default: 1
        - in: query
          name: limit
          schema:
            type: integer
            default: 10
      responses:
        '200':
          description: List of comments
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CommentListResponse'
        '404':
          description: Story not found
  /community/reels:
    post:
      operationId: createReel
      summary: Create a new reel
      description: Create a new community reel with video and location details
      tags:
        - content
      security:
        - jwtAuth: []
      x-google-backend:
        address: https://community-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateReelRequest'
      responses:
        '201':
          description: Reel created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ReelResponse'
        '400':
          description: Invalid request
        '401':
          description: Unauthorized
  /community/reels/my:
    get:
      operationId: getUserReels
      summary: Get current user's reels
      description: Retrieve reels created by the authenticated user
      tags:
        - content
      security:
        - jwtAuth: []
      x-google-backend:
        address: https://community-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      responses:
        '200':
          description: List of current user's reels
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ReelListResponse'
        '401':
          description: Unauthorized
  /community/reels/{id}:
    delete:
      operationId: deleteReel
      summary: Delete a reel
      description: Delete a reel by ID (only by the reel owner)
      tags:
        - content
      security:
        - jwtAuth: []
      x-google-backend:
        address: https://community-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
      responses:
        '204':
          description: Reel deleted successfully
        '404':
          description: Reel not found
  /community/reels/{id}/like:
    put:
      operationId: likeReel
      summary: Like a reel
      description: Like a specific reel
      tags:
        - engagement
      security:
        - jwtAuth: []
      x-google-backend:
        address: https://community-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Reel liked
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LikeResponse'
        '404':
          description: Reel not found
    delete:
      operationId: unlikeReel
      summary: Unlike a reel
      description: Remove like from a specific reel
      tags:
        - engagement
      security:
        - jwtAuth: []
      x-google-backend:
        address: https://community-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Reel unliked
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LikeResponse'
        '404':
          description: Reel not found
  /community/reels/{id}/comments:
    post:
      operationId: addReelComment
      summary: Add a comment to a reel
      description: Add a comment to a specific reel
      tags:
        - engagement
      security:
        - jwtAuth: []
      x-google-backend:
        address: https://community-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CommentRequest'
      responses:
        '201':
          description: Comment added successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CommentResponse'
        '400':
          description: Invalid request
    get:
      operationId: getReelComments
      summary: Get comments for a reel
      description: Retrieve comments for a specific reel
      tags:
        - engagement
      security:
        - jwtAuth: []
      x-google-backend:
        address: https://community-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
        - in: query
          name: page
          schema:
            type: integer
            default: 1
        - in: query
          name: limit
          schema:
            type: integer
            default: 10
      responses:
        '200':
          description: List of comments
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CommentListResponse'
        '404':
          description: Reel not found
  /community/feed:
    get:
      operationId: getFeed
      summary: Get authenticated community feed
      description: >-
        Retrieve a personalized feed of community content for authenticated
        users
      tags:
        - content
      security:
        - jwtAuth: []
      x-google-backend:
        address: https://community-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      parameters:
        - in: query
          name: page
          schema:
            type: integer
            default: 1
        - in: query
          name: limit
          schema:
            type: integer
            default: 10
            maximum: 100
        - in: query
          name: type
          schema:
            type: string
            enum:
              - story
              - reel
        - in: query
          name: featured
          schema:
            type: boolean
            default: false
        - in: query
          name: country
          schema:
            type: string
      responses:
        '200':
          description: Authenticated community feed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FeedResponse'
        '400':
          description: Invalid request parameters
        '401':
          description: Unauthorized
  /community/public/feed:
    get:
      operationId: getPublicFeed
      summary: Get public community feed
      description: Retrieve a public feed of community content for anonymous users
      tags:
        - content
      security: []
      x-google-backend:
        address: https://community-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      parameters:
        - in: query
          name: page
          schema:
            type: integer
            default: 1
        - in: query
          name: limit
          schema:
            type: integer
            default: 10
            maximum: 100
        - in: query
          name: type
          schema:
            type: string
            enum:
              - story
              - reel
        - in: query
          name: featured
          schema:
            type: boolean
            default: false
        - in: query
          name: country
          schema:
            type: string
      responses:
        '200':
          description: Public community feed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FeedResponse'
        '400':
          description: Invalid request parameters
  /community/experiences:
    post:
      operationId: createExperience
      summary: Create a new experience
      description: Create a new local experience or tour
      tags:
        - experiences
      security:
        - jwtAuth: []
      x-google-backend:
        address: https://community-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateExperienceRequest'
      responses:
        '201':
          description: Experience created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ExperienceResponse'
        '400':
          description: Invalid request
        '401':
          description: Unauthorized
    get:
      operationId: getExperiences
      summary: List experiences
      description: Retrieve a paginated list of available experiences
      tags:
        - experiences
      security:
        - jwtAuth: []
      x-google-backend:
        address: https://community-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      parameters:
        - in: query
          name: page
          schema:
            type: integer
            default: 1
        - in: query
          name: limit
          schema:
            type: integer
            default: 10
        - in: query
          name: country
          schema:
            type: string
        - in: query
          name: max_price
          schema:
            type: number
      responses:
        '200':
          description: List of experiences
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ExperienceListResponse'
        '400':
          description: Invalid request parameters
  /experiences/{id}:
    get:
      operationId: getExperience
      summary: Get experience details
      description: Retrieve details for a specific experience
      tags:
        - experiences
      security:
        - jwtAuth: []
      x-google-backend:
        address: https://community-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Experience details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ExperienceResponse'
        '404':
          description: Experience not found
    put:
      operationId: updateExperience
      summary: Update experience
      description: Update an existing experience (only by the experience owner)
      tags:
        - experiences
      security:
        - jwtAuth: []
      x-google-backend:
        address: https://community-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateExperienceRequest'
      responses:
        '200':
          description: Experience updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ExperienceResponse'
        '404':
          description: Experience not found
    delete:
      operationId: deleteExperience
      summary: Delete experience
      description: Delete an experience (only by the experience owner)
      tags:
        - experiences
      security:
        - jwtAuth: []
      x-google-backend:
        address: https://community-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
      responses:
        '204':
          description: Experience deleted successfully
        '404':
          description: Experience not found
  /community/experiences/{id}/book:
    post:
      operationId: bookExperience
      summary: Book an experience
      description: Book a specific experience
      tags:
        - bookings
      security:
        - jwtAuth: []
      x-google-backend:
        address: https://community-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/BookExperienceRequest'
      responses:
        '201':
          description: Experience booked successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BookingResponse'
        '400':
          description: Invalid request
        '404':
          description: Experience not found
  /events:
    post:
      operationId: createEvent
      summary: Create a new event
      description: Create a new community event
      tags:
        - events
      security:
        - jwtAuth: []
      x-google-backend:
        address: https://community-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateEventRequest'
      responses:
        '201':
          description: Event created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/EventResponse'
        '400':
          description: Invalid request
        '401':
          description: Unauthorized
    get:
      operationId: getEvents
      summary: List events
      description: Retrieve a paginated list of available events
      tags:
        - events
      security:
        - jwtAuth: []
      x-google-backend:
        address: https://community-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      parameters:
        - in: query
          name: page
          schema:
            type: integer
            default: 1
        - in: query
          name: limit
          schema:
            type: integer
            default: 10
        - in: query
          name: country
          schema:
            type: string
      responses:
        '200':
          description: List of events
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/EventListResponse'
        '400':
          description: Invalid request parameters
  /community/events/{id}:
    get:
      operationId: getEvent
      summary: Get event details
      description: Retrieve details for a specific event
      tags:
        - events
      security:
        - jwtAuth: []
      x-google-backend:
        address: https://community-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Event details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/EventResponse'
        '404':
          description: Event not found
  /events/{id}/join:
    post:
      operationId: joinEvent
      summary: Join an event
      description: Join a specific event
      tags:
        - events
      security:
        - jwtAuth: []
      x-google-backend:
        address: https://community-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
      responses:
        '201':
          description: Successfully joined event
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/EventJoinResponse'
        '400':
          description: Invalid request
        '404':
          description: Event not found
  /community/guides:
    post:
      operationId: createGuide
      summary: Become a guide
      description: Create a guide profile
      tags:
        - guides
      security:
        - jwtAuth: []
      x-google-backend:
        address: https://community-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateGuideRequest'
      responses:
        '201':
          description: Guide profile created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GuideResponse'
        '400':
          description: Invalid request
        '401':
          description: Unauthorized
    get:
      operationId: getGuides
      summary: List guides
      description: Retrieve a paginated list of available guides
      tags:
        - guides
      security:
        - jwtAuth: []
      x-google-backend:
        address: https://community-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      parameters:
        - in: query
          name: page
          schema:
            type: integer
            default: 1
        - in: query
          name: limit
          schema:
            type: integer
            default: 10
        - in: query
          name: country
          schema:
            type: string
        - in: query
          name: verified
          schema:
            type: boolean
      responses:
        '200':
          description: List of guides
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GuideListResponse'
        '400':
          description: Invalid request parameters
  /guides/{id}:
    get:
      operationId: getGuide
      summary: Get guide profile
      description: Retrieve details for a specific guide
      tags:
        - guides
      security:
        - jwtAuth: []
      x-google-backend:
        address: https://community-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Guide profile
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GuideResponse'
        '404':
          description: Guide not found
  /community/travel-plans:
    post:
      operationId: createTravelPlan
      summary: Create a travel plan
      description: Create a new travel plan (draft or published)
      tags:
        - travel-plans
      security:
        - jwtAuth: []
      x-google-backend:
        address: https://community-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateTravelPlanRequest'
      responses:
        '201':
          description: Travel plan created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TravelPlanResponse'
        '400':
          description: Invalid request
        '401':
          description: Unauthorized
    get:
      operationId: getTravelPlans
      summary: Get user's travel plans
      description: Retrieve travel plans for the authenticated user
      tags:
        - travel-plans
      security:
        - jwtAuth: []
      x-google-backend:
        address: https://community-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      parameters:
        - in: query
          name: page
          schema:
            type: integer
            default: 1
        - in: query
          name: limit
          schema:
            type: integer
            default: 10
        - in: query
          name: is_draft
          schema:
            type: boolean
      responses:
        '200':
          description: List of travel plans
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TravelPlanListResponse'
        '400':
          description: Invalid request parameters
  /community/travel-plans/discover:
    get:
      operationId: getDiscoverablePlans
      summary: Discover travel plans
      description: Retrieve discoverable (published) travel plans from all users
      tags:
        - travel-plans
      security:
        - jwtAuth: []
      x-google-backend:
        address: https://community-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      parameters:
        - in: query
          name: page
          schema:
            type: integer
            default: 1
        - in: query
          name: limit
          schema:
            type: integer
            default: 10
        - in: query
          name: location
          schema:
            type: string
        - in: query
          name: is_confirmed
          schema:
            type: boolean
      responses:
        '200':
          description: List of discoverable travel plans
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TravelPlanListResponse'
        '400':
          description: Invalid request parameters
  /community/travel-plans/{id}:
    get:
      operationId: getTravelPlan
      summary: Get travel plan details
      description: Retrieve details for a specific travel plan
      tags:
        - travel-plans
      security:
        - jwtAuth: []
      x-google-backend:
        address: https://community-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Travel plan details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TravelPlanResponse'
        '404':
          description: Travel plan not found
    put:
      operationId: updateTravelPlan
      summary: Update travel plan
      description: Update an existing travel plan (only by the plan owner)
      tags:
        - travel-plans
      security:
        - jwtAuth: []
      x-google-backend:
        address: https://community-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateTravelPlanRequest'
      responses:
        '200':
          description: Travel plan updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TravelPlanResponse'
        '403':
          description: Unauthorized
        '404':
          description: Travel plan not found
    delete:
      operationId: deleteTravelPlan
      summary: Delete travel plan
      description: Delete a travel plan (only by the plan owner)
      tags:
        - travel-plans
      security:
        - jwtAuth: []
      x-google-backend:
        address: https://community-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
      responses:
        '204':
          description: Travel plan deleted successfully
        '403':
          description: Unauthorized
        '404':
          description: Travel plan not found
  /community/travel-plans/{id}/publish:
    post:
      operationId: publishTravelPlan
      summary: Publish travel plan
      description: Publish a draft travel plan (make it discoverable)
      tags:
        - travel-plans
      security:
        - jwtAuth: []
      x-google-backend:
        address: https://community-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Travel plan published successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TravelPlanResponse'
        '403':
          description: Unauthorized
        '404':
          description: Travel plan not found
  /community/travel-plans/{id}/connect:
    post:
      operationId: connectToTravelPlan
      summary: Connect to travel plan
      description: Reach out to a travel plan (express interest)
      tags:
        - travel-plans
      security:
        - jwtAuth: []
      x-google-backend:
        address: https://community-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ConnectToPlanRequest'
      responses:
        '201':
          description: Connection created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ConnectionResponse'
        '400':
          description: Invalid request
        '404':
          description: Travel plan not found
  /community/travel-plans/{id}/connections:
    get:
      operationId: getPlanConnections
      summary: Get plan connections
      description: Retrieve connections (interests) for a travel plan
      tags:
        - travel-plans
      security:
        - jwtAuth: []
      x-google-backend:
        address: https://community-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
        - in: query
          name: page
          schema:
            type: integer
            default: 1
        - in: query
          name: limit
          schema:
            type: integer
            default: 10
      responses:
        '200':
          description: List of connections
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ConnectionListResponse'
        '404':
          description: Travel plan not found
  /community/travel-plans/{id}/connections/{connectionId}:
    delete:
      operationId: removeConnection
      summary: Remove connection
      description: >-
        Remove a connection from a travel plan (by plan owner or connection
        owner)
      tags:
        - travel-plans
      security:
        - jwtAuth: []
      x-google-backend:
        address: https://community-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
        - in: path
          name: connectionId
          required: true
          schema:
            type: string
      responses:
        '204':
          description: Connection removed successfully
        '403':
          description: Unauthorized
        '404':
          description: Travel plan or connection not found
  /community/bookings/my:
    get:
      operationId: getUserBookings
      summary: Get user's bookings
      description: Retrieve bookings for the authenticated user
      tags:
        - bookings
      security:
        - jwtAuth: []
      x-google-backend:
        address: https://community-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      parameters:
        - in: query
          name: page
          schema:
            type: integer
            default: 1
        - in: query
          name: limit
          schema:
            type: integer
            default: 10
      responses:
        '200':
          description: List of user's bookings
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BookingListResponse'
        '401':
          description: Unauthorized
  /community/comments/{id}:
    put:
      operationId: updateComment
      summary: Update a comment
      description: Update a specific comment (only by the comment author)
      tags:
        - engagement
      security:
        - jwtAuth: []
      x-google-backend:
        address: https://community-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CommentRequest'
      responses:
        '200':
          description: Comment updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CommentResponse'
        '400':
          description: Invalid request
        '404':
          description: Comment not found
    delete:
      operationId: deleteComment
      summary: Delete a comment
      description: Delete a specific comment (only by the comment author)
      tags:
        - engagement
      security:
        - jwtAuth: []
      x-google-backend:
        address: https://community-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
      responses:
        '204':
          description: Comment deleted successfully
        '404':
          description: Comment not found
  /verifications:
    get:
      operationId: listMyVerifications
      summary: Get user's verification history
      description: Get current user's verification submissions
      tags:
        - verification
      security:
        - jwtAuth: []
      x-google-backend:
        address: https://verification-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      parameters:
        - name: limit
          in: query
          description: Number of results to return
          required: false
          schema:
            type: integer
            minimum: 1
            maximum: 50
            default: 10
        - name: offset
          in: query
          description: Number of results to skip
          required: false
          schema:
            type: integer
            minimum: 0
            default: 0
      responses:
        '200':
          description: Verification history retrieved successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/APIResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/VerificationListResponse'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/APIResponse'
  /verifications/facematch:
    post:
      operationId: submitFacematchVerification
      summary: Submit facematch verification request
      description: >
        Submit facematch verification with ID document and selfie photos.


        **Language Support**: Include `Accept-Language` header to receive
        localized responses:

        - `en` or `en-US` for English (default)

        - `fr` or `fr-FR` for French

        - `es` or `es-ES` for Spanish


        Example: `Accept-Language: fr-FR,fr;q=0.9,en;q=0.8`
      tags:
        - verification
      security:
        - jwtAuth: []
      x-google-backend:
        address: https://verification-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      parameters:
        - name: Accept-Language
          in: header
          required: false
          description: Preferred language for response messages
          schema:
            type: string
            default: en
            enum:
              - en
              - en-US
              - fr
              - fr-FR
              - es
              - es-ES
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/FacematchSubmissionRequest'
      responses:
        '200':
          description: Facematch verification submitted successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/APIResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/VerificationSubmissionResponse'
        '400':
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/APIResponse'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/APIResponse'
  /verifications/location:
    post:
      operationId: submitLocationVerification
      summary: Submit location verification request
      description: >
        Submit location verification with GPS coordinates.


        **Language Support**: Include `Accept-Language` header to receive
        localized responses:

        - `en` or `en-US` for English (default)

        - `fr` or `fr-FR` for French

        - `es` or `es-ES` for Spanish


        Example: `Accept-Language: fr-FR,fr;q=0.9,en;q=0.8`
      tags:
        - verification
      security:
        - jwtAuth: []
      x-google-backend:
        address: https://verification-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      parameters:
        - name: Accept-Language
          in: header
          required: false
          description: Preferred language for response messages
          schema:
            type: string
            default: en
            enum:
              - en
              - en-US
              - fr
              - fr-FR
              - es
              - es-ES
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/LocationSubmissionRequest'
      responses:
        '200':
          description: Location verification submitted successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/APIResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/VerificationSubmissionResponse'
        '400':
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/APIResponse'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/APIResponse'
  /verifications/background:
    post:
      operationId: submitBackgroundVerification
      summary: Submit background verification request
      description: >
        Submit background verification request. Background checks typically use
        external services that handle document collection.


        **Language Support**: Include `Accept-Language` header to receive
        localized responses:

        - `en` or `en-US` for English (default)

        - `fr` or `fr-FR` for French

        - `es` or `es-ES` for Spanish


        Example: `Accept-Language: fr-FR,fr;q=0.9,en;q=0.8`
      tags:
        - verification
      security:
        - jwtAuth: []
      x-google-backend:
        address: https://verification-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      parameters:
        - name: Accept-Language
          in: header
          required: false
          description: Preferred language for response messages
          schema:
            type: string
            default: en
            enum:
              - en
              - en-US
              - fr
              - fr-FR
              - es
              - es-ES
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/BackgroundSubmissionRequest'
      responses:
        '200':
          description: Background verification submitted successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/APIResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/VerificationSubmissionResponse'
        '400':
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/APIResponse'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/APIResponse'
  /verifications/voice:
    post:
      operationId: submitVoiceVerification
      summary: Submit voice verification request
      description: >
        Submit voice verification with audio file for voice biometrics.


        **Language Support**: Include `Accept-Language` header to receive
        localized responses:

        - `en` or `en-US` for English (default)

        - `fr` or `fr-FR` for French

        - `es` or `es-ES` for Spanish


        Example: `Accept-Language: fr-FR,fr;q=0.9,en;q=0.8`
      tags:
        - verification
      security:
        - jwtAuth: []
      x-google-backend:
        address: https://verification-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      parameters:
        - name: Accept-Language
          in: header
          required: false
          description: Preferred language for response messages
          schema:
            type: string
            default: en
            enum:
              - en
              - en-US
              - fr
              - fr-FR
              - es
              - es-ES
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/VoiceSubmissionRequest'
      responses:
        '200':
          description: Voice verification submitted successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/APIResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/VerificationSubmissionResponse'
        '400':
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/APIResponse'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/APIResponse'
  /verifications/{verification_id}:
    get:
      operationId: getVerification
      summary: Get verification details
      description: Get verification details by ID
      tags:
        - verification
      security:
        - jwtAuth: []
      x-google-backend:
        address: https://verification-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      parameters:
        - name: verification_id
          in: path
          required: true
          description: Verification ID
          schema:
            type: string
      responses:
        '200':
          description: Verification details retrieved successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/APIResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/VerificationStatusResponse'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/APIResponse'
        '403':
          description: Access denied
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/APIResponse'
        '404':
          description: Verification not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/APIResponse'
  /verifications/{verification_id}/results:
    get:
      operationId: getVerificationResults
      summary: Get verification AI results
      description: Get AI validation results for a verification
      tags:
        - verification
      security:
        - jwtAuth: []
      x-google-backend:
        address: https://verification-service-981292602655.us-central1.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      parameters:
        - name: verification_id
          in: path
          required: true
          description: Verification ID
          schema:
            type: string
      responses:
        '200':
          description: Verification results retrieved successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/APIResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/VerificationResultResponse'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/APIResponse'
        '403':
          description: Access denied
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/APIResponse'
        '404':
          description: Verification not found or results not available
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/APIResponse'
components:
  schemas:
    EnhancedProfileUpdateRequest:
      type: object
      properties:
        basic_info:
          type: object
          properties:
            first_name:
              type: string
              maxLength: 50
            last_name:
              type: string
              maxLength: 50
            bio:
              type: string
              maxLength: 500
            avatar_url:
              type: string
              format: uri
            birthday:
              type: string
              format: date-time
            age_range:
              type: string
              enum:
                - '18_24'
                - '25_34'
                - '35_44'
                - '45_54'
                - '55_64'
                - 65_plus
            gender:
              type: string
              enum:
                - male
                - female
                - lgbtq
                - other
                - prefer_not_to_say
            city:
              type: string
              maxLength: 100
            country:
              type: string
              maxLength: 100
            occupation:
              type: string
              maxLength: 100
        lifestyle:
          type: object
          properties:
            sleep_schedule:
              type: string
              enum:
                - early_bird
                - night_owl
                - flexible
                - varies
            social_style:
              type: string
              enum:
                - social_butterfly
                - prefer_quiet
                - balanced
                - depends_on_mood
            smoking_preference:
              type: string
              enum:
                - non_smoker
                - occasional_smoker
                - regular_smoker
                - vaping_only
                - no_preference
        travel_experience:
          type: object
          properties:
            amazing_experience:
              type: string
              maxLength: 500
            countries_visited:
              type: array
              items:
                type: string
                maxLength: 50
              maxItems: 50
            last_country_visited:
              type: string
              maxLength: 50
            travel_frequency:
              type: string
              enum:
                - weekly
                - monthly
                - quarterly
                - yearly
                - rarely
        interests_hobbies:
          type: object
          properties:
            hobbies:
              type: array
              items:
                type: string
                maxLength: 50
              maxItems: 10
            interests:
              type: array
              items:
                type: string
                maxLength: 50
              maxItems: 10
            languages_spoken:
              type: array
              items:
                type: string
                maxLength: 30
              maxItems: 10
            languages_learning:
              type: array
              items:
                type: string
                maxLength: 30
              maxItems: 10
        personal:
          type: object
          properties:
            fun_fact:
              type: string
              maxLength: 300
            why_host_travel:
              type: string
              maxLength: 500
        hosting_preferences:
          type: object
          properties:
            preferred_guest_age_range:
              type: array
              items:
                type: string
                enum:
                  - '18_24'
                  - '25_34'
                  - '35_44'
                  - '45_54'
                  - '55_64'
                  - 65_plus
            accepts_pets:
              type: boolean
            house_rules:
              type: array
              items:
                type: string
                maxLength: 100
              maxItems: 10
            space_type:
              type: string
              enum:
                - private_room
                - shared_room
                - entire_place
                - common_area
        address:
          type: object
          properties:
            street:
              type: string
            city:
              type: string
            state:
              type: string
            postal_code:
              type: string
            country:
              type: string
            coordinates:
              type: object
              properties:
                latitude:
                  type: number
                longitude:
                  type: number
    EnhancedUserProfileResponse:
      type: object
      properties:
        success:
          type: boolean
          example: true
        data:
          type: object
          properties:
            id:
              type: string
            has_listing:
              type: boolean
              description: Whether the user has any active listings (is a host)
              example: true
            basic_info:
              type: object
              properties:
                first_name:
                  type: string
                last_name:
                  type: string
                email:
                  type: string
                  format: email
                phone:
                  type: string
                avatar_url:
                  type: string
                  format: uri
                bio:
                  type: string
                birthday:
                  type: string
                  format: date-time
                age_range:
                  type: string
                gender:
                  type: string
                city:
                  type: string
                country:
                  type: string
                occupation:
                  type: string
                registration_method:
                  type: string
            lifestyle:
              type: object
              properties:
                sleep_schedule:
                  type: string
                social_style:
                  type: string
                smoking_preference:
                  type: string
            travel_experience:
              type: object
              properties:
                amazing_experience:
                  type: string
                countries_visited:
                  type: array
                  items:
                    type: string
                last_country_visited:
                  type: string
                travel_frequency:
                  type: string
            interests_hobbies:
              type: object
              properties:
                hobbies:
                  type: array
                  items:
                    type: string
                interests:
                  type: array
                  items:
                    type: string
                languages_spoken:
                  type: array
                  items:
                    type: string
                languages_learning:
                  type: array
                  items:
                    type: string
            personal:
              type: object
              properties:
                fun_fact:
                  type: string
                why_host_travel:
                  type: string
            hosting_preferences:
              type: object
              properties:
                preferred_guest_age_range:
                  type: array
                  items:
                    type: string
                accepts_pets:
                  type: boolean
                house_rules:
                  type: array
                  items:
                    type: string
                space_type:
                  type: string
            address:
              type: object
            contacts:
              type: array
              items:
                type: object
            verifications:
              type: array
              description: List of user verification records
              items:
                type: object
                properties:
                  type:
                    type: string
                    description: Type of verification
                    enum:
                      - facematch
                      - background
                      - location
                      - voice
                      - livevideo
                      - pose
                      - peer
                    example: facematch
                  timestamp:
                    type: string
                    format: date-time
                    description: When this verification was created/updated
                    example: '2025-01-01T00:00:00Z'
                  status:
                    type: string
                    description: Current verification status
                    enum:
                      - pending
                      - approved
                      - rejected
                      - not_started
                    example: approved
                  expires_at:
                    type: string
                    format: date-time
                    description: When this verification expires (optional)
                    nullable: true
            badges:
              type: object
              properties:
                earned_badges:
                  type: array
                  items:
                    type: object
                badge_counts:
                  type: object
            events:
              type: array
              items:
                type: object
            system_info:
              type: object
              properties:
                fcm_token:
                  type: string
                status:
                  type: string
                deleted:
                  type: boolean
                deleted_at:
                  type: string
                  format: date-time
                roles:
                  type: array
                  items:
                    type: string
                created_at:
                  type: string
                  format: date-time
                updated_at:
                  type: string
                  format: date-time
        toast:
          type: string
          example: Enhanced user profile retrieved successfully.
        error:
          type: string
      required:
        - success
        - data
    UserDeletionResponse:
      type: object
      description: Successful user deletion request response
      properties:
        success:
          type: boolean
          example: true
        toast:
          type: string
          example: >-
            Deletion request submitted successfully. You will be contacted via
            email.
        data:
          type: object
          properties:
            request_id:
              type: string
              description: Unique ID for tracking the deletion request
              example: del_req_abc123xyz
            submitted_at:
              type: string
              format: date-time
              example: '2025-12-02T10:30:00Z'
          required:
            - request_id
            - submitted_at
        error:
          type: string
      required:
        - success
        - toast
        - data
    UserDeletionValidationError:
      type: object
      description: User deletion validation error response
      properties:
        success:
          type: boolean
          example: false
        error:
          type: string
          example: Cannot delete account due to active bookings or pending payments
        toast:
          type: string
          example: >-
            Your account cannot be deleted at this time. Please resolve the
            issues below.
        data:
          type: object
          properties:
            errors:
              type: array
              description: Blocking errors that prevent deletion
              items:
                type: object
                properties:
                  code:
                    type: string
                    enum:
                      - active_bookings
                      - upcoming_bookings
                      - pending_payments
                      - active_listings
                      - pending_verifications
                    example: active_bookings
                  message:
                    type: string
                    example: 'Cannot delete account: You have 2 active bookings'
                  details:
                    type: object
                    description: Additional context (booking IDs, counts, etc.)
                    additionalProperties: true
                required:
                  - code
                  - message
            warnings:
              type: array
              description: Non-blocking warnings (informational)
              items:
                type: object
                properties:
                  code:
                    type: string
                    example: account_age
                  message:
                    type: string
                    example: Account is less than 30 days old
                  details:
                    type: object
                    additionalProperties: true
                required:
                  - code
                  - message
          required:
            - errors
            - warnings
      required:
        - success
        - error
        - toast
        - data
    Listing:
      type: object
      properties:
        id:
          type: string
        title:
          type: string
          maxLength: 64
        description:
          type: string
        verified:
          type: boolean
          description: Indicates if the listing has been verified
        deleted_at:
          type: string
          format: date-time
          nullable: true
          description: Timestamp when listing was soft deleted
        status:
          type: string
          description: Current status of the listing
          enum:
            - draft
            - pending
            - active
            - paused
            - archived
            - deleted
        location:
          type: object
          properties:
            latitude:
              type: number
              format: double
            longitude:
              type: number
              format: double
        price:
          type: number
          format: double
        available:
          type: boolean
        thumbnail:
          type: string
          format: uri
        distance:
          type: number
          format: double
        created_at:
          type: string
          format: date-time
        max_guests:
          type: integer
          format: int32
        rating:
          type: number
          format: double
        view_count:
          type: integer
          format: int64
          description: Number of times the listing has been viewed
        instant_book:
          type: boolean
        active:
          type: boolean
        amenities:
          type: array
          items:
            type: string
        cancellation_policy:
          type: string
        category:
          type: object
          properties:
            name:
              type: string
            code:
              type: string
            description:
              type: string
        photos:
          type: array
          items:
            type: string
            format: uri
        host:
          type: object
        house_rules:
          type: array
          items:
            type: string
        updated_at:
          type: string
          format: date-time
        accept_same_day_booking:
          type: boolean
          description: >
            Allows same-day bookings (check-in and check-out on same date,
            different times).

            Default: false (opt-in model).
      required:
        - id
        - title
        - description
        - status
        - location
        - price
        - thumbnail
        - created_at
        - max_guests
        - instant_book
        - amenities
        - cancellation_policy
        - category
        - photos
        - host
        - house_rules
        - updated_at
    ErrorResponse:
      type: object
      required:
        - success
        - error
      properties:
        success:
          type: boolean
          example: false
          description: Indicates if the request was successful.
        error:
          type: object
          required:
            - code
            - message
          properties:
            code:
              type: string
              description: Error code
              example: VALIDATION_ERROR
            message:
              type: string
              description: Human-readable error message
              example: Invalid request parameters
            details:
              type: object
              description: Additional error details
            timestamp:
              type: string
              format: date-time
              description: When the error occurred
          description: Error message describing the failure.
          example: Failed to parse request body
        message:
          type: string
          description: User-friendly error message
          example: Please check your input and try again
        toast:
          type: string
          description: Optional toast message for the client UI.
          example: Please check your input and try again.
      description: Standard error response model for failed requests.
    LocationSearchResult:
      type: object
      properties:
        id:
          type: string
        name:
          type: string
        country:
          type: string
        country_code:
          type: string
        type:
          type: string
          enum:
            - city
            - country
            - region
        latitude:
          type: number
          format: double
        longitude:
          type: number
          format: double
        popularity_score:
          type: number
          format: double
      required:
        - id
        - name
        - country
        - country_code
        - type
    PopularLocations:
      type: object
      properties:
        destinations:
          type: array
          items:
            $ref: '#/components/schemas/LocationSearchResult'
        countries:
          type: array
          items:
            $ref: '#/components/schemas/LocationSearchResult'
      required:
        - destinations
        - countries
    DetectedLocation:
      type: object
      properties:
        city:
          type: string
        country:
          type: string
        country_code:
          type: string
        region:
          type: string
        latitude:
          type: number
          format: double
        longitude:
          type: number
          format: double
        accuracy:
          type: string
          enum:
            - high
            - medium
            - low
        confidence_score:
          type: number
          format: double
          minimum: 0
          maximum: 1
      required:
        - city
        - country
        - country_code
        - latitude
        - longitude
        - accuracy
    ApiResponseAvailabilityCalendar:
      type: object
      description: Standard API response for listing availability calendar.
      properties:
        success:
          type: boolean
          description: Indicates if the request was successful.
          example: true
        data:
          $ref: '#/components/schemas/AvailabilityCalendar'
        error:
          type: string
          description: Error message if request failed.
          example: ''
        toast:
          type: string
          description: Optional toast message for the client UI.
          example: ''
      required:
        - success
        - data
    AvailabilityCalendar:
      type: object
      description: Listing availability calendar data.
      properties:
        listing_id:
          type: string
          description: Listing ID
          example: listing123
        start_date:
          type: string
          format: date
          description: Start date of the availability check
          example: '2024-01-01'
        end_date:
          type: string
          format: date
          description: End date of the availability check
          example: '2024-03-01'
        unavailable_dates:
          type: array
          items:
            type: string
            format: date
          description: List of unavailable dates (YYYY-MM-DD format)
          example:
            - '2024-01-15'
            - '2024-01-16'
            - '2024-02-10'
      required:
        - listing_id
        - start_date
        - end_date
        - unavailable_dates
    ApiResponseBookings:
      type: object
      description: Standard API response for multiple bookings.
      properties:
        success:
          type: boolean
          description: Indicates if the request was successful.
          example: true
        data:
          type: array
          items:
            $ref: '#/components/schemas/Booking'
          description: Array of booking objects.
        error:
          type: string
          description: Error message if request failed.
          example: ''
        toast:
          type: string
          description: Optional toast message for the client UI.
          example: Draft bookings retrieved successfully
      required:
        - success
        - data
    ApiResponseBooking:
      type: object
      properties:
        success:
          type: boolean
          example: true
        data:
          type: object
          allOf:
            - $ref: '#/components/schemas/Booking'
          nullable: true
        toast:
          type: string
          example: Booking processed successfully.
        error:
          type: string
          example: ''
      required:
        - success
        - data
    Booking:
      type: object
      properties:
        id:
          type: string
          example: bkg_001
        booking_code:
          type: string
          description: Human-friendly booking code (e.g., CR-8J3K2P)
          example: CR-8J3K2P
        listing:
          $ref: '#/components/schemas/ListingInfo'
        guest:
          $ref: '#/components/schemas/User'
        host:
          $ref: '#/components/schemas/User'
        check_in:
          type: string
          format: date-time
        check_out:
          type: string
          format: date-time
        rate:
          type: number
          format: float
          example: 9.99
        amount:
          type: number
          format: float
          example: 49.99
        currency:
          type: string
          example: USD
        rating:
          type: number
          format: float
          example: 4.5
        days:
          type: integer
          example: 4
        payment_id:
          type: string
          example: pay_001
        payment_intent_id:
          type: string
          description: Stripe payment intent ID (for draft bookings)
          example: pi_1234567890
        status:
          type: string
          enum:
            - draft
            - pending
            - accepted
            - rejected
            - cancelled
            - unpaid
            - confirmed
            - completed
          description: >
            Booking status lifecycle:

            - draft: Draft booking before payment intent creation

            - pending: Initial status when booking is created/finalized
            (non-instant, waiting for host)

            - accepted: Payment can proceed (instant booking or host-approved
            non-instant booking)

            - rejected: Host has declined the booking request

            - cancelled: Booking cancelled by guest or host

            - unpaid: Payment required but not completed (payment failed,
            canceled, or requires action)

            - confirmed: Payment successful, booking is active

            - completed: Booking period ended, final payment processing
            triggered
          example: draft
        status_text:
          type: string
          description: Localized, human-readable status text for display in UI
          example: Confirmed
        guests:
          type: integer
          example: 2
        notes:
          type: string
          example: Guest arriving late.
        rejection_message:
          type: string
          description: Host's message when rejecting the booking
          example: This booking doesn't work for my schedule.
        rejection_reason:
          type: string
          description: Host's reason for rejecting the booking
          enum:
            - Listing is no longer available
            - Going on vacation
            - Traveling for work
            - Guest is not a good fit
            - Other
          example: Going on vacation
        cancelled_by:
          type: string
          description: Who cancelled the booking
          enum:
            - GUEST
            - HOST
            - SYSTEM
          example: GUEST
        cancellation_reason:
          type: string
          description: Reason for cancellation
          example: change_of_plans
        cancelled_at:
          type: string
          format: date-time
          description: When the booking was cancelled
          example: '2025-09-02T12:00:00Z'
        created_at:
          type: string
          format: date-time
          example: '2025-09-02T12:00:00Z'
        time_zone:
          type: string
          example: America/New_York
        cancellation_policy:
          type: string
          example: Flexible
        discount_code:
          type: string
          example: SUMMER25
        guest_review_listing:
          type: boolean
          description: Whether the guest has reviewed the listing
        guest_review_host:
          type: boolean
          description: Whether the guest has reviewed the host
        host_review_guest:
          type: boolean
          description: Whether the host has reviewed the guest
        review_edit_deadline:
          type: string
          format: date-time
          description: Deadline for editing reviews
        review_create_deadline:
          type: string
          format: date-time
          description: Deadline for submitting reviews
        cancel_after:
          type: string
          format: date-time
          description: >-
            Timestamp when pending booking should be auto-cancelled if no host
            response
          example: '2025-09-02T14:00:00Z'
      required:
        - id
        - listing
        - guest
        - host
        - check_in
        - check_out
    User:
      type: object
      properties:
        id:
          type: string
        name:
          type: string
        avatar:
          type: string
      required:
        - id
        - name
        - avatar
    ListingInfo:
      type: object
      properties:
        id:
          type: string
        title:
          type: string
        address:
          type: string
        check_in_instructions:
          type: string
          description: Instructions for check-in (post-booking)
        check_out_instructions:
          type: string
          description: Instructions for check-out (post-booking)
        wifi_details:
          $ref: '#/components/schemas/WifiDetail'
        emergency_contact:
          type: string
          description: Emergency contact information for the listing
        local_recommendations:
          type: string
          description: Local recommendations and tips for guests
        thumbnail:
          type: string
          example: https://img.com/listing_123_space.jpg
        currency:
          type: string
          example: USD
        latitude:
          type: number
          format: float
          nullable: true
          description: Latitude coordinate of the listing location
        longitude:
          type: number
          format: float
          nullable: true
          description: Longitude coordinate of the listing location
        city:
          type: string
          description: City where the listing is located
        country:
          type: string
          description: Country where the listing is located
        province:
          type: string
          description: Province/state where the listing is located
        flag:
          type: string
          description: Country flag emoji
        category_code:
          type: string
          description: Listing category code
        category_name:
          type: string
          description: Listing category name
        timezone:
          type: string
          example: America/Toronto
          description: Timezone of the listing location
        instant_book:
          type: boolean
          description: Whether the listing allows instant booking
        base_rate:
          type: number
          format: float
          description: Original listing price per night at booking time
      required:
        - id
        - title
        - address
        - thumbnail
    WifiDetail:
      type: object
      properties:
        network_name:
          type: string
        password:
          type: string
        notes:
          type: string
    BookingsSplitResponse:
      type: object
      properties:
        success:
          type: boolean
          example: true
        upcoming:
          type: array
          items:
            $ref: '#/components/schemas/Booking'
        past:
          type: array
          items:
            $ref: '#/components/schemas/Booking'
        pagination:
          type: object
          properties:
            page:
              type: integer
              example: 1
            limit:
              type: integer
              example: 10
            total:
              type: integer
              example: 25
            pages:
              type: integer
              example: 3
          required:
            - page
            - limit
            - total
            - pages
        toast:
          type: string
          example: Bookings fetched
        error:
          type: string
          example: ''
      required:
        - success
        - upcoming
        - past
        - pagination
    BookingRequest:
      type: object
      properties:
        listing_id:
          type: string
        guest_id:
          type: string
        check_in:
          type: string
          format: date-time
        check_out:
          type: string
          format: date-time
        guests:
          type: integer
        payment_id:
          type: string
        notes:
          type: string
        referral_code:
          type: string
        promo_code:
          type: string
        space_type:
          type: string
          enum:
            - couchsurf
            - workspace
            - storage
            - shower
            - parking
          description: Type of space being booked
        duration_type:
          type: string
          enum:
            - hours
            - days
            - weeks
            - minutes
          description: Duration unit for the booking
        duration_value:
          type: integer
          description: Duration value (e.g., 2 hours, 3 days, 1 week)
        deviceInfo:
          type: object
          properties:
            device_id:
              type: string
            device_type:
              type: string
            os_version:
              type: string
            app_version:
              type: string
      required:
        - listing_id
        - guest_id
        - check_in
        - check_out
        - guests
    InitiateBookingRequest:
      type: object
      description: >-
        Minimal payload to initiate a draft booking. All fields except
        listing_id are optional to allow progressive booking flow.
      properties:
        listing_id:
          type: string
          description: ID of the listing to book
          example: lst_123456
        category:
          type: string
          description: Optional category code for filtering/follow-up purposes
          enum:
            - couchsurf
            - workspace
            - storage
            - shower
            - parking
          example: couchsurf
        check_in:
          type: string
          format: date-time
          description: >-
            Optional check-in date and time. If provided, will be stored in
            draft booking.
          example: '2025-09-15T14:00:00Z'
        check_out:
          type: string
          format: date-time
          description: >-
            Optional check-out date and time. If provided, will be stored in
            draft booking.
          example: '2025-09-18T11:00:00Z'
        guests:
          type: integer
          minimum: 1
          description: >-
            Optional number of guests. If provided, will be stored in draft
            booking.
          example: 2
        notes:
          type: string
          description: >-
            Optional message from guest to host. If provided, will be stored in
            draft booking.
          example: >-
            Hi, I'm looking forward to staying at your place! I have a couple of
            questions about parking.
      required:
        - listing_id
    FinalizeBookingRequest:
      type: object
      description: Full booking details to finalize a draft booking
      properties:
        check_in:
          type: string
          format: date-time
          description: Check-in date and time
          example: '2025-09-15T14:00:00Z'
        check_out:
          type: string
          format: date-time
          description: Check-out date and time
          example: '2025-09-18T11:00:00Z'
        guests:
          type: integer
          minimum: 1
          description: Number of guests
          example: 2
        payment_intent_id:
          type: string
          description: >-
            Stripe payment intent ID. Used to verify/charge the payment. Actual
            payment confirmation happens via Stripe webhook.
          example: pi_1234567890
        notes:
          type: string
          description: Optional notes for the booking
          example: Arriving late, will be there around 6 PM
      required:
        - check_in
        - check_out
        - guests
        - payment_intent_id
    GuestCancellationReason:
      type: string
      description: Reason code for guest-initiated cancellations
      enum:
        - change_of_plans
        - accidental_booking
        - travel_issue
        - price_or_payment_issue
        - health_or_emergency
        - other
      example: change_of_plans
    HostCancellationReason:
      type: string
      description: Reason code for host-initiated cancellations
      enum:
        - guest_asked_to_cancel
        - guest_no_show
        - guest_payment_issue
        - property_issue
        - host_schedule_issue
        - safety_or_comfort_concern
        - other
      example: guest_asked_to_cancel
    CancelBookingRequest:
      type: object
      description: Request body for cancelling a booking
      properties:
        actor:
          type: string
          enum:
            - guest
            - host
          description: Who is cancelling the booking
          example: guest
        reason:
          oneOf:
            - $ref: '#/components/schemas/GuestCancellationReason'
            - $ref: '#/components/schemas/HostCancellationReason'
          description: Cancellation reason code (must match actor type)
          example: change_of_plans
      required:
        - actor
        - reason
    PricingRates:
      type: object
      description: Pricing rates for a specific region
      properties:
        service_fee_rate:
          type: number
          format: float
          description: Service fee rate as decimal (0.10 = 10%)
          example: 0.1
        tax_rate:
          type: number
          format: float
          description: Tax rate as decimal (0.08 = 8%)
          example: 0.08
      required:
        - service_fee_rate
        - tax_rate
    PricingBreakdownRequest:
      type: object
      description: Request for pricing calculation
      properties:
        subtotal:
          type: number
          format: float
          description: Base price before fees and taxes
          example: 100
        region_code:
          type: string
          description: ISO country code for regional pricing
          default: US
          example: CA
      required:
        - subtotal
    PricingBreakdown:
      type: object
      description: Complete pricing breakdown with fees and taxes
      properties:
        subtotal:
          type: number
          format: float
          description: Base price before fees
          example: 100
        service_fee:
          type: number
          format: float
          description: Service fee amount
          example: 10
        taxes:
          type: number
          format: float
          description: Tax amount
          example: 8
        total:
          type: number
          format: float
          description: Total amount including all fees
          example: 118
        service_fee_rate:
          type: number
          format: float
          description: Service fee rate used in calculation
          example: 0.1
        tax_rate:
          type: number
          format: float
          description: Tax rate used in calculation
          example: 0.08
      required:
        - subtotal
        - service_fee
        - taxes
        - total
        - service_fee_rate
        - tax_rate
    PublicReview:
      type: object
      description: Public review information for display (minimal, user-facing)
      properties:
        id:
          type: string
          description: Unique review identifier
        comment:
          type: string
          description: Review text
        emoji_sentiment:
          type: string
          description: Emoji sentiment (, , )
        overall_rating:
          type: number
          description: Overall rating score
        metrics:
          type: object
          description: Individual rating metrics (cleanliness, location, etc.)
          additionalProperties: true
        created_at:
          type: string
          format: date-time
          description: When the review was created
        edit_deadline:
          type: string
          format: date-time
          description: Deadline for editing this review (null if not editable)
        reviewer:
          type: object
          description: Person who wrote the review
          properties:
            id:
              type: string
            name:
              type: string
            avatar:
              type: string
          required:
            - id
            - name
        listing:
          type: object
          description: Listing being reviewed (for listing reviews only)
          properties:
            id:
              type: string
            title:
              type: string
            thumbnail:
              type: string
        guest_review_listing:
          type: boolean
          description: Whether the guest has reviewed the listing
        guest_review_host:
          type: boolean
          description: Whether the guest has reviewed the host
        host_review_guest:
          type: boolean
          description: Whether the host has reviewed the guest
      required:
        - id
        - overall_rating
        - metrics
        - created_at
        - reviewer
    Review:
      type: object
      properties:
        id:
          type: string
        author:
          type: string
          description: The user writing the review
        target:
          type: string
          description: The user or listing being reviewed
        type:
          type: string
          enum:
            - user
            - listing
          description: Type of entity being reviewed
        category:
          type: string
        overall_rating:
          type: number
        comment:
          type: string
        emoji_sentiment:
          type: string
        metrics:
          type: object
          additionalProperties: true
        booking_id:
          type: string
        listing:
          type: object
          description: Embedded listing object from booking
          properties:
            id:
              type: string
            title:
              type: string
            address:
              type: string
            thumbnail:
              type: string
        guest:
          type: object
          description: Embedded guest object from booking
          properties:
            id:
              type: string
            name:
              type: string
            avatar:
              type: string
            created_at:
              type: string
              format: date-time
        host:
          type: object
          description: Embedded host object from booking
          properties:
            id:
              type: string
            name:
              type: string
            avatar:
              type: string
            created_at:
              type: string
              format: date-time
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time
        edit_deadline:
          type: string
          format: date-time
          description: Deadline for editing this review (based on config period)
        status:
          type: string
        version:
          type: integer
        edit_history:
          type: array
          items:
            $ref: '#/components/schemas/ReviewEdit'
        guest_review_listing:
          type: boolean
          description: Whether the guest has reviewed the listing
        guest_review_host:
          type: boolean
          description: Whether the guest has reviewed the host
        host_review_guest:
          type: boolean
          description: Whether the host has reviewed the guest
      required:
        - id
        - author
        - target
        - type
        - metrics
        - created_at
        - updated_at
        - status
        - version
        - edit_history
    GuestReviewSpaceMetrics:
      type: object
      required:
        - cleanliness
        - check_in
        - accuracy
        - location
        - value
      properties:
        cleanliness:
          type: number
        check_in:
          type: number
        accuracy:
          type: number
        location:
          type: number
        value:
          type: number
    GuestReviewHostMetrics:
      type: object
      required:
        - hospitality
        - communication
        - cleanliness
        - respectfulness
        - would_visit_again
      properties:
        hospitality:
          type: number
        communication:
          type: number
        cleanliness:
          type: number
        respectfulness:
          type: number
        would_visit_again:
          type: boolean
    HostReviewGuestMetrics:
      type: object
      required:
        - communication
        - cleanliness
        - respectfulness
        - would_host_again
      properties:
        communication:
          type: number
        cleanliness:
          type: number
        respectfulness:
          type: number
        would_host_again:
          type: boolean
    ReviewRequest:
      type: object
      required:
        - booking_id
        - type
        - metrics
      properties:
        booking_id:
          type: string
          description: >-
            Associated booking ID (server will use this to infer
            author/target/context)
        type:
          type: string
          enum:
            - user
            - listing
          description: >-
            Type of entity being reviewed (guest_to_host is represented by
            'user', guest_to_listing by 'listing')
        comment:
          type: string
          maxLength: 1000
          description: Optional textual comment for the review
        emoji_sentiment:
          type: string
          enum:
            - 
            - 
            - 
          description: Optional emoji sentiment for the review
        metrics:
          description: >-
            Category-specific numeric metrics (server will validate based on
            inferred context)
          oneOf:
            - $ref: '#/components/schemas/GuestReviewSpaceMetrics'
            - $ref: '#/components/schemas/GuestReviewHostMetrics'
            - $ref: '#/components/schemas/HostReviewGuestMetrics'
    ReviewUpdateRequest:
      type: object
      properties:
        comment:
          type: string
          maxLength: 1000
        emoji_sentiment:
          type: string
          enum:
            - 
            - 
            - 
        metrics:
          type: object
          description: Category-specific metrics (flexible)
          additionalProperties: true
    ReviewEdit:
      type: object
      properties:
        version:
          type: integer
        updated_at:
          type: string
          format: date-time
        changes:
          type: object
          additionalProperties: true
      required:
        - version
        - updated_at
        - changes
    ReportReviewRequest:
      type: object
      required:
        - reason
        - reported_by
      properties:
        reason:
          type: string
          enum:
            - INAPPROPRIATE
            - MISLEADING
            - SPAM
            - OFFENSIVE
            - OTHER
        details:
          type: string
          maxLength: 500
          description: Additional details about the report
        reported_by:
          type: string
          description: User ID of the person reporting the review
    ReviewResponseRequest:
      type: object
      required:
        - comment
      properties:
        comment:
          type: string
          maxLength: 1000
          description: The response text
    ReviewCreatedResponse:
      type: object
      properties:
        success:
          type: boolean
        error:
          type: string
        toast:
          type: string
        data:
          type: object
          properties:
            id:
              type: string
              description: The unique ID of the created review
            status:
              type: string
              enum:
                - pending
              description: Review status (always pending for new reviews)
            booking_id:
              type: string
              description: Associated booking ID
          required:
            - id
            - status
            - booking_id
      required:
        - success
        - toast
      example:
        success: true
        toast: Review submitted and pending approval
        data:
          id: PCNpbQVwyxMiQQpqDz6v
          status: pending
          booking_id: E41MrpBF295EmoYdkIiF
    APIResponse:
      type: object
      properties:
        success:
          type: boolean
          description: Whether the request was successful
          example: true
        error:
          type: string
          description: Error message if request failed (localized)
          example: ''
        toast:
          type: string
          description: >-
            User-friendly message for display (localized based on
            Accept-Language header)
          example: Wishlist updated successfully.
        data:
          type: object
          description: Response data
          items:
            type: object
            properties:
              tag:
                type: string
                example: vegas
              listings:
                type: array
                items:
                  type: object
                  properties:
                    listing_id:
                      type: string
                    thumbnail:
                      type: string
                      format: uri
                    title:
                      type: string
                      description: Optional listing title preview
                    location:
                      type: object
                      description: Optional location preview
                      properties:
                        city:
                          type: string
                        country:
                          type: string
                    price:
                      type: number
                      format: float
                      description: Optional price preview (per night)
                    rating:
                      type: number
                      format: float
                      description: Optional rating preview
                  required:
                    - listing_id
          oneOf:
            - $ref: '#/components/schemas/PublicReview'
            - type: array
              items:
                $ref: '#/components/schemas/PublicReview'
      required:
        - success
        - data
      example:
        success: true
        toast: Verification submitted successfully
        data:
          '0':
            id: rvw_123
            comment: Great place! Very clean and exactly as described.
            emoji_sentiment: 
            overall_rating: 4.5
            metrics:
              cleanliness: 5
              check_in: 4
              accuracy: 4.5
              location: 5
              value: 4.5
            created_at: '2025-09-26T12:00:00Z'
            edit_deadline: '2025-09-28T12:00:00Z'
            reviewer:
              id: user_abc
              name: Alice
              avatar: https://example.com/alice.jpg
            listing:
              id: listing_123
              title: Cozy Downtown Apartment
              thumbnail: https://example.com/thumb.jpg
          id: verification-123
          status: pending
        error: ''
      description: Standard API response for wishlist grouped by tag.
    DefaultResponse:
      type: object
      properties:
        success:
          type: boolean
        error:
          type: string
        toast:
          type: string
          maxLength: 255
      required:
        - success
        - toast
      example:
        success: true
        toast: Operation successful.
        error: ''
    AddListingRequest:
      type: object
      properties:
        tag:
          type: string
          maxLength: 32
          example: vegas
        listing:
          type: object
          properties:
            listing_id:
              type: string
            thumbnail:
              type: string
              format: uri
          required:
            - listing_id
      required:
        - listing
    RemoveListingRequest:
      type: object
      properties:
        tag:
          type: string
          maxLength: 32
          example: vegas
        listing_id:
          type: string
          example: listing_123
      required:
        - listing_id
    MoveListingRequest:
      type: object
      properties:
        from_tag:
          type: string
          maxLength: 32
          example: vegas
        to_tag:
          type: string
          maxLength: 32
          example: california
        listing_id:
          type: string
          example: listing_123
      required:
        - from_tag
        - to_tag
        - listing_id
    DeleteTagRequest:
      type: object
      properties:
        tag:
          type: string
          maxLength: 32
          example: old_trip
      required:
        - tag
    HealthResponse:
      type: object
      required:
        - status
      properties:
        status:
          type: string
          enum:
            - healthy
            - unhealthy
          description: Service health status
        timestamp:
          type: string
          format: date-time
          description: Health check timestamp
    HeartbeatResponse:
      type: object
      required:
        - status
        - timestamp
        - version
      properties:
        status:
          type: string
          enum:
            - healthy
          description: Service status
        timestamp:
          type: string
          format: date-time
          description: Heartbeat timestamp
        version:
          type: string
          description: Service version
    EarningsResponse:
      type: object
      required:
        - success
        - data
      properties:
        success:
          type: boolean
          description: Request success status
        toast:
          type: string
          description: Optional toast message for the client UI
        data:
          type: object
          description: Earnings data
          properties:
            total_earnings:
              type: number
              format: float
              description: Total earnings amount
            currency:
              type: string
              description: Currency code
            period:
              type: string
              description: Earnings period
    TransactionHistoryResponse:
      type: object
      required:
        - success
        - data
      properties:
        success:
          type: boolean
          description: Request success status
        toast:
          type: string
          description: Optional toast message for the client UI
        data:
          type: object
          description: Transaction history data
          properties:
            transactions:
              type: array
              items:
                type: object
                properties:
                  id:
                    type: string
                    description: Transaction ID
                  amount:
                    type: number
                    format: float
                    description: Transaction amount
                  currency:
                    type: string
                    description: Currency code
                  type:
                    type: string
                    description: Transaction type
                  status:
                    type: string
                    description: Transaction status
                  created_at:
                    type: string
                    format: date-time
                    description: Transaction creation timestamp
            page:
              type: object
              properties:
                limit:
                  type: integer
                  description: Items per page
                page:
                  type: integer
                  description: Current page number
                total:
                  type: integer
                  description: Total number of transactions
                totalPages:
                  type: integer
                  description: Total number of pages
    CreatePaymentIntentRequest:
      type: object
      required:
        - booking_id
        - guest_id
        - host_id
        - listing_id
        - amount
        - currency
      properties:
        booking_id:
          type: string
          description: Booking ID
          example: booking_123
        guest_id:
          type: string
          description: Guest user ID
          example: user_123
        host_id:
          type: string
          description: Host user ID
          example: host_456
        listing_id:
          type: string
          description: Listing ID
          example: listing_789
        amount:
          type: number
          format: float
          description: Payment amount
          example: 150
        currency:
          type: string
          description: Currency code
          example: CAD
        customer_id:
          type: string
          description: Stripe customer ID (optional)
          example: cus_123
        description:
          type: string
          description: Payment description (optional)
          example: Booking payment for Downtown Apartment
    PaymentIntentResponse:
      type: object
      required:
        - id
        - client_secret
        - amount
        - currency
        - status
      properties:
        id:
          type: string
          description: Payment intent ID
          example: pi_1234567890
        client_secret:
          type: string
          description: Client secret for frontend
          example: pi_1234567890_secret_abc123
        amount:
          type: number
          format: float
          description: Payment amount
          example: 150
        currency:
          type: string
          description: Currency code
          example: CAD
        status:
          type: string
          description: Payment intent status
          enum:
            - requires_payment_method
            - requires_confirmation
            - requires_action
            - processing
            - succeeded
            - requires_capture
            - canceled
          example: requires_payment_method
        booking_id:
          type: string
          description: Associated booking ID
          example: booking_123
        created_at:
          type: string
          format: date-time
          description: Creation timestamp
          example: '2024-01-15T10:30:00Z'
    CreateRefundRequest:
      type: object
      required:
        - payment_intent_id
        - booking_id
      properties:
        payment_intent_id:
          type: string
          description: Payment intent ID to refund
          example: pi_1234567890
        booking_id:
          type: string
          description: Booking ID
          example: booking_123
        amount:
          type: number
          format: float
          description: Refund amount (optional, defaults to full refund)
          example: 150
        reason:
          type: string
          description: Refund reason (optional)
          example: customer_request
    RefundResponse:
      type: object
      required:
        - id
        - payment_intent_id
        - amount
        - currency
        - status
      properties:
        id:
          type: string
          description: Refund ID
          example: re_1234567890
        payment_intent_id:
          type: string
          description: Original payment intent ID
          example: pi_1234567890
        amount:
          type: number
          format: float
          description: Refund amount
          example: 150
        currency:
          type: string
          description: Currency code
          example: CAD
        status:
          type: string
          description: Refund status
          enum:
            - pending
            - succeeded
            - failed
            - canceled
          example: succeeded
        reason:
          type: string
          description: Refund reason
          example: customer_request
        booking_id:
          type: string
          description: Associated booking ID
          example: booking_123
        created_at:
          type: string
          format: date-time
          description: Creation timestamp
          example: '2024-01-15T10:30:00Z'
    PaymentMethodsResponse:
      type: object
      required:
        - success
        - data
      properties:
        success:
          type: boolean
          description: Request success status
        toast:
          type: string
          description: Optional toast message for the client UI
        data:
          type: object
          description: Payment methods data
          properties:
            payment_methods:
              type: array
              items:
                type: object
                properties:
                  id:
                    type: string
                    description: Payment method ID
                  type:
                    type: string
                    description: Payment method type (e.g., card)
                  card:
                    type: object
                    properties:
                      brand:
                        type: string
                        description: Card brand (e.g., visa, mastercard)
                      last4:
                        type: string
                        description: Last 4 digits of card
                      expiry_month:
                        type: integer
                        description: Expiry month
                      expiry_year:
                        type: integer
                        description: Expiry year
                  is_default:
                    type: boolean
                    description: Whether this is the default payment method
                  created_at:
                    type: string
                    format: date-time
                    description: When the payment method was added
            default_method:
              type: string
              description: ID of the default payment method
    SetupIntentResponse:
      type: object
      required:
        - id
        - client_secret
        - status
      properties:
        id:
          type: string
          description: Setup intent ID
          example: seti_1234567890
        client_secret:
          type: string
          description: Client secret for frontend
          example: seti_1234567890_secret_abc123
        status:
          type: string
          description: Setup intent status
          enum:
            - requires_payment_method
            - requires_confirmation
            - requires_action
            - processing
            - succeeded
            - canceled
          example: requires_payment_method
        payment_method_id:
          type: string
          description: Payment method ID (available after confirmation)
          example: pm_1234567890
    DocumentRequest:
      type: object
      properties:
        type:
          type: string
          description: Document type/category (determines storage bucket)
          example: profile
        documents:
          type: array
          items:
            $ref: '#/components/schemas/Document'
          minItems: 1
          description: Array of documents to upload
      required:
        - type
        - documents
    Document:
      type: object
      properties:
        name:
          type: string
          description: File name
          example: profile-picture.jpg
        content:
          type: string
          format: byte
          description: Base64 encoded file content
          example: >-
            iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNkYPhfDwAChwGA60e6kgAAAABJRU5ErkJggg==
      required:
        - name
        - content
    SuccessResponse:
      type: object
      required:
        - success
        - data
      properties:
        success:
          type: boolean
          example: true
        data:
          type: object
          description: Response data
        message:
          type: string
          description: Optional success message
          example: Operation completed successfully
    ListResponse:
      type: object
      required:
        - success
        - data
        - pagination
      properties:
        success:
          type: boolean
          example: true
        data:
          type: array
          description: List of items
          items:
            type: object
        pagination:
          type: object
          required:
            - page
            - limit
            - total
            - pages
            - has_next
            - has_prev
          properties:
            page:
              type: integer
              description: Current page number
              example: 1
            limit:
              type: integer
              description: Items per page
              example: 20
            total:
              type: integer
              description: Total number of items
              example: 100
            pages:
              type: integer
              description: Total number of pages
              example: 5
            has_next:
              type: boolean
              description: Whether there are more pages
              example: true
            has_prev:
              type: boolean
              description: Whether there are previous pages
              example: false
        message:
          type: string
          description: Optional success message
    Conversation:
      type: object
      required:
        - id
        - type
        - participants
        - created_at
        - updated_at
      properties:
        id:
          type: string
          description: Unique identifier of the conversation
          example: conv_123456789
        type:
          type: string
          enum:
            - direct
            - group
          description: Type of conversation
          example: direct
        participants:
          type: array
          items:
            type: string
          description: List of user IDs participating in the conversation
          example:
            - user_123
            - user_456
        created_at:
          type: string
          format: date-time
          description: When the conversation was created
          example: '2024-01-15T10:30:00Z'
        updated_at:
          type: string
          format: date-time
          description: When the conversation was last updated
          example: '2024-01-15T14:45:00Z'
        last_message:
          $ref: '#/components/schemas/Message'
        metadata:
          type: object
          description: Additional conversation metadata
          properties:
            title:
              type: string
              description: Conversation title (for group chats)
            description:
              type: string
              description: Conversation description
            avatar_url:
              type: string
              description: Conversation avatar URL
        status:
          type: string
          enum:
            - active
            - archived
            - deleted
          description: Conversation status
          example: active
        unread_count:
          type: integer
          description: Number of unread messages for current user
          example: 3
    Message:
      type: object
      required:
        - id
        - conversation_id
        - sender_id
        - content
        - message_type
        - timestamp
        - status
      properties:
        id:
          type: string
          description: Unique identifier of the message
          example: msg_123456789
        conversation_id:
          type: string
          description: ID of the conversation this message belongs to
          example: conv_123456789
        sender_id:
          type: string
          description: ID of the user who sent the message
          example: user_123
        content:
          type: string
          description: Message content
          example: Hello! How are you doing?
        message_type:
          type: string
          enum:
            - text
            - image
            - file
            - system
          description: Type of message content
          example: text
        timestamp:
          type: string
          format: date-time
          description: When the message was sent
          example: '2024-01-15T14:45:00Z'
        status:
          type: string
          enum:
            - sent
            - delivered
            - read
            - failed
          description: Message delivery status
          example: delivered
        read_by:
          type: object
          additionalProperties:
            type: string
            format: date-time
          description: Map of user IDs to read timestamps
          example:
            user_456: '2024-01-15T14:50:00Z'
        metadata:
          type: object
          description: Additional message metadata
          properties:
            file_url:
              type: string
              description: URL for file/image messages
            file_name:
              type: string
              description: Original filename for file messages
            file_size:
              type: integer
              description: File size in bytes
            mime_type:
              type: string
              description: MIME type of the file
            edited_at:
              type: string
              format: date-time
              description: When the message was last edited
            reply_to:
              type: string
              description: ID of the message this is replying to
    CreateConversationRequest:
      type: object
      required:
        - participants
        - type
      properties:
        participants:
          type: array
          items:
            type: string
          minItems: 2
          maxItems: 2
          description: List of user IDs (exactly 2 for direct conversations)
          example:
            - user_123
            - user_456
        type:
          type: string
          enum:
            - direct
            - group
          description: Type of conversation to create
          example: direct
        metadata:
          type: object
          description: Optional conversation metadata
          properties:
            title:
              type: string
              description: Conversation title (for group chats)
            description:
              type: string
              description: Conversation description
    FindConversationRequest:
      type: object
      required:
        - participants
      properties:
        participants:
          type: array
          items:
            type: string
          minItems: 2
          description: List of user IDs (for direct conversations)
          example:
            - user_123
            - user_456
        metadata:
          type: object
          description: Optional metadata to match (e.g., listing_id)
          additionalProperties: true
          example:
            listing_id: MzqmgZXqwi5BraRNEKPA
            listing_title: Beautiful Apartment in Montreal
    UpdateConversationRequest:
      type: object
      properties:
        metadata:
          type: object
          description: Conversation metadata to update
          properties:
            title:
              type: string
              description: Conversation title
            description:
              type: string
              description: Conversation description
            avatar_url:
              type: string
              description: Conversation avatar URL
        status:
          type: string
          enum:
            - active
            - archived
          description: Conversation status
    SendMessageRequest:
      type: object
      required:
        - content
        - message_type
      properties:
        content:
          type: string
          description: Message content
          example: Hello! How are you doing?
        message_type:
          type: string
          enum:
            - text
            - image
            - file
          description: Type of message content
          example: text
        metadata:
          type: object
          description: Additional message metadata
          properties:
            file_url:
              type: string
              description: URL for file/image messages
            file_name:
              type: string
              description: Original filename for file messages
            file_size:
              type: integer
              description: File size in bytes
            mime_type:
              type: string
              description: MIME type of the file
            reply_to:
              type: string
              description: ID of the message this is replying to
    UpdateMessageRequest:
      type: object
      properties:
        content:
          type: string
          description: Updated message content
        metadata:
          type: object
          description: Updated message metadata
          properties:
            file_url:
              type: string
              description: Updated file URL
            file_name:
              type: string
              description: Updated filename
    TypingIndicatorRequest:
      type: object
      required:
        - is_typing
      properties:
        is_typing:
          type: boolean
          description: Whether the user is currently typing
          example: true
    Error:
      type: object
      required:
        - code
        - message
      properties:
        code:
          type: string
          description: Error code
          example: VALIDATION_ERROR
        message:
          type: string
          description: Human-readable error message
          example: Invalid request parameters
        details:
          type: object
          description: Additional error details
        timestamp:
          type: string
          format: date-time
          description: When the error occurred
    ApiResponse:
      type: object
      properties:
        success:
          type: boolean
        data:
          type: object
        toast:
          type: string
          description: Localized user-facing message
        error:
          type: string
      required:
        - success
        - toast
    CreateStoryRequest:
      type: object
      properties:
        title:
          type: string
          maxLength: 200
        location:
          type: string
          maxLength: 100
        image_url:
          type: string
          format: uri
        country_code:
          type: string
          minLength: 2
          maxLength: 2
        content:
          type: string
          maxLength: 2000
        author:
          type: string
          maxLength: 100
        author_avatar:
          type: string
          format: uri
      required:
        - title
        - location
        - image_url
        - country_code
        - content
        - author
        - author_avatar
    CreateReelRequest:
      type: object
      properties:
        title:
          type: string
          maxLength: 200
        location:
          type: string
          maxLength: 100
        video_url:
          type: string
          format: uri
        image_url:
          type: string
          format: uri
        country_code:
          type: string
          minLength: 2
          maxLength: 2
        content:
          type: string
          maxLength: 2000
        author:
          type: string
          maxLength: 100
        author_avatar:
          type: string
          format: uri
      required:
        - title
        - location
        - video_url
        - image_url
        - country_code
        - content
        - author
        - author_avatar
    CreateExperienceRequest:
      type: object
      properties:
        title:
          type: string
          maxLength: 200
        description:
          type: string
        location:
          $ref: '#/components/schemas/Location'
        price:
          type: number
          minimum: 0
        currency:
          type: string
          minLength: 3
          maxLength: 3
        duration_hours:
          type: integer
          minimum: 1
        max_group_size:
          type: integer
          minimum: 1
      required:
        - title
        - description
        - location
        - price
        - currency
        - duration_hours
        - max_group_size
    CreateEventRequest:
      type: object
      properties:
        title:
          type: string
          maxLength: 200
        description:
          type: string
        location:
          $ref: '#/components/schemas/Location'
        start_time:
          type: string
          format: date-time
        end_time:
          type: string
          format: date-time
        max_attendees:
          type: integer
          minimum: 1
        price:
          type: number
          minimum: 0
        currency:
          type: string
          minLength: 3
          maxLength: 3
      required:
        - title
        - description
        - location
        - start_time
        - end_time
        - max_attendees
        - price
        - currency
    CreateGuideRequest:
      type: object
      properties:
        name:
          type: string
          maxLength: 100
        bio:
          type: string
          maxLength: 500
        avatar:
          type: string
          format: uri
        location:
          $ref: '#/components/schemas/Location'
        languages:
          type: array
          items:
            type: string
        specialties:
          type: array
          items:
            type: string
      required:
        - name
        - bio
        - location
        - languages
        - specialties
    UpdateExperienceRequest:
      type: object
      properties:
        title:
          type: string
          maxLength: 200
        description:
          type: string
        price:
          type: number
          minimum: 0
        duration_hours:
          type: integer
          minimum: 1
        max_group_size:
          type: integer
          minimum: 1
        available:
          type: boolean
    BookExperienceRequest:
      type: object
      properties:
        booking_date:
          type: string
          format: date-time
        participants:
          type: integer
          minimum: 1
        payment_method:
          type: string
      required:
        - booking_date
        - participants
        - payment_method
    CommentRequest:
      type: object
      properties:
        content:
          type: string
          maxLength: 1000
      required:
        - content
    Location:
      type: object
      properties:
        latitude:
          type: number
          format: double
        longitude:
          type: number
          format: double
        city:
          type: string
        country:
          type: string
        place_id:
          type: string
        address:
          type: string
      required:
        - latitude
        - longitude
        - city
        - country
    StoryResponse:
      allOf:
        - $ref: '#/components/schemas/ApiResponse'
        - type: object
          properties:
            data:
              type: object
              properties:
                id:
                  type: string
                title:
                  type: string
                location:
                  type: string
                image_url:
                  type: string
                country_code:
                  type: string
                content:
                  type: string
                likes:
                  type: integer
                views:
                  type: integer
                comments:
                  type: integer
                created_at:
                  type: string
                  format: date-time
                expires_at:
                  type: string
                  format: date-time
                featured:
                  type: boolean
                  default: false
                featured_at:
                  type: string
                  format: date-time
                  nullable: true
                priority:
                  type: integer
                  default: 0
                category:
                  type: string
                  default: travel
                tags:
                  type: array
                  items:
                    type: string
                  default: []
                trending:
                  type: boolean
                  default: false
                author:
                  type: string
                author_avatar:
                  type: string
                public:
                  type: boolean
                  default: false
              required:
                - id
                - title
                - location
                - image_url
                - content
                - country_code
                - likes
                - views
                - comments
                - created_at
                - expires_at
                - featured
                - priority
                - category
                - tags
                - trending
                - author
                - author_avatar
                - public
    ReelResponse:
      allOf:
        - $ref: '#/components/schemas/ApiResponse'
        - type: object
          properties:
            data:
              type: object
              properties:
                id:
                  type: string
                title:
                  type: string
                location:
                  type: string
                image_url:
                  type: string
                video_url:
                  type: string
                country_code:
                  type: string
                content:
                  type: string
                likes:
                  type: integer
                views:
                  type: integer
                comments:
                  type: integer
                created_at:
                  type: string
                  format: date-time
                featured:
                  type: boolean
                  default: false
                featured_at:
                  type: string
                  format: date-time
                  nullable: true
                priority:
                  type: integer
                  default: 0
                category:
                  type: string
                  default: travel
                tags:
                  type: array
                  items:
                    type: string
                  default: []
                trending:
                  type: boolean
                  default: false
                author:
                  type: string
                author_avatar:
                  type: string
                public:
                  type: boolean
                  default: false
              required:
                - id
                - title
                - location
                - image_url
                - video_url
                - content
                - country_code
                - likes
                - views
                - comments
                - created_at
                - featured
                - priority
                - category
                - tags
                - trending
                - author
                - author_avatar
                - public
    ExperienceResponse:
      type: object
      properties:
        id:
          type: string
        title:
          type: string
        description:
          type: string
        location:
          $ref: '#/components/schemas/Location'
        price:
          type: number
        currency:
          type: string
        duration_hours:
          type: integer
        max_group_size:
          type: integer
        available:
          type: boolean
        likes:
          type: integer
        views:
          type: integer
        bookings:
          type: integer
        created_at:
          type: string
          format: date-time
      required:
        - id
        - title
        - description
        - location
        - price
        - currency
        - duration_hours
        - max_group_size
        - available
        - likes
        - views
        - bookings
        - created_at
    EventResponse:
      type: object
      properties:
        id:
          type: string
        title:
          type: string
        description:
          type: string
        location:
          $ref: '#/components/schemas/Location'
        start_time:
          type: string
          format: date-time
        end_time:
          type: string
          format: date-time
        max_attendees:
          type: integer
        attendees:
          type: integer
        price:
          type: number
        currency:
          type: string
        created_at:
          type: string
          format: date-time
      required:
        - id
        - title
        - description
        - location
        - start_time
        - end_time
        - max_attendees
        - attendees
        - price
        - currency
        - created_at
    GuideResponse:
      type: object
      properties:
        id:
          type: string
        name:
          type: string
        bio:
          type: string
        avatar:
          type: string
        location:
          $ref: '#/components/schemas/Location'
        languages:
          type: array
          items:
            type: string
        specialties:
          type: array
          items:
            type: string
        rating:
          type: number
          format: float
        review_count:
          type: integer
        verified:
          type: boolean
        created_at:
          type: string
          format: date-time
      required:
        - id
        - name
        - bio
        - location
        - languages
        - specialties
        - rating
        - review_count
        - verified
        - created_at
    BookingResponse:
      type: object
      properties:
        id:
          type: string
        type:
          type: string
        content_id:
          type: string
        status:
          type: string
        booking_date:
          type: string
          format: date-time
        participants:
          type: integer
        total_amount:
          type: number
        currency:
          type: string
        payment_status:
          type: string
        created_at:
          type: string
          format: date-time
      required:
        - id
        - type
        - content_id
        - status
        - booking_date
        - participants
        - total_amount
        - currency
        - payment_status
        - created_at
    CommentResponse:
      type: object
      properties:
        id:
          type: string
        content:
          type: string
        user_name:
          type: string
        user_avatar:
          type: string
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time
      required:
        - id
        - content
        - user_name
        - user_avatar
        - created_at
        - updated_at
    StoryListResponse:
      type: object
      properties:
        stories:
          type: array
          items:
            $ref: '#/components/schemas/StoryResponse'
        pagination:
          $ref: '#/components/schemas/Pagination'
      required:
        - stories
        - pagination
    ReelListResponse:
      type: object
      properties:
        reels:
          type: array
          items:
            $ref: '#/components/schemas/ReelResponse'
        pagination:
          $ref: '#/components/schemas/Pagination'
      required:
        - reels
        - pagination
    ExperienceListResponse:
      type: object
      properties:
        experiences:
          type: array
          items:
            $ref: '#/components/schemas/ExperienceResponse'
        pagination:
          $ref: '#/components/schemas/Pagination'
      required:
        - experiences
        - pagination
    EventListResponse:
      type: object
      properties:
        events:
          type: array
          items:
            $ref: '#/components/schemas/EventResponse'
        pagination:
          $ref: '#/components/schemas/Pagination'
      required:
        - events
        - pagination
    GuideListResponse:
      type: object
      properties:
        guides:
          type: array
          items:
            $ref: '#/components/schemas/GuideResponse'
        pagination:
          $ref: '#/components/schemas/Pagination'
      required:
        - guides
        - pagination
    BookingListResponse:
      type: object
      properties:
        bookings:
          type: array
          items:
            $ref: '#/components/schemas/BookingResponse'
        pagination:
          $ref: '#/components/schemas/Pagination'
      required:
        - bookings
        - pagination
    CommentListResponse:
      type: object
      properties:
        comments:
          type: array
          items:
            $ref: '#/components/schemas/CommentResponse'
        pagination:
          $ref: '#/components/schemas/Pagination'
      required:
        - comments
        - pagination
    FeedResponse:
      type: object
      properties:
        feed:
          type: array
          items:
            oneOf:
              - $ref: '#/components/schemas/StoryResponse'
              - $ref: '#/components/schemas/ReelResponse'
        pagination:
          $ref: '#/components/schemas/Pagination'
      required:
        - feed
        - pagination
    EventJoinResponse:
      type: object
      properties:
        success:
          type: boolean
        message:
          type: string
        attendees:
          type: integer
      required:
        - success
        - message
        - attendees
    ViewCountResponse:
      type: object
      properties:
        views:
          type: integer
      required:
        - views
    LikeResponse:
      type: object
      properties:
        liked:
          type: boolean
        likes:
          type: integer
      required:
        - liked
        - likes
    Pagination:
      type: object
      properties:
        page:
          type: integer
        limit:
          type: integer
        total:
          type: integer
        total_pages:
          type: integer
        has_next:
          type: boolean
        has_prev:
          type: boolean
      required:
        - page
        - limit
        - total
        - total_pages
        - has_next
        - has_prev
    CreateTravelPlanRequest:
      type: object
      properties:
        location:
          type: string
          maxLength: 200
        notes:
          type: string
          maxLength: 2000
        planned_date:
          type: string
          format: date-time
        start_date:
          type: string
          format: date-time
        end_date:
          type: string
          format: date-time
        is_confirmed:
          type: boolean
          default: false
        is_draft:
          type: boolean
          default: true
        organizer_name:
          type: string
          maxLength: 100
        organizer_avatar:
          type: string
          format: uri
      required:
        - location
    UpdateTravelPlanRequest:
      type: object
      properties:
        location:
          type: string
          maxLength: 200
        notes:
          type: string
          maxLength: 2000
        planned_date:
          type: string
          format: date-time
        start_date:
          type: string
          format: date-time
        end_date:
          type: string
          format: date-time
        is_confirmed:
          type: boolean
        is_draft:
          type: boolean
        organizer_name:
          type: string
          maxLength: 100
        organizer_avatar:
          type: string
          format: uri
    ConnectToPlanRequest:
      type: object
      properties:
        message:
          type: string
          maxLength: 1000
        user_start_date:
          type: string
          format: date-time
        user_end_date:
          type: string
          format: date-time
        user_name:
          type: string
          maxLength: 100
        user_avatar:
          type: string
          format: uri
      required:
        - user_name
    TravelPlanResponse:
      allOf:
        - $ref: '#/components/schemas/ApiResponse'
        - type: object
          properties:
            data:
              type: object
              properties:
                id:
                  type: string
                location:
                  type: string
                notes:
                  type: string
                planned_date:
                  type: string
                  format: date-time
                  nullable: true
                start_date:
                  type: string
                  format: date-time
                  nullable: true
                end_date:
                  type: string
                  format: date-time
                  nullable: true
                is_confirmed:
                  type: boolean
                is_draft:
                  type: boolean
                connections:
                  type: array
                  items:
                    $ref: '#/components/schemas/ConnectionResponse'
                organizer_id:
                  type: string
                organizer_name:
                  type: string
                organizer_avatar:
                  type: string
                created_at:
                  type: string
                  format: date-time
                updated_at:
                  type: string
                  format: date-time
              required:
                - id
                - location
                - is_confirmed
                - is_draft
                - connections
                - organizer_id
                - created_at
                - updated_at
    ConnectionResponse:
      type: object
      properties:
        id:
          type: string
        user_id:
          type: string
        user_name:
          type: string
        user_avatar:
          type: string
        message:
          type: string
        user_start_date:
          type: string
          format: date-time
        user_end_date:
          type: string
          format: date-time
        created_at:
          type: string
          format: date-time
      required:
        - id
        - user_id
        - user_name
        - created_at
    TravelPlanListResponse:
      allOf:
        - $ref: '#/components/schemas/ApiResponse'
        - type: object
          properties:
            data:
              type: object
              properties:
                plans:
                  type: array
                  items:
                    $ref: '#/components/schemas/TravelPlanResponse'
                pagination:
                  $ref: '#/components/schemas/Pagination'
              required:
                - plans
                - pagination
    ConnectionListResponse:
      allOf:
        - $ref: '#/components/schemas/ApiResponse'
        - type: object
          properties:
            data:
              type: object
              properties:
                connections:
                  type: array
                  items:
                    $ref: '#/components/schemas/ConnectionResponse'
                pagination:
                  $ref: '#/components/schemas/Pagination'
              required:
                - connections
                - pagination
    FacematchSubmissionRequest:
      type: object
      properties:
        document_type:
          type: string
          enum:
            - drivers_license
            - passport
            - national_id
          description: Type of ID document being verified
        front_image_url:
          type: string
          format: uri
          description: URL of the front side of the ID document
        back_image_url:
          type: string
          format: uri
          description: URL of the back side of the ID document
        selfie_image_url:
          type: string
          format: uri
          description: URL of the selfie photo for face matching
        device_info:
          type: object
          description: Device information for security
          default: {}
        metadata:
          type: object
          description: Additional metadata
          default: {}
      required:
        - document_type
        - front_image_url
        - back_image_url
        - selfie_image_url
    LocationSubmissionRequest:
      type: object
      properties:
        location:
          $ref: '#/components/schemas/GeoLocation'
        device_info:
          type: object
          description: Device information for security
          default: {}
        metadata:
          type: object
          description: Additional metadata
          default: {}
      required:
        - location
    BackgroundSubmissionRequest:
      type: object
      properties:
        device_info:
          type: object
          description: Device information for security
          default: {}
        metadata:
          type: object
          description: Additional metadata
          default: {}
    VoiceSubmissionRequest:
      type: object
      properties:
        audio_url:
          type: string
          format: uri
          description: URL of audio file for voice biometrics
        device_info:
          type: object
          description: Device information for security
          default: {}
        metadata:
          type: object
          description: Additional metadata
          default: {}
      required:
        - audio_url
    GeoLocation:
      type: object
      properties:
        latitude:
          type: number
          format: float
          minimum: -90
          maximum: 90
          description: Latitude coordinate
        longitude:
          type: number
          format: float
          minimum: -180
          maximum: 180
          description: Longitude coordinate
        accuracy:
          type: number
          format: float
          description: Location accuracy in meters
      required:
        - latitude
        - longitude
    VerificationSubmissionResponse:
      type: object
      properties:
        id:
          type: string
          description: Verification ID
        status:
          type: string
          enum:
            - pending
            - processing
            - approved
            - rejected
            - needs_review
            - failed
          description: Current verification status
        created_at:
          type: string
          format: date-time
          description: Creation timestamp
        estimated_processing_time:
          type: integer
          description: Estimated processing time in minutes
      required:
        - id
        - status
        - created_at
    VerificationStatusResponse:
      type: object
      properties:
        id:
          type: string
          description: Verification ID
        user_id:
          type: string
          description: User ID
        verification_type:
          type: string
          enum:
            - facematch
            - background
            - location
            - voice
            - livevideo
            - pose
            - peer
          description: Type of verification
        document_type:
          type: string
          enum:
            - drivers_license
            - passport
            - national_id
          description: Document type
        status:
          type: string
          enum:
            - pending
            - processing
            - approved
            - rejected
            - needs_review
            - failed
          description: Current verification status
        confidence_score:
          type: number
          format: float
          description: Confidence score from AI validation
        created_at:
          type: string
          format: date-time
          description: Creation timestamp
        updated_at:
          type: string
          format: date-time
          description: Last update timestamp
        reviewed_by:
          type: string
          description: ID of reviewer
        review_notes:
          type: string
          description: Review notes
      required:
        - id
        - user_id
        - verification_type
        - document_type
        - status
        - created_at
        - updated_at
    VerificationListResponse:
      type: object
      properties:
        verifications:
          type: array
          items:
            $ref: '#/components/schemas/VerificationStatusResponse'
          description: List of verifications
        total:
          type: integer
          description: Total count
        page:
          type: integer
          description: Current page
        limit:
          type: integer
          description: Items per page
        has_more:
          type: boolean
          description: Whether there are more items
      required:
        - verifications
        - total
        - page
        - limit
        - has_more
    VerificationResultResponse:
      type: object
      properties:
        id_validation:
          type: boolean
          description: ID document validation result
        liveness_detected:
          type: boolean
          description: Liveness detection result
        face_match_score:
          type: number
          format: float
          description: Face matching confidence score
        overall_confidence:
          type: number
          format: float
          description: Overall confidence score
        ai_provider:
          type: string
          description: AI service provider used
        processing_time:
          type: number
          format: float
          description: Processing time in seconds
        extracted_data:
          type: object
          description: Extracted data from ID document
      required:
        - id_validation
        - liveness_detected
        - face_match_score
        - overall_confidence
        - ai_provider
        - processing_time
  securitySchemes:
    jwtAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
  responses:
    BadRequest:
      description: Bad request
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
    Unauthorized:
      description: Unauthorized
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
    Forbidden:
      description: Forbidden
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
    NotFound:
      description: Not found
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
    InternalServerError:
      description: Internal server error
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
